(window.LearnosityAmd=window.LearnosityAmd||[]).push([[57],{130:function(t,n,r){"use strict";var o=r(1),i=r.n(o),a=r(0),c=r.n(a),l=r(7),u=r(3),p=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,f=new function(){var t=/Mac|iPad|iPhone|iPod/.test(navigator.platform),n=c.a.uniqueId("lrn_capslock_listener_"),r=this,o=[];function setStatus(t){r.status!==t&&(c.a.each(o,(function(n){n(t)})),r.status=t)}this.status=!1,this.observe=function(a,l){return l&&(a=c.a.bind(a,l)),o.push(a),1===o.length&&function startListening(){var o=!1;i()(window).on("focus."+n,(function(){i()(window).one("keypress."+n,r.correctStatus)})),t?(i()(window).on("keydown."+n,(function(t){20===(t||window.event).keyCode&&setStatus(!r.status)})),i()(window).on("keyup."+n,(function(t){20===(t||window.event).keyCode&&setStatus(!1)}))):(i()(window).on("keydown."+n,(function(t){var n=t||window.event;o||20!==n.keyCode||(setStatus(!r.status),o=!0)})),i()(window).on("keyup."+n,(function(t){var n=t||window.event;o&&20===n.keyCode&&(o=!1)})))}(),a},this.unobserve=function(t){(o=c.a.without(o,t)).length||function stopListening(){i()(window).off("."+n)}()},this.correctStatus=function(n){var r=n||window.event,o=r.charCode||r.keyCode,i=r.shiftKey;o<123&&o>96?setStatus(i):!(o<91&&o>64)||t&&i||setStatus(!i)}},d=new function(){var t=c.a.uniqueId("lrn_fullscreen_listener_"),n=this,r=[],o={generic:{change:"fullscreenchange",element:"fullscreenElement"},webkit:{change:"webkitfullscreenchange",element:"webkitFullscreenElement"},ms:{change:"MSFullscreenChange",element:"msFullscreenElement"},moz:{change:"mozfullscreenchange",element:"mozFullScreenElement"}},a="ie"===l.a.browser&&11===l.a.version,u=c.a.find(o,(function(t){if("on".concat(t.change)in document.documentElement)return t}));!u&&a&&(u=o.ms);var p=!1;function setElement(){var t=document[u.element];n.element!==t&&(c.a.each(r,(function(n){n(t)})),n.element=t)}function updateElementAfterNextRender(){p||(p=!0,requestAnimationFrame((function(){requestAnimationFrame((function(){p=!1,setElement()}))})))}this.element=null,this.observe=function(n,o){return o&&(n=c.a.bind(n,o)),u&&(r.push(n),1===r.length&&function startListening(){i()(document).on(u.change+"."+t,updateElementAfterNextRender),p||setElement()}()),n},this.unobserve=function(n){(r=c.a.without(r,n)).length||function stopListening(){i()(document).off("."+t)}()}};function isEventSupported(t){var n=document.createElement("p"),r=!1;if(n.addEventListener)n.addEventListener(t,(function(){r=!0}),!1);else{if(!n.attachEvent)return!1;n.attachEvent("on"+t,(function(){r=!0}))}return n.setAttribute("id","target"),r}n.a={capsLock:f,fullScreen:d,getViewportOffset:function getViewportOffset(){var t=i()(window),n={top:t.scrollTop(),left:t.scrollLeft()};return n.right=n.left+t.width(),n.bottom=n.top+t.height(),n},getVisibleViewportDimensions:function getVisibleViewportDimensions(){var t,n=window.innerWidth,r=window.innerHeight;return c.a.contains(["firefox","opera"],l.a.browser)&&(n=(t=i()('<div style="position:fixed;right:0;bottom:0;"></div>').appendTo(i()("body"))).get(0).getBoundingClientRect().left,r=t.get(0).getBoundingClientRect().top,t.remove()),{width:n,height:r}},sidesOnScreen:function sidesOnScreen(t){var n=i()(t),r=n.offset(),o=this.getViewportOffset();return r.right=r.left+n.outerWidth(),r.bottom=r.top+n.outerHeight(),{top:o.top<r.top&&r.top<o.bottom,right:o.right>r.right&&r.right>o.left,bottom:o.bottom>r.bottom&&r.bottom>o.top,left:o.left<r.left&&r.left<o.right}},observeMutation:function observeMutation(t,n,r){n=n||{};var o,a=i()(t),l=c.a.uniqueId("lrn.mutation."),u={childList:n.childList||!1,characterData:n.characterData||!1,attributeOldValue:n.attributeOldValue||!1,charactedDataOldValue:n.charactedDataOldValue||!1,subtree:n.subtree||!1,attributes:n.attributes||!1};if(n.attributeFilter instanceof Array&&(u.attributeFilter=n.attributeFilter),p){if(!(u.childList||u.attributes||u.characterData))return console.log('NOTE: At the very least, childList, attributes, or characterData must be set to true. Otherwise, "An invalid or illegal string was specified" error is thrown.'),!1;o=new p((function(t){t.forEach(r)})),a.each((function(){try{o.observe(t,u)}catch(n){console.log(n,t,u)}}))}else a.data("lrn-mutation-ns",l),u.attributes&&(isEventSupported("DOMAttrModified")?a.on("DOMAttrModified."+l,r):"onpropertychange"in document.body&&t.attachEvent("propertychange",r)),u.childList&&(isEventSupported("DOMSubtreeModified")?a.on("DOMSubtreeModified."+l+" DOMCharacterDataModified."+l+" DOMAttributeNameChanged."+l,r):"onpropertychange"in document.body&&a.find("*").each((function(){this.attachEvent&&this.attachEvent("onpropertychange",r)})));return o},unobserveMutation:function unobserveMutation(t,n,r){if(t)t.disconnect();else{var o=i()(n),a=o.data("lrn-mutation-ns");o.removeData("lrn-mutation-ns").off("."+a),r&&!isEventSupported("DOMSubtreeModified")&&"onpropertychange"in document.body&&(n.detachEvent("onpropertychange",r),o.find("*").each((function(){this.detachEvent&&this.detachEvent("onpropertychange",r)})))}},recomputeOpacityOn:function recomputeOpacityOn(t){if(window.getComputedStyle)return window.getComputedStyle(t).opacity},updateButtonMap:function updateButtonMap(t){var n=function getButtonMap(t){return t.map((function(){var t=i()(this),n=t.offset(),r=n.left+parseInt(t.css("margin-left"),10),o=n.top+parseInt(t.css("margin-top"),10);return{top:o,right:r+t.width(),bottom:o+t.height(),left:r,el:this,links:{}}})).get()}(t);function isBetween(t,n,r){return c.a.min([n,r])<=t&&c.a.max([n,r])>=t}function closest(t,n){var r=(n.left+n.right)/2,o=(n.top+n.bottom)/2;return c.a.first(c.a.sortBy(t,(function(t){var n=(t.left+t.right)/2,i=(t.top+t.bottom)/2,a=Math.abs(n-r),c=Math.abs(i-o);return Math.sqrt(a*a+c*c)})))}function areAligned(t,n,r,o){return isBetween(r,t,n)||isBetween(o,t,n)||isBetween(t,r,o)&&isBetween(n,r,o)}return c.a.each(n,(function(t){var r,o,i,a,c=[],l=[];for(a=0;a<n.length;a++)(i=n[a])!==t&&(areAligned(t.top,t.bottom,i.top,i.bottom)&&i.left>=t.right&&c.push(i),areAligned(t.left,t.right,i.left,i.right)&&i.top>=t.bottom&&l.push(i));r=closest(c,t),o=closest(l,t),r&&(t.links.RIGHT=r,r.links.LEFT=t),o&&(t.links.DOWN=o,o.links.UP=t)})),n},toggleBackgroundClickable:function toggleBackgroundClickable(t){var n=i()("html"),r=n.map((function(){return i()(this).css("cursor")})).get();t&&!c.a.isEqual(r,["pointer"])&&(this.cachedHtmlCursorStyle=r,n.css("cursor","pointer")),!t&&this.cachedHtmlCursorStyle&&c.a.each(this.cachedHtmlCursorStyle,(function(t,r){n.eq(r).css("cursor","auto"===t?"":t)}))},isElementVisible:function isElementVisible(t){return!!t.offsetParent&&"hidden"!==getComputedStyle(t).getPropertyValue("visibility")},focusable:function focusable(t,n){var r,o,a,c=t.nodeName.toLowerCase();return"area"===c?(o=(r=t.parentNode).name,!(!t.href||!o||"map"!==r.nodeName.toLowerCase())&&(!!(a=i()('img[usemap="#'+o+'"]')[0])&&this.isElementVisible(a))):(/^(input|select|textarea|button|object)$/.test(c)?!t.disabled:"a"===c&&t.href||n)&&this.isElementVisible(t)},getNextTab:function getNextTab(t,n){var r,o,a,l,u,p=!1,f=!1,d=this,h=!0;return i()(document).find("*").each((function(y,g){return o=i()(g),a=o.attr("tabindex"),l=isNaN(a),r=(l||a>=0)&&d.focusable(g,!l),u=!1,c.a.isArray(n)&&c.a.each(n,(function(t){o.hasClass(t)&&(u=!0)})),!!u||(!f&&r&&(f=o),p&&r?(h=!1,f=o,!1):void(r&&g===t&&(p=!0)))})),!!f&&{nextTabElement:f,isFirstElement:h}},detectRenderEnd:function detectRenderEnd(t,n){var r=this,o={childList:!0,subtree:!0,attributes:!0};return new u.default((function(i){var a,c;function resolveSoon(){clearTimeout(a),a=setTimeout((function(){r.unobserveMutation(c,t,resolveSoon),i()}),n)}c=r.observeMutation(t,o,resolveSoon),resolveSoon()}))}}},131:function(t,n,r){"use strict";r.d(n,"a",(function(){return i18nTemplate}));var o=r(0),i=r.n(o);function i18nTemplate(t,n){return i.a.isEmpty(t)?"":(i()(n).forEach((function(n,r){var o="{{".concat(r,"}}");t=t.replace(o,n)})),t)}},133:function(t,n,r){"use strict";r.d(n,"b",(function(){return isArrowKey})),r.d(n,"c",(function(){return isEnterOrSpace}));var o=r(0),i=r.n(o);function isArrowKey(t){return i.a.contains([37,38,39,40],t)}function isEnterOrSpace(t){return 32===t||13===t}n.a={PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,ESCAPE:27,ENTER:13,TAB:9,SHIFT:16,SPACE:32,DELETE:46,ADD_EQUAL:187,FF_ADD_EQUAL:61,NUM_PAD_ADD:107,MINUS:189,FF_MINUS:173,NUM_PAD_MINUS:109,NUM_PAD_MULTIPLY:106,DIVIDE:191,NUM_PAD_DIVIDE:111,DECIMAL:190,NUM_PAD_DECIMAL:110,NUMBER_0:48,NUMBER_1:49,NUMBER_2:50,NUMBER_3:51,NUMBER_4:52,NUMBER_5:53,NUMBER_6:54,NUMBER_7:55,NUMBER_8:56,NUMBER_9:57,NUM_PAD_0:96,NUM_PAD_1:97,NUM_PAD_2:98,NUM_PAD_3:99,NUM_PAD_4:100,NUM_PAD_5:101,NUM_PAD_6:102,NUM_PAD_7:103,NUM_PAD_8:104,NUM_PAD_9:105}},134:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(17),c=r.n(a),l=r(36),u=r(131),p={CORRECT:"correct",INCORRECT:"incorrect",VALID:"valid"},f={globalText:function globalText(t,n){return t===p.CORRECT?n.correctResponse:t===p.INCORRECT?n.incorrectResponse:""},correctText:function correctText(t,n){var r="";if(!i.a.isEmpty(t)){var o=t.length;r+=o>1?Object(u.a)(n.numberOfCorrectAnswers,{number:o}):n.oneCorrectAnswer}return r+=i.a.pluck(t,"text").join(", ")},incorrectText:function incorrectText(t,n){var r="";if(!i.a.isEmpty(t)){var o=t.length;r+=o>1?Object(u.a)(n.numberOfIncorrectAnswers,{number:o}):n.oneIncorrectAnswer}return r+=i.a.pluck(t,"text").join(", ")},suggestedResponsesText:function suggestedResponsesText(t,n,r){var o="";if(t=i.a.filter(t,(function(t){return!i.a.findWhere(n,{text:t.text})})),!i.a.isEmpty(t)){var a=t.length;o+=a>1?Object(u.a)(r.numberOfExpectedAnswers,{number:a}):r.oneExpectedAnswer}return o+=i.a.pluck(t,"text").join(", ")}};function getGlobalAccessibility(t,n){var r=t===p.CORRECT?n?Object(u.a)(n.correctResponse):"response - correct":t===p.INCORRECT?n?Object(u.a)(n.incorrectResponse):"response - incorrect":void 0;return{label:r,visible:i.a.isString(r)}}function getText(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=c.a.stripHTML(c.a.createImageDescriptions(t),!1);if(n){var o=r.match(/\\\(\S*?\\\)/g)||[];o=o.concat(r.match(/\\\[\S*?\\]/g)||[]),i.a.each(o,(function(t){var n=t.replace("\\(","").replace("\\)","").replace("\\[","").replace("\\]",""),o="";l.a.translateOrEmptyString(n,(function(t){return o=t})),r=r.replace(t,o)}))}return r}n.a={STATES:p,ariaContentFunctions:f,getGlobalAccessibility:getGlobalAccessibility,getResponseAccessibility:function getResponseAccessibility(t){var n=t.value,r=t.state,o=t.isMath,a=t.validationState,c=t.ariaLiveLabels,l=t.minSelection,f=t.maxSelection,d=t.isMinSelectionWarningVisible,h=void 0!==d&&d,y=t.isMaxSelectionWarningVisible,g=void 0!==y&&y,v=h||g,m=getGlobalAccessibility(a,c).visible||v,b=i.a.isFunction(r)?r():r,O=m&&n?getText(n,o):null;return{label:function(){if(m){var t=p.CORRECT,n=p.INCORRECT,r=p.VALID,o=O?"".concat(O," - "):"",i=l>1?c.minResponsesMessage:c.minResponseMessage,a=f>1?c.maxResponsesMessage:c.maxResponseMessage;return b===t?Object(u.a)(c.correct,{prefix:o}):b===n?Object(u.a)(c.incorrect,{prefix:o}):b===r?Object(u.a)(c.missed,{prefix:o}):g?Object(u.a)(a,{prefix:o,maxSelection:f}):h?Object(u.a)(i,{prefix:o,minSelection:l}):Object(u.a)(c.noResponseGiven,{prefix:o})}}(),visible:m}},getResponseState:function getResponseState(t,n){return i.a.isNull(t)&&i.a.isNull(n)?null:i.a.isString(t)&&n?p.CORRECT:i.a.isString(t)&&!n?p.INCORRECT:i.a.isNull(t)&&!n?p.VALID:void 0},getText:getText,getAriaLabelFromAllElements:function getAriaLabelFromAllElements(t){var n=document.createElement("div");return n.innerHTML=t,function stripElementContent(t){return t.map((function(t){if(t.attributes&&t.attributes.alt)return"Image with alt text: ".concat(t.attributes.alt.value);if(t.attributes&&t.attributes["aria-label"])return t.attributes["aria-label"].value;if(t.children){var n=[].slice.call(t.childNodes);return stripElementContent(n).join(" ")}return t.textContent}))}([].slice.call(n.childNodes)).join(", ")}}},137:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(10),c=(r(42),r(35));function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=["exactMatch","partialMatch","partialMatchV2"],u=function isDefaultValidResponseValue(t){return 0===i.a.filter(t,(function(t){return t||0===t})).length},p=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(ClozeScorer,t);var n=_createSuper(ClozeScorer);function ClozeScorer(){return _classCallCheck(this,ClozeScorer),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(ClozeScorer,[{key:"reset",value:function reset(t){var n=JSON.stringify(t),r=this.flags||this.cachedFlags;if(this.serializedData!==n){t.question.validation&&t.question.validation.scoring_type||(t=a.a.normalizeParameters(t));var o=getOptions(t.question,r);try{this.scoringData=function getScoringData(t,n){var r=t.question.validation,o=[];if(!function canValidateResponse(t){if(!1===i.a.getNested(t,"validation.automarkable"))return!1;var n=t.validation||t||{};return!i.a.isEmpty(n)&&(i.a.isArray(n.valid_responses)||i.a.isObject(n.valid_response)&&!u(n.valid_response.value))}(t.question))return{automarkable:!1};t.question.equiv_literal_legacy&&(t=a.a.processCompatibility(t));if(t.response=t.response||{},r&&r.scoring_type){if(!i.a.contains(l,r.scoring_type))throw new a.a.InvalidScoringTypeException(t.question.type,r.scoring_type);return r.valid_response&&o.push(r.valid_response),r.alt_responses&&(o=o.concat(r.alt_responses)),function processResponsesCurrentScoringFormat(t,n,r){var o={score:1,penaltyScore:0,rounding:"floor"};return a.a.scoreArray(t,n,o,r)}(t,o,n)}return i.a.isArray(t.question.valid_responses)?function processLegacyResponses1233(t,n){var r,o,c=t.question,l=t.response&&t.response.value||[],u=c.valid_responses,p=[];n=getOptions(c,{stripWhiteSpaceForMath:!0}),i.a.each(l,(function(t,c){var l,f,d=u[c],h=!1;i.a.each(d,(function(r){r.value&&i.a.isNumber(r.score)&&(a.a.stringCompare(t,r.value,n)?(f=r.score,h=!0):f=f||0,(i.a.isUndefined(l)||r.score>l)&&(l=r.score))})),r=a.a.addIfDefined(r,f),o=a.a.addIfDefined(o,l),p.push(h)})),l.length||i.a.each(u,(function(t,n){var r;i.a.each(t,(function(t){i.a.isNumber(t.score)&&(i.a.isUndefined(r)||t.score>r)&&(r=t.score)})),o=a.a.addIfDefined(o,r)}));return{score:r,responsesValid:p,maxScore:o,isValid:p.length?i.a.all(p):void 0}}(t,n):function processLegacyResponsesPre2140(t,n){var r,o=t.question,c=t.response||{};o.validation=o.validation||{};var l,u,p=o.validation.valid_responses,f=c.value||[],d=Math.abs(i.a.isNumber(o.validation.penalty_score)?o.validation.penalty_score:0),h=function getResponseScoreArray(t){var n,r=parseFloat(t.validation.valid_score),o=t.validation.valid_responses,a=[];if(r=isNaN(r)?1:r,i.a.isArray(t.validation.valid_score))a=t.validation.valid_score;else for(var c=0;c<o.length;c++){n=[];for(var l=0;l<o[c].length;l++)n.push(r);a.push(n)}return a}(o),y=[],g=0;i.a.each(f,(function(t,o){var c=p[o],u=0,f=!1;if(!i.a.isUndefined(t)&&null!==t&&""!==t&&i.a.isArray(c))for(var g=0;g<c.length;g++){if(a.a.stringCompare(t,c[g],n)){u=h[o][g],r=c,f=!0;break}u=-1*d}y.push(f),l=(i.a.isUndefined(l)?0:l)+u})),i.a.each(h,(function(t){g+=i.a.max(t)})),f.length&&!1===o.validation.partial_scoring&&l!==g&&(l=0);f.length&&y.length&&(u=!1===o.validation.partial_scoring?i.a.all(y):i.a.any(y));return{score:l,responsesValid:y,suggestedResponse:r,maxScore:g,isValid:u}}(t,n)}(t,o),a.a.normalizeScores(this.scoringData,t)}catch(t){this.scoringData={error:t}}this.serializedData=n}return this.cachedFlags=r,this}},{key:"flags",get:function get(){}}]),ClozeScorer}(c.a);function getOptions(t,n){var r={caseSensitive:!!t.case_sensitive,removeWhitespace:!!t.is_math&&n.stripWhiteSpaceForMath,matchAllPossibleResponses:!(!t.validation||!t.validation.match_all_possible_responses)};return delete n.stripWhiteSpaceForMath,i.a.extend(n,r)}n.a=p},139:function(t,n,r){"use strict";r.d(n,"c",(function(){return getViewportDimensions})),r.d(n,"b",(function(){return getElementDocumentBounding}));var o=r(0),i=r.n(o),a=document.documentElement;function getViewportScroll(){return{left:window.pageXOffset||a.scrollLeft,top:window.pageYOffset||a.scrollTop}}function getViewportDimensions(){var t=getViewportScroll();return{top:t.top,left:t.left,width:document.documentElement.clientWidth||document.body.clientWidth,height:document.documentElement.clientHeight||document.body.clientHeight}}function getDocumentDimensions(){var t=document.body,n=document.documentElement;return{width:Math.max(t.scrollWidth,t.offsetWidth,n.clientWidth,n.scrollWidth,n.offsetWidth),height:Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight)}}function getElementDocumentBounding(t){var n=t.getBoundingClientRect(),r=getViewportScroll();return{top:n.top+r.top,left:n.left+r.left,width:n.width,height:n.height}}n.a={relativeToElement:function relativeToElement(t,n,r){var o=i.a.extend({gap:0,viewportGap:5,centerAlign:!0},r),a=o.gap,c=getElementDocumentBounding(n),l=o.centerAlign?c.width/2:0,u=getElementDocumentBounding(t),p=o.centerAlign?u.width/2:0,f=o.viewportGap,d=getViewportDimensions(),h=getDocumentDimensions(),y=u.top+u.height+a,g=h.height-y,v=u.top-d.top<d.height+d.top-y&&g>c.height||y<c.height,m=u.left+p-l,b=y,O="bottom";return c.width>=d.width?m=0:m+c.width>d.width?m=d.width-c.width-f:m<0&&(m=f),b+c.height>d.top+d.height&&(b=u.top-c.height-a,O="top"),(b<0||v)&&(b=y,O="bottom"),{left:m,top:b,position:O}},getViewportScroll:getViewportScroll,getViewportDimensions:getViewportDimensions,getViewportCenter:function getViewportCenter(){var t=getViewportDimensions();return{x:t.left+t.width/2,y:t.top+t.height/2}},getDocumentDimensions:getDocumentDimensions,getElementDocumentBounding:getElementDocumentBounding,getPositionRelativeToParent:function getPositionRelativeToParent(t,n){var r=getElementDocumentBounding(t),o=getElementDocumentBounding(n);return{top:r.top-o.top,left:r.left-o.left}}}},142:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a={"lower-alpha":"a","upper-alpha":"A",number:1};n.a=function stemNumerationHelper(t,n){if(!t)return"";var r=a[t];return n=i.a.isNumber(n)?n:parseInt(n,10),"string"==typeof r?String.fromCharCode(r.charCodeAt(0)+n):"number"==typeof r?(r+n).toString():void 0}},145:function(t,n,r){"use strict";var o={};function clear(t){var n=o[t];n&&(clearTimeout(n),delete o[t])}n.a={start:function start(t,n){var r=arguments,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;clear(t);var a=function repeatFn(){n(),start.apply(null,r)};o[t]=setTimeout(a,i)},clear:clear}},146:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(125),c=r.n(a),l=r(129),u=r(127),p=r(21);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function renderFeatures(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.features,a=r.removeOnComplete;return i.a.isEmpty(o)?null:c.a.createElement("div",{className:n},i.a.map(o,(function(t,n){var r=!!t._last;return(c.a.createElement(f,{key:n,feature:t,isLastFeature:r,removeOnComplete:a}))})))}var f=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(EmbeddedFeature,t);var n=_createSuper(EmbeddedFeature);function EmbeddedFeature(){return _classCallCheck(this,EmbeddedFeature),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(EmbeddedFeature,[{key:"render",value:function render(){var t=this;return(c.a.createElement("div",{ref:function ref(n){return t.el=n}}))}},{key:"componentDidMount",value:function componentDidMount(){var t=this.props,n=t.feature,r=t.baseActions,o=t.isLastFeature,i=t.removeOnComplete;r.legacyRenderEmbeddedFeature({feature:n,isLastFeature:o,removeOnComplete:i,el:this.el})}}]),EmbeddedFeature}(c.a.Component);f=u.b(null,(function(t){return{baseActions:l.b(p.a,t)}}))(f),n.a={VerticalFeatures:function VerticalFeatures(t){return renderFeatures(t,"lrn_stimulus_features_vertical")},OverlayFeatures:function OverlayFeatures(t){return renderFeatures(t,"lrn_stimulus_features_overlay",{removeOnComplete:!0})}}},147:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=function filterUnfocusableElements(t){return i.a.filter(t,(function(t){return!i.a.isNull(t)&&!t.disabled&&t.offsetWidth>0&&t.offsetHeight>0}))},c={left:function left(t){if(t){t=a(t);var n=this.getFocusedElement(t).index;n?n>0&&t[n-1].focus():t[t.length-1].focus()}},top:function top(t){t=a(t);var n=this.getFocusedElement(t).element;if(n){var r=n.getBoundingClientRect(),o=i.a.findLastIndex(t,(function(t){var n=t.getBoundingClientRect();if(n.top<r.top&&n.left<=r.left)return!0}));o>=0&&t[o].focus()}},right:function right(t){t=a(t);var n=this.getFocusedElement(t).index;t&&!1!==n&&(n===t.length-1?t[0].focus():n<t.length-1&&t[n+1].focus())},bottom:function bottom(t){t=a(t);var n=this.getFocusedElement(t).element;if(n){var r=n.getBoundingClientRect(),o=i.a.findIndex(t,(function(t){var n=t.getBoundingClientRect();if(n.top>r.top&&n.left>=r.left)return!0}));o>=0&&t[o].focus()}},getFocusedElement:function getFocusedElement(t){var n=document.activeElement,r=t.indexOf(n);return r<0?{}:{element:n,index:r}}};n.a=c},149:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(126),c=r.n(a),l=r(125),u=r.n(l),p=r(127),f=r(146),d=r(160),h=r(7),y=r(161);function ownKeys(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,o)}return r}function _objectSpread(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(r),!0).forEach((function(n){_defineProperty(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}var g={XSMALL:{className:"lrn-xs",minWidth:0},SMALL:{className:"lrn-sm",minWidth:481},MEDIUM:{className:"lrn-md",minWidth:801},LARGE:{className:"lrn-lg",minWidth:1200}};function ResponsiveWidget(t){if(!t.responsive)return t.children;return u.a.createElement(y.a.Detector,{onChange:function onSizeChange(n){var r=i.a.chain(g).filter((function(t){return t.minWidth<=n.width})).pluck("className").value().join(" ");t.onChange&&t.onChange(_objectSpread(_objectSpread({},n),{},{responsiveClassName:r}))}},t.children)}var v=function applyResponsiveWidgetLayout(t){var n;t.state=i.a.extend({},t.state,{dimensions:{width:0,height:0},layoutMode:"split"}),t.render=function(){var r=t.baseClassName,o=t.state,a=t.props.base,c=a.responseId,l=a.widgetLayout,p=function getLayoutData(t,n){if("stack"===t){return{layoutClassName:"",elements:i.a.map(n,(function(t){return{type:t.type,width:"",paddingLeft:"",paddingRight:""}}))}}return{layoutClassName:"clearfix",elements:n}}(o.layoutMode,l.elements),f=p.elements,d=p.layoutClassName;return n||(n=i.a.findWhere(l.elements,{type:"interaction"})),u.a.createElement(y.a.Detector,{onChange:function onChange(r){return function onComponentResize(t,n,r){var o,i=n.width,a=t.state.layoutMode,c=(o=r.width||50,i*o/100<400?"stack":"split");c!==a&&t.setState({layoutMode:c})}(t,r,n)}},u.a.createElement("div",{id:c,className:"".concat(r," ").concat(d)},t.getInstructorStimulus(),i.a.map(f,(function(n,r){return u.a.createElement(y.a.Column,_extends({key:r},n),function getChildComponent(n){return"stimulus"===n?t.getStimulus():t.getQuestionContent()}(n.type))}))))}};function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function baseQuestion_extends(){return(baseQuestion_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?_assertThisInitialized(t):n}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function baseQuestion_defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var m=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(BaseQuestion,t);var n=_createSuper(BaseQuestion);function BaseQuestion(t){var r;return function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,BaseQuestion),baseQuestion_defineProperty(_assertThisInitialized(r=n.call(this,t)),"state",{}),baseQuestion_defineProperty(_assertThisInitialized(r),"onSizeChange",(function(t){var n=t.responsiveClassName;r.setState({responsiveClassName:n})})),i.a.getNested(t,"base.widgetLayout.enabled")&&v(_assertThisInitialized(r)),r}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(BaseQuestion,[{key:"render",value:function render(){var t=this.baseClassName,n=this.props.base.responseId;return u.a.createElement(ResponsiveWidget,{responsive:this.props.responsive,onChange:this.onSizeChange},u.a.createElement("div",{id:n,className:t},this.getInstructorStimulus(),this.getStimulus(),this.getQuestionContent()))}},{key:"getQuestionContent",value:function getQuestionContent(){var t=this.props,n=t.base,r=t.children,o=n.stimulus,a=n.extraClassNames||{},c={responseWrapper:"lrn_response_wrapper ",response:"lrn_response lrn_clearfix "},l=i.a.getNested(n,"__legacyAttributes.extraClassNames")||{};return l.lrn_response_wrapper&&(c.responseWrapper+=l.lrn_response_wrapper),l.lrn_response&&(c.response+=l.lrn_response),c.responseWrapper+=a.responseWrapper||"",c.response+=a.response||"",u.a.createElement("div",{className:c.responseWrapper},u.a.createElement(f.a.OverlayFeatures,{features:o.legacyOverlayFeatures}),u.a.createElement("div",{className:c.response},r))}},{key:"getStimulus",value:function getStimulus(){var t=this.props.base,n=t.stimulus,r=t.stimulusReview,o=t.isReviewState,i=t.responseId,a=o&&r.visible?r:n;return u.a.createElement(d.a.Stimulus,baseQuestion_extends({},a,{responseId:i}))}},{key:"getInstructorStimulus",value:function getInstructorStimulus(){var t=this.props.base.stimulusInstructor;return(u.a.createElement(d.a.InstructorStimulus,t))}},{key:"baseClassName",get:function get(){var t=this.props.base,n=t.questionType,r=t.fontSizeClass,o=t.inMaskingState;return c()({"lrn-masking":o,"lrn-ie":"ie"===h.a.browser,"lrn-ios":h.a.isIOS},r,this.state.responsiveClassName,"lrn lrn_widget lrn_qr lrn_clearfix lrn_".concat(n," ").concat(r))}}]),BaseQuestion}(u.a.Component);m=p.b((function(t){return{base:t.base}}),null)(m);n.a=m},150:function(t,n,r){"use strict";var o=r(1),i=r.n(o),a=r(0),c=r.n(a),l=(r(53),document),u=i()("body");function unwatch(t){l.unbindLeave&&l.unbindLeave(t)}n.a={watch:function watch(t,n){u.find(t).length&&l.leave&&l.leave(t,c.a.debounce((function(){u.find(t).length||(n(),unwatch(t))}),10))},unwatch:unwatch}},151:function(t,n,r){"use strict";r.d(n,"a",(function(){return i}));var o=r(125);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var i=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(Wrapper,t);var n=_createSuper(Wrapper);function Wrapper(){return _classCallCheck(this,Wrapper),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(Wrapper,[{key:"render",value:function render(){return this.props.children}}]),Wrapper}(r.n(o).a.PureComponent)},154:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(5),c=r.n(a),l=r(125),u=r.n(l),p=r(128),f=r.n(p),d=r(129),h=r(127),y=r(202),g=r(54),v=r(21),m=r(56),b=r(31),O=r(38),E=r(39),C=r(150),S=r(155),P=r(151);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function _unsupportedIterableToArray(t,n){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,n)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=t[r];return o}var R=c.a.View.extend({initialize:function initialize(){var t=this;this._responseId=this.model.get("response_id"),this.activity=this.options.activity,this.remove=this.remove.bind(this),this.initialisationCompleted=this.initialisationCompleted.bind(this);var n=this.getDataService();this.addFacadeMethods(this.getFacade()),n.prepare((function(){t.setLegacyAttributes(),t.render(),t.initialisationCompleted(),C.a.watch('[id="'.concat(t._responseId,'"]'),t.remove)}))},update:function update(){var t=this,n=this.getDataService(),r=this.getStore(),o=i.a.extend({},n.getInitialState()),a=this.widgetInstance;a&&i.a.isFunction(a.reset)&&a.reset(),r.dispatch({type:"UPDATE_ALL",payload:{data:o}}),this.prepareStoreState(),this.setLegacyAttributes();var c=v.a.renderMathIfRequired({success:function success(){t.onMathRendered()}});r.dispatch(c)},getDataService:function getDataService(){if(!this._dataService){var t=this.DataService;this._dataService=new t(this.model,this.getFacade())}return this._dataService},getStore:function getStore(){if(!this._store){var t=this.getDataService(),n=this.getReducers(),r=this.getMiddleware();i.a.each(n,(function(t,n){var r=t.setName;r&&r(n)})),this._store=Object(d.d)(Object(d.c)(n),t.getInitialState(),Object(S.a)(d.a.apply(void 0,_toConsumableArray(r)))),this.prepareStoreState()}return this._store},getMiddleware:function getMiddleware(){var t=this;return[y.a.withExtraArgument(this.getThunkServices()),function legacyMiddleWare(n){return function(n){return function(r){return r.type===v.a.actionTypes.QUESTION_LEGACY_BEGIN_RESPONSE&&t.beginResponse(),n(r)}}}]},getThunkServices:function getThunkServices(){var t=this;return{dataService:this.getDataService().getFacade(),mathService:this.getMathService(),simplefeatureService:{render:function renderViewSimpleFeatures(){return t.options.services.renderViewSimpleFeatures(t)}}}},getReducers:function getReducers(){return{base:g.a}},render:function render(){if(this.component)try{this.el&&f.a.unmountComponentAtNode(this.el)}catch(t){}else{var t=document.createElement("div");this.$el.replaceWith(t),this.setElement(t),this.$el.attr("data-lrn-widget-container",this._responseId).attr("data-lrn-widget-type","question")}return this.renderComponent()},renderComponent:function renderComponent(){var t=this,n=this.getStore(),r=this.ViewComponent,o=!0===this.forwardRef?u.a.createElement(r,{ref:function ref(n){return t.widgetInstance=n}}):u.a.createElement(r,null);return new Promise((function(r){f.a.render(u.a.createElement(P.a,{ref:function ref(n){return t.component=n}},u.a.createElement(h.a,{store:n},o)),t.el,r)}))},remove:function remove(){if(!this._removed){try{var t=f.a.findDOMNode(this.component);t&&!this.$el.find(t).length&&this.$el.append(t),this.el&&(this._unmounted=f.a.unmountComponentAtNode(this.el))}catch(t){}c.a.View.prototype.remove.call(this),C.a.unwatch('[id="'.concat(this._responseId,'"]')),this._removed=!0}},renderSimpleFeatures:function renderSimpleFeatures(t){return O.a.renderSimpleFeatures.call(this,this.$el,this.activity,t)},initialisationCompleted:function initialisationCompleted(){var t=this.getMathService(),n=this.options.mathRenderPromise;t.mathquillRendering()&&(n=t.renderMathquill()),n&&n.then(this.onMathRendered.bind(this)),this.imageLoader=new E.a({element:this.el}),this.imageLoader.loadImages(),this.options.initialisationCallback&&i.a.defer(this.options.initialisationCallback)},prepareStoreState:function prepareStoreState(){},getFacade:function getFacade(){if(i.a.isUndefined(this.questionFacade)){var t=new m.a(this).facade;this.questionFacade=t}return this.questionFacade},addFacadeMethods:function addFacadeMethods(t){},getMathService:function getMathService(){return i.a.isUndefined(this._mathService)&&(this._mathService=new b.a(this,"question")),this._mathService},setLegacyAttributes:function setLegacyAttributes(){var t=this.__legacyAttributes,n=v.a.setLegacyAttributes(t);this.getStore().dispatch(n)},onMathRendered:function onMathRendered(){var t=this.cacheRenderedMath.bind(this);this.getStore().dispatch(v.a.notifyMathRendered({cacheRenderedMath:t}))},cacheRenderedMath:function cacheRenderedMath(t){t&&this.getStore().dispatch(v.a.cacheRenderedMath({mathInResponse:t}))},setDisabled:function setDisabled(t){var n=this.activity.get("state"),r=this.activity.STATE,o=[r.INITIAL,r.RESUME],a=this.getStore().getState().base.disabled;return!(!i.a.contains(o,n)||a===t)&&(t?this.undelegateEvents():this.delegateEvents(),this.getStore().dispatch(v.a.setDisabled(t)),!0)},beginResponse:function beginResponse(){},pauseResponse:function pauseResponse(){},stopResponse:function stopResponse(){},masking:function masking(t,n){this.getStore().dispatch(v.a.setMaskingState(t,n))},reset:function reset(){this.getFacade().trigger("reset")}});n.a=R},155:function(t,n,r){"use strict";var o;o=function composeWithDevTools(t){return t},n.a=o},158:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(178);function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var c=function(){function ShuffleService(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,ShuffleService),this.model=t,this.options=r,t.ready?this.initialize(t,r):t.once(t.EVENT.READY,(function(){n.initialize(t,r)}))}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(ShuffleService,[{key:"initialize",value:function initialize(t,n){var r=this;if(delete this.optionOrder,delete this._canShuffleOnDemand,this._getQuestion().shuffle_options){var o=n.key,a=n.shuffleOptions,c=n.mapValueRequired;if(i.a.isUndefined(o))return void(this._canShuffleOnDemand=!0);t.get("isDynamicContent")&&t.on("dynamicContent:changed",(function(){r._setShuffledOrder(o,a)})),this._setShuffledOrder(o,a),c&&this._attachShuffledOptionsMapHandler()}}},{key:"reInitialize",value:function reInitialize(){this.initialize(this.model,this.options)}},{key:"get",value:function get(t){return t=t||this.options.key,this.optionOrder?this._reOrderOptions(t,this.optionOrder):i.a.clone(i.a.getNested(this._getQuestion(),t))}},{key:"getDynamicSeed",value:function getDynamicSeed(){var t=this.model,n=t.get("response_id");return t.get("isDynamicContent")?"".concat(n,"_dynamic_").concat(t.get("dynamicContentRowId")):n}},{key:"getOrderedData",value:function getOrderedData(t){return this._canShuffleOnDemand&&!i.a.isEmpty(t)?this._shuffleArrayOnDemand(t):t}},{key:"mapShuffledOptionsValue",value:function mapShuffledOptionsValue(t,n){return i.a.isArray(t)&&i.a.isArray(n)&&n.length===t.length?i.a.map(n,(function(r,o){var i=t.indexOf(o);return n[i]})):n}},{key:"mapValueBasedOnOptionOrder",value:function mapValueBasedOnOptionOrder(t){var n=this.optionOrder;return i.a.isArray(n)&&i.a.isArray(t)&&t.length===n.length?i.a.map(n,(function(n){return t[n]})):t}},{key:"_getQuestion",value:function _getQuestion(){return this.model.get("question")}},{key:"_attachShuffledOptionsMapHandler",value:function _attachShuffledOptionsMapHandler(){var t=this,n=this.question,r=this.options,o=this.model,a=r.key,c=r.mapShuffledOptionsValue||this.mapShuffledOptionsValue,l=i.a.getNested(n,a),u="review"===i.a.getNested(o,"activityOptions.state");o.updateResponseValue=i.a.wrap(o.updateResponseValue,(function(n,r,i){u||(r=c(t.optionOrder,r,l)),n.call(o,r,i)})),o.getResponseValue=i.a.wrap(o.getResponseValue,(function(n){return t.mapValueBasedOnOptionOrder(n.call(o))})),o.mapValidationMetadataToResponseState=i.a.wrap(o.mapValidationMetadataToResponseState,(function(n,r){return r.metadata=t.mapValueBasedOnOptionOrder(r.metadata),n.call(o,r)}));var p=o.getScorer();p&&(p.suggestedResponse=i.a.wrap(p.suggestedResponse,(function(n){var r=n.call(p);return r&&r.value?i.a.extend({},r,{value:t.mapValueBasedOnOptionOrder(r.value)}):r})),p.validateIndividualResponses=i.a.wrap(p.validateIndividualResponses,(function(n){return t.mapValueBasedOnOptionOrder(n.call(p))})))}},{key:"_setShuffledOrder",value:function _setShuffledOrder(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.model;r.hasResponse()&&r.get("response").order?this.optionOrder=this.get("response").order:this.optionOrder=this._getShuffleOrder(this._getOptionsToShuffle(t),n)}},{key:"_shuffleArrayOnDemand",value:function _shuffleArrayOnDemand(t){var n=this._getShuffleOrder(t),r=i.a.clone(t);return i.a.map(n,(function(t){return r[t]}))}},{key:"_getShuffleOrder",value:function _getShuffleOrder(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.a.range(t.length);return Object(a.a)({exclusions:n.exclude,questionMetadata:this.model.getMetadata(),originalOrder:r,seed:this.getDynamicSeed()})}},{key:"_getOptionsToShuffle",value:function _getOptionsToShuffle(t){return i.a.getNested(this._getQuestion(),t)}},{key:"_reOrderOptions",value:function _reOrderOptions(t,n){var r=this;return i.a.map(n,(function(n){return r._getOptionsToShuffle(t)[n]}))}}]),ShuffleService}();n.a=c},160:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(146),c=r(125),l=r.n(c);n.a={Stimulus:function Stimulus(t){if(!t.visible)return null;var n=t.responseId;return l.a.createElement("div",{className:"lrn_question"},l.a.createElement("div",{className:"lrn_stimulus lrn_clearfix"},l.a.createElement("div",{className:"lrn_stimulus_content lrn_clearfix",dangerouslySetInnerHTML:{__html:t.content},id:"stimulus-".concat(n)}),function renderLegacyVerticalFeatures(){var n=t.legacyVerticalFeatures,r=t.legacyEvents,o=t.i18n;if(!i.a.isEmpty(n))return l.a.createElement(a.a.VerticalFeatures,{features:n,i18n:o,events:r})}()))},InstructorStimulus:function InstructorStimulus(t){return t.visible?l.a.createElement("div",{className:"lrn_question"},l.a.createElement("div",{className:"lrn-instructor-stimulus"},l.a.createElement("div",{className:"lrn_clearfix"},l.a.createElement("div",{className:"lrn-instructor-stimulus-content",dangerouslySetInnerHTML:{__html:t.content}})))):null}}},161:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(40),c=r.n(a),l=r(125),u=r.n(l),p=r(128),f=r.n(p),d=r(24);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?_assertThisInitialized(t):n}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(Detector,t);var n=_createSuper(Detector);function Detector(t){var r;return function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,Detector),function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}(_assertThisInitialized(r=n.call(this,t)),"onWrapperSizeChange",i.a.debounce((function(){var t=_assertThisInitialized(r),n=t.onChange,o=t.el;n&&o&&!r._unmounted&&n({width:o.offsetWidth,height:o.offsetHeight})}),400)),i.a.isFunction(t.onChange)&&(r.onChange=t.onChange),r}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(Detector,[{key:"componentDidMount",value:function componentDidMount(){var t=this;this.el=f.a.findDOMNode(this),this.resizeSensor=Object(d.a)(this.el,(function(){return new c.a(t.el,t.onWrapperSizeChange)})),this.onWrapperSizeChange()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._unmounted=!0,this.resizeSensor.detach(this.onWrapperSizeChange),this.el=null}},{key:"render",value:function render(){var t=this.props.children;return u.a.Children.only(t)}}]),Detector}(u.a.PureComponent);n.a={Detector:h,Column:function Column(t){var n=function(t){var n=function formatValue(t){return t?"".concat(t,"%"):""},r=t.width,o=t.paddingLeft,i=t.paddingRight;return{width:n(r),paddingLeft:n(o),paddingRight:n(i),float:r?"left":""}}(t);return(u.a.createElement("div",{style:n},t.children))}}},163:function(t,n,r){"use strict";r.d(n,"a",(function(){return getTabbableDescendants}));var o=r(0),i=r(130);function isFocusable(t){var n=t.nodeName.toLowerCase(),r=!t.disabled,a=Object(o.contains)(["a","button","input","select","textarea","object"],n)&&r,c=t.getAttribute("tabindex"),l=Object(o.isNumber)(c)&&c>=0;return i.a.isElementVisible(t)&&(a||l)}function getTabbableDescendants(t){return[].slice.call(t.querySelectorAll("*"),0).filter(isFocusable)}},178:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(190),c=r.n(a),l=r(18),u=function ShuffledArray(t,n){this.unshuffled=t,this.seed=n||ShuffledArray.generateSeed(),this.value=ShuffledArray.shuffle(this.unshuffled,this.seed)};u.create=function(t,n){return new u(t,n)},u.generateSeed=function(){return l.a.v4()},u.shuffle=function(t,n){var r,o,i,a,l;for(u.validate(t,n),r=t.slice(0),o=t.length,l=new c.a(n);o;)a=Math.floor(l()*o),i=r[o-=1],r[o]=r[a],r[a]=i;return r},u.validate=function(t,n){if(!i.a.isArray(t))throw new Error("ShuffledArray: must have an array as a first argument, but was: "+JSON.stringify(t));if(!i.a.isString(n))throw new Error("ShuffledArray: seed must be a string, but was: "+JSON.stringify(n));if(!n.length)throw new Error("ShuffledArray: seed must have a length, but was: "+JSON.stringify(n))};var p=u;function shuffleOrder(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.exclusions||[],r=p.shuffle(t.originalOrder,t.seed),o=i.a.range(20).map((function(t){return t.toString()})),a=r,c=t.seed,l=1,u=0;l<=20&&orderIsAnExclusion(a,n);)c+=o[u],a=p.shuffle(t.originalOrder,c),l++,u++;return orderIsAnExclusion(a,n)&&(a=r),a}function orderIsAnExclusion(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return i.a.any(n,(function(n){return i.a.isEqual(t,n)}))}n.a=function shuffleOrderWithQuestionSeed(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.exclusions,r=t.questionMetadata,o=void 0===r?{}:r,i=t.originalOrder,a=o.response_shuffle_seed||t.seed;return shuffleOrder({exclusions:n,originalOrder:i,seed:a})}},179:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(154),c=r(23),l=r(57),u=r(14);n.a=a.a.extend({initialize:function initialize(){var t=this,n=this.model;this.listenTo(n,n.EVENT.CALLVALIDATE,(function(n){t.callValidate(n)})),a.a.prototype.initialize.apply(this,arguments)},getReducers:function getReducers(){var t=a.a.prototype.getReducers.apply(this,arguments);return i.a.extend(t,{validatable:l.a})},callValidate:function callValidate(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.model.canValidateResponse()){var n=this.getDataService(),r=!(!t.showCorrectAnswer&&!t.showCorrectAnswers),o=n.canShowGlobalValidationUI,a=i.a.isBoolean(t.feedbackAttempts)?t.feedbackAttempts:!!t.feedback_attempts,l=i.a.isUndefined(t.showDistractorRationale)?n.showDistractorRationale:Object(u.g)(t.showDistractorRationale);this.getStore().dispatch(c.a.checkAnswer({canShowCorrectAnswers:r,canShowGlobalValidationUI:o,showDistractorRationale:l,shouldValidateUnattempedResponse:r,skipAttemptCountLimit:!a}))}},setLegacyAttributes:function setLegacyAttributes(){var t=this.__legacyAttributes,n=c.a.setLegacyAttributes(t);a.a.prototype.setLegacyAttributes.call(this),this.getStore().dispatch(n)}})},180:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(125),c=r.n(a),l=r(129),u=r(127),p=r(134),f=r(23);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?_assertThisInitialized(t):n}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(AriaLiveRegion,t);var n=_createSuper(AriaLiveRegion);function AriaLiveRegion(t){var r;!function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,AriaLiveRegion),function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}(_assertThisInitialized(r=n.call(this,t)),"reset",(function(){r.props.validatableActions.clearValidationAriaLive(),document.removeEventListener("focusin",r.reset),r._focusEventAdded=!1}));var o=t.contentFunctions;return r.contentFunctions=i.a.extend({},p.a.ariaContentFunctions,o),r}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(AriaLiveRegion,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(t){this.shouldBeVisible(t)&&!this._focusEventAdded&&(document.addEventListener("focusin",this.reset),this._focusEventAdded=!0)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._focusEventAdded=!1,document.removeEventListener("focusin",this.reset)}},{key:"render",value:function render(){var t=this.shouldBeVisible(this.props);return(c.a.createElement("div",{className:"lrn-accessibility-arialive","aria-live":"assertive","aria-atomic":"true"},t&&this.buildContent()))}},{key:"shouldBeVisible",value:function shouldBeVisible(t){var n=t.base,r=t.validatable,o=n.isReviewState,i=r.ariaLive;return!o&&i.visible}},{key:"buildContent",value:function buildContent(){var t=this.props.validatable,n=this.props.base.i18n.labels.ariaLiveText,r=t.ariaLive,o=this.contentFunctions,i=o.globalText,a=o.correctText,c=o.incorrectText,l=o.suggestedResponsesText,u=[],p=function appendText(t){t&&u.push(t)};return p(i(t.validationState,n)),r.message?p(r.message):(p(a(r.correct,n)),p(c(r.incorrect,n)),p(n.selected),p(l(r.suggestedResponses,r.correct,n))),u.join(". ")}}]),AriaLiveRegion}(c.a.Component);d=u.b((function(t){return{base:t.base,validatable:t.validatable}}),(function(t){return{validatableActions:{clearValidationAriaLive:l.b(f.a.clearValidationAriaLive,t)}}}))(d),n.a={AriaLiveRegion:d,ScreenReaderAriaText:function ScreenReaderAriaText(t){var n=t.data;return n.visible?c.a.createElement("span",{className:"lrn-accessibility-label"},n.label):null},GlobalValidationLabel:function GlobalValidationLabel(t){var n=t.label;return(c.a.createElement("div",{className:"sr-only"},n))}}},183:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(125),c=r.n(a),l=r(129),u=r(127),p=r(21),f=r(23),d=r(149),h=r(180),y=r(196),g=r(126),v=r.n(g),m=r(17),b=r.n(m),O=r(142),E=r(14),C=r(2);function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?_assertThisInitialized(t):n}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function shouldBeVisible(t,n,r,o){if(i.a.isNull(r)){if("review"===o&&t!==E.e&&t!==E.d&&i.a.isEmpty(n))return!0;if(!i.a.isNull(n)&&!i.a.isEmpty(n)){var a=i.a.filter(n,(function(t){return!1===t})).length;if(t===E.e)return 0===a;if(t===E.f)return a>0}}return t===E.c||t===r}var S=function(t){_inherits(DistractorRationalePerQuestion,t);var n=_createSuper(DistractorRationalePerQuestion);function DistractorRationalePerQuestion(){return _classCallCheck(this,DistractorRationalePerQuestion),n.apply(this,arguments)}return _createClass(DistractorRationalePerQuestion,[{key:"componentDidMount",value:function componentDidMount(){this.visible()&&this.props.onVisible()}},{key:"render",value:function render(){var t=this.props,n=t.html,r=t.perQuestionlabel;return this.visible()?c.a.createElement("div",{className:"lrn_distractor_rationale_per_question",dangerouslySetInnerHTML:{__html:b.a.sanitizeHTML(n)},"aria-label":r}):null}},{key:"visible",value:function visible(){var t=this.props,n=t.html,r=t.showDistractorRationalePerQuestion,o=t.validatedResponses,i=t.validationState,a=t.viewState;return n&&shouldBeVisible(r,o,i,a)}}]),DistractorRationalePerQuestion}(c.a.Component),P=function(t){_inherits(DistractorRationalePerResponseList,t);var n=_createSuper(DistractorRationalePerResponseList);function DistractorRationalePerResponseList(){return _classCallCheck(this,DistractorRationalePerResponseList),n.apply(this,arguments)}return _createClass(DistractorRationalePerResponseList,[{key:"componentDidMount",value:function componentDidMount(){this.visible()&&this.props.onVisible()}},{key:"render",value:function render(){var t=v()("lrn_distractor_rationale_list",this.props.className),n=this.props,r=n.items,o=n.title,i=n.ariaLabel,a=n.validationStemNumeration;return this.visible()?c.a.createElement("div",{className:t,"aria-label":i},c.a.createElement("div",{className:"lrn_distractor_rationale_list_title"},o),r.map((function(t){return c.a.createElement("div",{key:t.index,className:"lrn_distractor_rationale"},c.a.createElement("div",{className:"lrn_validation_stem_numeration"},Object(O.a)(a,t.index)),c.a.createElement("div",{className:"lrn_distractor_rationale_content",dangerouslySetInnerHTML:{__html:b.a.sanitizeHTML(t.metadata)}}))}))):null}},{key:"visible",value:function visible(){var t=this.props,n=t.items,r=t.showDistractorRationalePerResponse,o=t.validatedResponses,i=t.validationState;return n.length&&shouldBeVisible(r,o,i)}}]),DistractorRationalePerResponseList}(c.a.Component),R=function(t){_inherits(DistractorRationale,t);var n=_createSuper(DistractorRationale);function DistractorRationale(){var t;_classCallCheck(this,DistractorRationale);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(o))),"onDistractorComponentsVisible",i.a.debounce((function(){t.props.baseActions.renderMathIfRequired()}),100)),t}return _createClass(DistractorRationale,[{key:"render",value:function render(){var t=this.props,n=t.validatable,r=t.base,o=n.questionLevelDistractorRationale,a=n.responseLevelDistractorRationale,l=n.showDistractorRationale,u=n.validationState,p=n.validatedResponses,f=n.validationStemNumeration,d=[C.QUESTION_TYPES.MCQ,C.QUESTION_TYPES.CLOZEASSOCIATION,C.QUESTION_TYPES.CLOZEDROPDOWN,C.QUESTION_TYPES.CLOZETEXT];if(!("review"===r.state||p&&i.a.contains(d,r.questionType)))return null;var h=Object(E.h)(a,E.f),y=Object(E.h)(a,E.e),g=r.i18n.labels,v=g.distractorRationale,m=g.ariaLabel;return c.a.createElement("div",{className:"lrn_distractor_rationale_wrapper",role:"region","aria-label":m.distractorRationale.distractorRationale},c.a.createElement(S,{html:o,showDistractorRationalePerQuestion:l.perQuestion,validatedResponses:p,validationState:u,viewState:r.state,perQuestionlabel:m.distractorRationale.perQuestion,onVisible:this.onDistractorComponentsVisible}),c.a.createElement(P,{className:"lrn_distractor_rationale_incorrect",items:h,showDistractorRationalePerResponse:l.perResponse,title:v.incorrectTitle,validatedResponses:p,validationState:"incorrect",validationStemNumeration:f,ariaLabel:m.distractorRationale.perResponseIncorrect,onVisible:this.onDistractorComponentsVisible}),c.a.createElement(P,{className:"lrn_distractor_rationale_correct",items:y,showDistractorRationalePerResponse:l.perResponse,title:v.correctTitle,validatedResponses:p,validationState:"correct",validationStemNumeration:f,ariaLabel:m.distractorRationale.perResponseCorrect,onVisible:this.onDistractorComponentsVisible}))}}]),DistractorRationale}(c.a.Component),T=r(186),w=r(134);var A={validation:function validation(t){return i.a.contains(["correct","incorrect"],t)?"lrn_".concat(t):""}};function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function validatable_typeof(t){return(validatable_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function validatable_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function validatable_defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function validatable_setPrototypeOf(t,n){return(validatable_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function validatable_createSuper(t){var n=function validatable_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=validatable_getPrototypeOf(t);if(n){var i=validatable_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return validatable_possibleConstructorReturn(this,r)}}function validatable_possibleConstructorReturn(t,n){return!n||"object"!==validatable_typeof(n)&&"function"!=typeof n?validatable_assertThisInitialized(t):n}function validatable_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function validatable_getPrototypeOf(t){return(validatable_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function validatable_defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var D=u.b((function(t){return{base:t.base,validatable:t.validatable}}),(function(t){return{validatableActions:l.b({checkAnswer:f.a.checkAnswer},t)}}))(y.a),I=u.b((function(t){return{base:t.base,validatable:t.validatable}}),(function(t){return{baseActions:l.b(p.a,t)}}))(R),x=u.b((function(t){return{base:t.base,validatable:t.validatable}}),(function(t){return{baseActions:l.b(p.a,t)}}))(T.b),N={responseInput:{className:"lrn_response_input"},hasSuggestedAnswersList:!1},z=function(t){!function validatable_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&validatable_setPrototypeOf(t,n)}(ValidatableQuestion,t);var n=validatable_createSuper(ValidatableQuestion);function ValidatableQuestion(){var t;validatable_classCallCheck(this,ValidatableQuestion);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return validatable_defineProperty(validatable_assertThisInitialized(t=n.call.apply(n,[this].concat(o))),"validatedEventCount",0),t}return function validatable_createClass(t,n,r){return n&&validatable_defineProperties(t.prototype,n),r&&validatable_defineProperties(t,r),t}(ValidatableQuestion,[{key:"render",value:function render(){var t=this.props,n=t.children,r=t.validatable,o=t.base.i18n.labels.ariaLiveText,i=r.validationState,a=w.a.getGlobalAccessibility(i,o);return c.a.createElement(d.a,null,c.a.createElement(h.a.AriaLiveRegion,null),c.a.createElement(h.a.GlobalValidationLabel,{label:a.label}),n,c.a.createElement(D,null),c.a.createElement(I,null))}},{key:"componentDidUpdate",value:function componentDidUpdate(){var t=this.props,n=t.baseActions,r=t.validatable,o=r.validatedEventRequestCount,a=r.validatedResponses;i.a.isEmpty(a)||o===this.validatedEventCount||n.triggerEvent("validated"),this.validatedEventCount=o}}]),ValidatableQuestion}(c.a.Component);function ResponseInput(t){var n=t.validatable.validationState,r=i.a.extend({},N,t.options),o=r.className,a=r.style,l=A.validation(n);return c.a.createElement("div",{className:"".concat(o," ").concat(l),style:a},t.children)}z=u.b((function(t){return{base:t.base,validatable:t.validatable}}),(function(t){return{baseActions:l.b(p.a,t)}}))(z);n.a={ResponseInput:ResponseInput,CheckAnswerButton:D,SuggestedAnswersList:x,DistractorRationale:I,ValidatableQuestion:z,ValidatableQuestionWithOptionalResponseInput:function ValidatableQuestionWithOptionalResponseInput(t){var n=i.a.extend({},N,t.options),r=i.a.getNested(t,"validatable.__legacyAttributes.willRenderOwnResponseInput");return c.a.createElement(z,t,c.a.createElement("div",{className:"lrn-response-validation-wrapper"},r&&t.children||c.a.createElement(ResponseInput,_extends({},t,{options:n.responseInput}),t.children)),n.hasSuggestedAnswersList&&c.a.createElement(x,null))}}},184:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(1),c=r.n(a),l=r(5),u=r.n(l),p=r(50);function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var f=p.a.isPointerEventsSupported(),d=p.a.isTouchDevice(),h=!!p.a.isPassiveEventListenersSupported()&&{passive:!0},y=function(){function TouchClickObserver(t){var n=this;!function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,TouchClickObserver),_defineProperty(this,"ignoreClickEventsBeforeTime",0),_defineProperty(this,"initialX",-10),_defineProperty(this,"initialY",-10),_defineProperty(this,"listeners",new Set),_defineProperty(this,"touchMoveThreshold",10),_defineProperty(this,"treatTouchEndAsClick",!0),_defineProperty(this,"onClick",(function(t){0===t.button&&((0===t.clientX&&0===t.clientY||t.timeStamp>=n.ignoreClickEventsBeforeTime)&&n.dispatchEvent(t),n.ignoreClickEventsBeforeTime=0)})),_defineProperty(this,"onPointerUp",(function(t){0===t.button&&(n.ignoreClickEventsBeforeTime=t.timeStamp+100,n.dispatchEvent(t))})),_defineProperty(this,"onTouchStart",(function(t){if(1===t.touches.length){var r=t.touches[0];n.initialX=r.clientX,n.initialY=r.clientY,n.touchMoveThreshold=function getTouchMoveThreshold(){return 10/function estimateZoomFactor(){return document.documentElement.clientWidth/window.innerWidth||1}()}(),n.treatTouchEndAsClick=!0}else n.treatTouchEndAsClick=!1})),_defineProperty(this,"onTouchMove",(function(t){if(n.treatTouchEndAsClick&&1===t.touches.length){var r=t.touches[0],o=Math.abs(n.initialX-r.clientX),i=Math.abs(n.initialY-r.clientY);(o>=n.touchMoveThreshold||i>=n.touchMoveThreshold)&&(n.treatTouchEndAsClick=!1)}})),_defineProperty(this,"onTouchEnd",(function(t){0===t.touches.length&&(n.treatTouchEndAsClick&&(n.ignoreClickEventsBeforeTime=t.timeStamp+2500,n.dispatchEvent(t)),n.initialX=-10,n.initialY=-10,n.treatTouchEndAsClick=!0)})),this.eventTarget=t}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(TouchClickObserver,[{key:"addListener",value:function addListener(t){0===this.listeners.size&&this.startListening(),this.listeners.add(t)}},{key:"removeListener",value:function removeListener(t){this.listeners.delete(t),0===this.listeners.size&&this.stopListening()}},{key:"removeAllListeners",value:function removeAllListeners(){this.listeners.clear(),this.stopListening()}},{key:"dispatchEvent",value:function dispatchEvent(t){var n=this;this.listeners.forEach((function(r){return r.call(n.eventTarget,t)}))}},{key:"startListening",value:function startListening(){f?this.eventTarget.addEventListener("pointerup",this.onPointerUp):d&&(this.eventTarget.addEventListener("touchstart",this.onTouchStart,h),this.eventTarget.addEventListener("touchmove",this.onTouchMove,h),this.eventTarget.addEventListener("touchend",this.onTouchEnd,h)),this.eventTarget.addEventListener("click",this.onClick)}},{key:"stopListening",value:function stopListening(){f?this.eventTarget.removeEventListener("pointerup",this.onPointerUp):d&&(this.eventTarget.removeEventListener("touchstart",this.onTouchStart),this.eventTarget.removeEventListener("touchmove",this.onTouchMove),this.eventTarget.removeEventListener("touchend",this.onTouchEnd)),this.eventTarget.removeEventListener("click",this.onClick)}}]),TouchClickObserver}();var g=i.a.extend({EVENTS:{CLICK_OR_TAP:"click:element",FOCUS_VIA_KEYBOARD:"focus:element"},documentTouchClick:new y(document),isListening:!1,startListening:function startListening(){return this.isListening||(this.isListening=!0,this.addClickOrTapEventHandler(),this.addFocusViaKeyboardEventHandler()),this},stopListening:function stopListening(){return this.isListening&&(this.isListening=!1,this.removeClickOrTapEventHandler(),this.removeFocusViaKeyboardEventHandler()),this},addClickOrTapEventHandler:function addClickOrTapEventHandler(){var t=this;this.documentTouchClick.addListener((function(n){t.trigger(t.EVENTS.CLICK_OR_TAP,n.target)}))},removeClickOrTapEventHandler:function removeClickOrTapEventHandler(){this.documentTouchClick.removeAllListeners()},addFocusViaKeyboardEventHandler:function addFocusViaKeyboardEventHandler(){var t=this;c()(document).on("keydown.lrn.domEvents",(function(n){9===n.keyCode&&i.a.defer((function(){t.trigger(t.EVENTS.FOCUS_VIA_KEYBOARD,document.activeElement)}))}))},removeFocusViaKeyboardEventHandler:function removeFocusViaKeyboardEventHandler(){c()(document).off("keydown.lrn.domEvents")}},u.a.Events);n.a=g},185:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(125),c=r.n(a),l=r(128),u=r.n(l),p=r(163);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(ModalPortal,t);var n=_createSuper(ModalPortal);function ModalPortal(){return _classCallCheck(this,ModalPortal),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(ModalPortal,[{key:"componentDidUpdate",value:function componentDidUpdate(t){var n=this.props,r=n.isOpen,o=n.afterRender;!t.isOpen&&r&&o&&o(this)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._unmounted=!0}},{key:"render",value:function render(){var t=this.props,n=t.children,r=t.lazyRendering,o=t.isOpen;return r&&!o?null:c.a.Children.only(n)}},{key:"focus",value:function focus(){var t=this.node,n=t&&Object(p.a)(t);n&&n.length&&n[0].focus()}},{key:"node",get:function get(){return this._unmounted?null:u.a.findDOMNode(this)}}]),ModalPortal}(c.a.Component),d=r(195),h=r(139),y=r(198);function floatingModal_typeof(t){return(floatingModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function floatingModal_defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function floatingModal_setPrototypeOf(t,n){return(floatingModal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function floatingModal_createSuper(t){var n=function floatingModal_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=floatingModal_getPrototypeOf(t);if(n){var i=floatingModal_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return floatingModal_possibleConstructorReturn(this,r)}}function floatingModal_possibleConstructorReturn(t,n){return!n||"object"!==floatingModal_typeof(n)&&"function"!=typeof n?floatingModal_assertThisInitialized(t):n}function floatingModal_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function floatingModal_getPrototypeOf(t){return(floatingModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function getNode(t,n){var r=null;return i.a.isFunction(t)?r=t():i.a.isString(t)&&(r=document.querySelector(t)),r||n||document.body}var g=function(t){!function floatingModal_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&floatingModal_setPrototypeOf(t,n)}(FloatingModal,t);var n=floatingModal_createSuper(FloatingModal);function FloatingModal(t){var r;return function floatingModal_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,FloatingModal),_defineProperty(floatingModal_assertThisInitialized(r=n.call(this,t)),"state",{fadingOut:!1}),_defineProperty(floatingModal_assertThisInitialized(r),"onDocumentKeyDown",(function(t){var n=t.keyCode;if(9===n)Object(d.a)(r.node,t);else if(27===n){var o=r.props.onRequestClose;i.a.isFunction(o)&&o()}})),_defineProperty(floatingModal_assertThisInitialized(r),"updatePortalPosition",(function(t){var n,o=floatingModal_assertThisInitialized(r),i=o.props,a=o.node,c=o.relativeNode,l=i.animation,u=i.afterRender;if(i.shouldUpdatePosition&&c){var p=a.style;p.left=0,p.top=0,n=h.a.relativeToElement(c,t.node,{centerAlign:r.props.centerAlign}),p.left="".concat(n.left,"px"),p.top="".concat(n.top,"px")}u&&u(a,t.node,n&&n.position),!0!==i.preventFocusWhenAppear&&(l&&l.enter?l.enter(a,(function(){t.focus()})):t.focus())})),r.prepareDOMNode(t),r}return function floatingModal_createClass(t,n,r){return n&&floatingModal_defineProperties(t.prototype,n),r&&floatingModal_defineProperties(t,r),t}(FloatingModal,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(t){var n=this,r=this.props,o=r.isOpen,i=r.animation,a=this.parentNode,c=getNode(t.parentNode,t.defaultNode);if(this.relativeNode=getNode(t.relativeNode),c!==a&&(this.removePortal(),this.prepareDOMNode(t),this.appendPortal(t)),i&&o&&!t.isOpen){var l=i.leave;l&&(this.setState({fadingOut:!0}),l(this.node,(function(){n._unmounted||(n.setState({fadingOut:!1}),n.processEvents(t))})))}else this.node.style.display="",this.processEvents(t)}},{key:"componentDidMount",value:function componentDidMount(){this.appendPortal(this.props)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._unmounted=!0,document.removeEventListener("keydown",this.onDocumentKeyDown),this.removePortal()}},{key:"prepareDOMNode",value:function prepareDOMNode(t){var n=t.className,r=document.createElement("div"),o=r.style;n&&(r.className=n),o.position="absolute",o.top=0,o.left=0,this.node=r}},{key:"processEvents",value:function processEvents(t){var n=t.isOpen;t.onRequestClose&&(n&&!this._documentEventsAdded?(document.addEventListener("keydown",this.onDocumentKeyDown),this._documentEventsAdded=!0):n||(document.removeEventListener("keydown",this.onDocumentKeyDown),this._documentEventsAdded=!1))}},{key:"appendPortal",value:function appendPortal(t){var n=t.parentNode,r=t.defaultNode;this.parentNode=getNode(n,r),this.parentNode.appendChild(this.node)}},{key:"removePortal",value:function removePortal(){var t=this.node;t.parentNode&&t.parentNode.removeChild(t)}},{key:"render",value:function render(){var t=this.state,n=this.props,r=this.node;return(u.a.createPortal(c.a.createElement(f,_extends({},n,{lazyRendering:!i.a.isBoolean(n.lazyRendering)||n.lazyRendering,isOpen:t.fadingOut||n.isOpen,afterRender:this.updatePortalPosition})),r))}}]),FloatingModal}(c.a.Component);_defineProperty(g,"defaultProps",{shouldUpdatePosition:!0,centerAlign:!0});n.a=Object(y.a)(g,"defaultNode")},186:function(t,n,r){"use strict";r.d(n,"a",(function(){return ResponseIndex}));var o=r(0),i=r.n(o),a=r(125),c=r.n(a),l=r(142);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ResponseIndex(t){var n=t.index,r=t.validationStemNumeration;return(c.a.createElement("span",{className:"lrn_responseIndex"},Object(l.a)(r,n)))}var u=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(SuggestedAnswersList,t);var n=_createSuper(SuggestedAnswersList);function SuggestedAnswersList(){return _classCallCheck(this,SuggestedAnswersList),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(SuggestedAnswersList,[{key:"componentDidUpdate",value:function componentDidUpdate(){this.shouldBeVisible()&&this.props.baseActions.renderMathIfRequired()}},{key:"render",value:function render(){var t=this.props,n=t.base,r=t.customListItems,o=n.i18n.labels;if(this.shouldBeVisible()){var a=this.isSingleAnswer,l=this.buildListItems,u=a?o.correctAnswer:o.correctAnswers,p=a?"lrn_single_correct_answer":"",f=(r||l).call(this);return i.a.isEmpty(f)?null:c.a.createElement("div",{className:"lrn_correctAnswers"},c.a.createElement("span",null,u,":"),c.a.createElement("ul",{className:"lrn_correctAnswerList ".concat(p)},f))}return null}},{key:"buildNestedResponseItem",value:function buildNestedResponseItem(t){var n=this,r=t.value,o=t.index;return i.a.isEmpty(r)?null:c.a.createElement("li",{key:o},this.getResponseIndex(o),r.length>1&&c.a.createElement("ul",{className:"lrn_nestedCorrectAnswers"},i.a.map(r,(function(t,r){return c.a.createElement("li",{key:r},n.getResponseText(t,r))}))),1===r.length&&this.getResponseText(r[0]))}},{key:"buildListItems",value:function buildListItems(){var t=this,n=this.props.validatable.suggestedResponses;return this.isSingleAnswer?this.buildResponseItem({label:n.value},0):i.a.map(n.value,(function(n,r){if(i.a.isArray(n.value))return t.buildNestedResponseItem(n);var o=i.a.isNumber(n.index)?n.index:r;return t.buildResponseItem(n,o)}))}},{key:"buildResponseItem",value:function buildResponseItem(t,n){return c.a.createElement("li",{key:n},this.getResponseIndex(n),this.getResponseText(t))}},{key:"getResponseIndex",value:function getResponseIndex(t){var n=this.props.validatable.validationStemNumeration;return(c.a.createElement(ResponseIndex,{index:t,validationStemNumeration:n}))}},{key:"getResponseText",value:function getResponseText(t,n){return c.a.createElement("div",{key:n,className:"lrn_responseText",dangerouslySetInnerHTML:{__html:t.label}})}},{key:"shouldBeVisible",value:function shouldBeVisible(){var t=this.props.validatable,n=t.isShowingCorrectAnswers,r=t.suggestedResponses,o=t.validationState;return!(!n||"correct"===o||!r)}},{key:"isSingleAnswer",get:function get(){var t=this.props.validatable.suggestedResponses;return!i.a.isArray(t.value)}}]),SuggestedAnswersList}(c.a.Component);n.b=u},187:function(t,n,r){"use strict";r.d(n,"a",(function(){return fadeIn})),r.d(n,"b",(function(){return fadeOut}));var o=r(1),i=r.n(o);function fadeIn(t,n){i()(t).hide().fadeIn({complete:n})}function fadeOut(t,n){i()(t).fadeOut({complete:n})}},190:function(t,n,r){var o;void 0===(o=function(){"use strict";return function(t){var n=window,r=Math.pow(256,6),o=Math.pow(2,52),i=2*o;function ARC4(t){var n,r=t.length,o=this,i=0,a=o.i=o.j=0,c=o.S=[];for(r||(t=[r++]);i<256;)c[i]=i++;for(i=0;i<256;i++)c[i]=c[a=255&a+t[i%r]+(n=c[i])],c[a]=n;(o.g=function(t){for(var n,r=0,i=o.i,a=o.j,c=o.S;t--;)n=c[i=255&i+1],r=256*r+c[255&(c[i]=c[a=255&a+n])+(c[a]=n)];return o.i=i,o.j=a,r})(256)}function copy(t,n){return n.i=t.i,n.j=t.j,n.S=t.S.slice(),n}function mixkey(t,n){for(var r,o=t+"",i=0;i<o.length;)n[255&i]=255&(r^=19*n[255&i])+o.charCodeAt(i++);return tostring(n)}function tostring(t){return String.fromCharCode.apply(0,t)}return mixkey(Math.random(),t),function seedrandom(a,c,l){var u,p,f,d=[];return u=mixkey(function flatten(t,n){var r,o=[],i=typeof t;if(n&&"object"==i)for(r in t)try{o.push(flatten(t[r],n-1))}catch(t){}return o.length?o:"string"==i?t:t+"\0"}((c=1==c?{entropy:!0}:c||{}).entropy?[a,tostring(t)]:null==a?function autoseed(){var r,o,i;try{return r=new Uint8Array(256),(n.crypto||n.msCrypto).getRandomValues(r),tostring(r)}catch(r){return o=n.navigator,i=o&&o.plugins,[+new Date,n,i,n.screen,tostring(t)]}}():a,3),d),p=new ARC4(d),(f=function(){for(var t=p.g(6),n=r,a=0;t<o;)t=256*(t+a),n*=256,a=p.g(1);for(;t>=i;)t/=2,n/=2,a>>>=1;return(t+a)/n}).int32=function(){return 0|p.g(4)},f.quick=function(){return p.g(4)/4294967296},f.double=f,mixkey(tostring(p.S),t),(c.pass||l||function(t,n,r,o){if(!o)return t;o.S&&copy(o,p),t.state=function(){return copy(p,{})}})(f,u,"global"in c?c.global:this==Math,c.state)}}([])}.call(n,r,n,t))||(t.exports=o)},194:function(t,n,r){"use strict";var o=r(1),i=r.n(o),a=r(0),c=r.n(a),l=r(125),u=r.n(l),p=r(128),f=r.n(p),d=r(185),h=r(147),y=r(133),g=r(187);function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?_assertThisInitialized(t):n}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var v=function(t){_inherits(CharacterMapModal,t);var n=_createSuper(CharacterMapModal);function CharacterMapModal(){var t;_classCallCheck(this,CharacterMapModal);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(o))),"buttons",[]),_defineProperty(_assertThisInitialized(t),"requestToClose",(function(){var n=t.props.onRequestClose;n&&n()})),_defineProperty(_assertThisInitialized(t),"onDocumentKeyDown",(function(n){var r=_assertThisInitialized(t).buttons,o=n.keyCode;Object(y.b)(o)&&(n.preventDefault(),n.stopPropagation(),o===y.a.LEFT?h.a.left(r):o===y.a.UP?h.a.top(r):o===y.a.RIGHT?h.a.right(r):o===y.a.DOWN&&h.a.bottom(r))})),_defineProperty(_assertThisInitialized(t),"onCharacterButtonClick",(function(n){var r=t.props,o=r.onSelect,i=r.characters,a=n.currentTarget.dataset.characterBtnIndex;o&&o(i[a])})),t}return _createClass(CharacterMapModal,[{key:"render",value:function render(){var t=this,n=this.props,r=n.ariaLabel,o=n.title,i=n.modalIsOpen,a=n.characters,l=n.relativeNode,p=n.onRequestClose,f=n.className;return u.a.createElement(d.a,{isOpen:i,onRequestClose:p,relativeNode:l,className:"lrn lrn_widget lrn_charactermap_wrapper ".concat(f||""),animation:{enter:g.a,leave:g.b}},u.a.createElement("div",{className:"lrn_bubble lrn_charactermap","aria-label":r},u.a.createElement("div",{className:"lrn_charactermap_title"},o),c.a.map(a,(function(n,r){return u.a.createElement("button",{key:r,className:"lrn_btn_grid lrn_characterbutton",type:"button",unselectable:"on",tabIndex:"0","data-character-btn-index":r,onClick:t.onCharacterButtonClick,ref:function ref(n){return t.buttons.push(n)}},n)}))))}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(){this.buttons=[]}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.removeAllEvents()}},{key:"componentDidUpdate",value:function componentDidUpdate(){var t=this.props.modalIsOpen;t&&!this._documentEventsAdded?(document.addEventListener("click",this.requestToClose),document.addEventListener("keydown",this.onDocumentKeyDown,!0),this._documentEventsAdded=!0):t||(this.removeAllEvents(),this._documentEventsAdded=!1)}},{key:"removeAllEvents",value:function removeAllEvents(){document.removeEventListener("click",this.requestToClose),document.removeEventListener("keydown",this.onDocumentKeyDown,!0)}}]),CharacterMapModal}(u.a.Component),m=function(t){_inherits(CharacterMapButton,t);var n=_createSuper(CharacterMapButton);function CharacterMapButton(t){var r;return _classCallCheck(this,CharacterMapButton),_defineProperty(_assertThisInitialized(r=n.call(this,t)),"closeModal",(function(){var t=r.props.recoverFocus;r._setModalIsOpen(!1),t?t():r.el.focus()})),_defineProperty(_assertThisInitialized(r),"onToggleButtonClicked",(function(t){var n=_assertThisInitialized(r),o=n.el,i=n.state,a=n.props;t.preventDefault(),t.stopPropagation(),r.toggleModal(),t.target===o&&i.modalIsOpen&&a.onSelect&&a.onSelect(null)})),_defineProperty(_assertThisInitialized(r),"toggleModal",(function(){var t=!r.state.modalIsOpen;r._setModalIsOpen(t)})),r.state={modalIsOpen:!1},r}return _createClass(CharacterMapButton,[{key:"render",value:function render(){var t=this,n=this.props,r=this.state,o=(this.toggleModal,this.closeModal),i=r.modalIsOpen,a=n.label,c=n.ariaLabel,l=n.title,p=n.disabled,f=n.characters,d=n.onSelect,h=n.onFocus,y=n.onBlur,g=n.modalClassName,m=n.onMouseEnter,b=n.onMouseLeave,O=i?"lrn_active":"",E=n.className||"";return u.a.createElement("button",{type:"button",className:"lrn_btn ".concat(E," ").concat(O),onFocus:h,onBlur:y,onMouseEnter:m,onMouseLeave:b,onClick:this.onToggleButtonClicked,title:l,ref:function ref(n){return t.el=n},disabled:p,tabIndex:n.tabIndex,"aria-label":c},a,u.a.createElement(v,{title:l,characters:f,relativeNode:function relativeNode(){return t.el},className:g,modalIsOpen:i,onSelect:d,onRequestClose:o}))}},{key:"_setModalIsOpen",value:function _setModalIsOpen(t){var n=this.props.onModalToggle;n&&n(t),this.setState({modalIsOpen:t})}}]),CharacterMapButton}(u.a.Component),b=function(t){_inherits(AnimatedCharacterMapButton,t);var n=_createSuper(AnimatedCharacterMapButton);function AnimatedCharacterMapButton(){var t;_classCallCheck(this,AnimatedCharacterMapButton);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(o))),"invalidateVisibilityState",c.a.debounce((function(){var n=_assertThisInitialized(t),r=n.$characterMapButtonEl,o=n._modalVisible,i=n._isCharacterMapButtonFocus,a=n.props.visible;a?r.stop().fadeIn():a||o||i||r.stop().fadeOut()}),100)),_defineProperty(_assertThisInitialized(t),"onCharacterMapButtonFocus",(function(){t._isCharacterMapButtonFocus=!0})),_defineProperty(_assertThisInitialized(t),"onCharacterMapButtonBlur",(function(){t._isCharacterMapButtonFocus=!1,t.invalidateVisibilityState()})),_defineProperty(_assertThisInitialized(t),"toggleModal",(function(n){var r=t.props.toggleModal;r&&r(n),t._modalVisible=n,t.invalidateVisibilityState()})),t}return _createClass(AnimatedCharacterMapButton,[{key:"componentDidMount",value:function componentDidMount(){this.$characterMapButtonEl=i()(f.a.findDOMNode(this.characterMapButton)),this.props.visible||this.$characterMapButtonEl.hide(),this.invalidateVisibilityState()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.invalidateVisibilityState()}},{key:"render",value:function render(){var t=this;return(u.a.createElement(m,_extends({},this.props,{ref:function ref(n){return t.characterMapButton=n},onFocus:this.onCharacterMapButtonFocus,onBlur:this.onCharacterMapButtonBlur,onModalToggle:this.toggleModal})))}}]),AnimatedCharacterMapButton}(u.a.Component);n.a={CharacterMapButton:m,AnimatedCharacterMapButton:b,CharacterMapModal:v}},195:function(t,n,r){"use strict";r.d(n,"a",(function(){return scopeTab}));var o=r(163);function scopeTab(t,n){var r=Object(o.a)(t);if(r.length){var i=n.shiftKey,a=r[0],c=r[r.length-1],l=a===document.activeElement&&i,u=c===document.activeElement&&!i;if(l||u||t===document.activeElement)n.preventDefault(),(i?c:a).focus()}else n.preventDefault()}},196:function(t,n,r){"use strict";var o=r(125),i=r.n(o);n.a=function CheckAnswerButton(t){var n=t.base,r=t.validatable,o=t.validatableActions;if(r.canCheckAnswer){var a=n.i18n,c=n.readOnly,l=n.disabled,u=r.canShowCorrectAnswers,p=r.canShowGlobalValidationUI,f=r.feedbackAttemptsCount,d=r.feedbackAttemptsLimit,h=a.labels.checkAnswer,y=!(!c&&!l)||0!==d&&f>=d;return i.a.createElement("button",{type:"button",className:"lrn_btn lrn_validate",disabled:y,onClick:function onClick(){o.checkAnswer({canShowCorrectAnswers:u,canShowGlobalValidationUI:p,skipAttemptCountLimit:!1})}},i.a.createElement("span",null,h))}return null}},197:function(t,n,r){"use strict";r.d(n,"c",(function(){return getClasses})),r.d(n,"b",(function(){return getAttrs})),r.d(n,"a",(function(){return DragButton}));var o=r(0),i=r.n(o),a=r(125),c=r.n(a),l=r(126),u=r.n(l),p=r(7),f=r(134);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?_assertThisInitialized(t):n}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function getClasses(t){var n=t.showDragHandler,r=t.transparent,o=t.isMath,i=t.validated;return u()({lrn_draggable:!0,lrn_btn_no_handle:!n,lrn_transparent:r,lrn_correct:!0===i,lrn_incorrect:!1===i,lrn_math_response:o})}function getAttrs(t){var n=t.disabled,r=t.isReviewState,o=t.isPreviewState,i=t.inMaskingState,a=t.response,c=n||r||o||i;return{"data-key":a.key,"data-response-index":a.index,"data-lrn-response-group":a.groupIndex,disabled:c,"aria-disabled":c,"aria-label":responseAriaLabel(a),"aria-pressed":!1,role:"button"}}function responseAriaLabel(t){var n=t.plainText,r=t.validated,o=t.spokenMath||n;return o=f.a.getAriaLabelFromAllElements(o),i.a.isBoolean(r)&&(o+=r?", correct":", incorrect"),o}function DragButton(t){var n=t.children,r=t.canDuplicateResponses,o=t.hasSiblings,i=t.mathItemRef,a=t.response;return(c.a.createElement(DragButtonWrapper,t,c.a.createElement(h,{cacheable:!r,innerHTML:a.value,mathItemRef:i}),n,o&&c.a.createElement("span",{className:"sr-only"}," ")))}function DragButtonWrapper(t){var n=t.response,r=(t.children,t.isInPossibilityList),o=n.index,i=(n.value,"lrn_btn_drag ".concat(getClasses(n))),a=getAttrs(t);return r?c.a.createElement("div",_extends({className:i,"data-index":o},a),t.children):c.a.createElement("span",_extends({className:i,"data-index":o},a),t.children)}var d=[],h=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(DragButtonContent,t);var n=_createSuper(DragButtonContent);function DragButtonContent(){var t;_classCallCheck(this,DragButtonContent);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(o))),"containerElement",null),_defineProperty(_assertThisInitialized(t),"setContainerElement",(function(n){t.containerElement=n,t.props.mathItemRef&&t.props.mathItemRef(n)})),t}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(DragButtonContent,[{key:"render",value:function render(){return c.a.createElement("span",{className:"lrn_item",dangerouslySetInnerHTML:{__html:this.props.innerHTML},ref:this.setContainerElement})}},{key:"componentDidMount",value:function componentDidMount(){"ie"!==p.a.browser&&this.applyContentFromCache()}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(t){var n=this.containerElement.querySelector(".learnosity-feature");return!(t.innerHTML===this.props.innerHTML&&!n)&&("ie"!==p.a.browser&&this.cacheContentForPendingUpdate(),!0)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.applyContentFromCache()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.cacheContentForPendingUpdate()}},{key:"applyContentFromCache",value:function applyContentFromCache(){var t=this;if(this.props.cacheable&&this.containerElement){var n=i.a.findWhere(d,{innerHTML:this.props.innerHTML});n&&(i.a.toArray(this.containerElement.childNodes).forEach((function(t){return t.parentNode.removeChild(t)})),n.childNodes.forEach((function(n){return t.containerElement.appendChild(n)})),d=i.a.without(d,n))}}},{key:"cacheContentForPendingUpdate",value:function cacheContentForPendingUpdate(){if(this.containerElement){var t={innerHTML:this.props.innerHTML,childNodes:i.a.toArray(this.containerElement.childNodes)};d.push(t),i.a.defer((function(){d=i.a.without(d,t)}))}}}]),DragButtonContent}(c.a.Component)},198:function(t,n,r){"use strict";r.d(n,"a",(function(){return c}));var o=r(125),i=r.n(o),a=r(130);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?_assertThisInitialized(t):n}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var c=function withFullscreenObserver(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fullscreenElement";return function(r){_inherits(FullScreen,r);var o=_createSuper(FullScreen);function FullScreen(){var t;_classCallCheck(this,FullScreen);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _defineProperty(_assertThisInitialized(t=o.call.apply(o,[this].concat(r))),"state",{el:null}),_defineProperty(_assertThisInitialized(t),"onFullscreen",(function(n){return t.setState({el:n})})),t}return _createClass(FullScreen,[{key:"render",value:function render(){var r=_defineProperty({},n,this.state.el);return(i.a.createElement(t,_extends({},this.props,r)))}},{key:"componentDidMount",value:function componentDidMount(){this.fullscreenObserver=a.a.fullScreen.observe(this.onFullscreen)}},{key:"componentWillUnmount",value:function componentWillUnmount(){a.a.fullScreen.unobserve(this.fullscreenObserver)}}]),FullScreen}(i.a.Component)}},203:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(178);n.a=function getOrderedListBasedOnQuestion(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;if(!n.shuffle_options)return i.a.deepClone(t);if(!i.a.isString(r))throw new Error("getOrderedListBasedOnQuestion requires a seed");return Object(a.a)({seed:r,exclusions:t,questionMetadata:n.metadata,originalOrder:t})}},204:function(t,n,r){(function(n){t.exports=function e(t,n,r){function s(i,a){if(!n[i]){if(!t[i]){if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[i]={exports:{}};t[i][0].call(l.exports,(function(n){var r=t[i][1][n];return s(r||n)}),l,l.exports,e,t,n,r)}return n[i].exports}for(var o=!1,i=0;i<r.length;i++)s(r[i]);return s}({1:[function(t,n,r){"use strict";var o={};function lookupClass(t){var n=o[t];return n?n.lastIndex=0:o[t]=n=new RegExp("(?:^|\\s)"+t+"(?:\\s|$)","g"),n}n.exports={add:function addClass(t,n){var r=t.className;r.length?lookupClass(n).test(r)||(t.className+=" "+n):t.className=n},rm:function rmClass(t,n){t.className=t.className.replace(lookupClass(n)," ").trim()}}},{}],2:[function(t,r,o){(function(n){"use strict";var o=t("contra/emitter"),i=t("crossvent"),a=t("./classes"),c=document,l=c.documentElement,u=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,p="onpropertychange"in document&&!!window.matchMedia,f=!!window.MSInputMethodContext&&!!document.documentMode;function touchy(t,r,o,a){n.navigator.pointerEnabled?i[r](t,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[o],a):n.navigator.msPointerEnabled?i[r](t,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[o],a):(i[r](t,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[o],a),i[r](t,o,a))}function whichMouseButton(t){if(void 0!==t.touches)return t.touches.length;if(void 0!==t.which&&0!==t.which)return t.which;if(void 0!==t.buttons)return t.buttons;var n=t.button;return void 0!==n?1&n?1:2&n?3:4&n?2:0:void 0}function getOffset(t){var n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{top:r.top-n.top,left:r.left-n.left}}function getElementBehindPoint(t,n,r){return c.elementFromPoint(n,r)}function never(){return!1}function always(){return!0}function getRectWidth(t){return t.width||t.right-t.left}function getRectHeight(t){return t.height||t.bottom-t.top}function getParent(t){return t.parentNode===c?null:t.parentNode}function isInput(t){return t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||function isEditable(t){return!!t&&"false"!==t.contentEditable&&("true"===t.contentEditable||isEditable(getParent(t)))}(t))}function nextEl(t){return t.nextElementSibling||function manually(){var n=t;do{n=n.nextSibling}while(n&&1!==n.nodeType);return n}()}function getCoord(t,n){var r=function getEventHost(t){return t.targetTouches&&t.targetTouches.length?t.targetTouches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t}(n),o={pageX:"clientX",pageY:"clientY"};return t in o&&!(t in r)&&o[t]in r&&(t=o[t]),r[t]}p&&(getElementBehindPoint=function(t,n,r){var o,i=t||{},a=i.className;return i.className+=" gu-hide",o=c.elementFromPoint(n,r),i.className=a,o}),r.exports=function dragula(t,n){var r,p,d,h,y,g,v,m,b,O,E,C=arguments.length;1===C&&!1===Array.isArray(t)&&(n=t,t=[]);var S,P=null,R=null,T=null,w=n||{};void 0===w.moves&&(w.moves=always),void 0===w.accepts&&(w.accepts=always),void 0===w.invalid&&(w.invalid=invalidTarget),void 0===w.containers&&(w.containers=t||[]),void 0===w.isContainer&&(w.isContainer=never),void 0===w.copy&&(w.copy=!1),void 0===w.copySortSource&&(w.copySortSource=!1),void 0===w.revertOnSpill&&(w.revertOnSpill=!1),void 0===w.removeOnSpill&&(w.removeOnSpill=!1),void 0===w.direction&&(w.direction="vertical"),void 0===w.ignoreInputTextSelection&&(w.ignoreInputTextSelection=!0),void 0===w.mirrorContainer&&(w.mirrorContainer=c.body);var A=o({containers:w.containers,start:manualStart,end:end,cancel:cancel,remove:remove,destroy:destroy,canMove:canMove,dragging:!1});return!0===w.removeOnSpill&&A.on("over",spillOver).on("out",spillOut),events(),A;function isContainer(t){return-1!==A.containers.indexOf(t)||w.isContainer(t)}function events(t){var n=t?"remove":"add";touchy(w.mirrorContainer,n,"mousedown",grab),touchy(window,n,"mouseup",release)}function eventualMovements(t){touchy(l,t?"remove":"add","mousemove",startBecauseMouseMoved)}function movements(t){var n=t?"remove":"add";i[n](l,"selectstart",preventGrabbed),i[n](l,"click",preventGrabbed)}function destroy(){events(!0),release({})}function preventGrabbed(t){S&&t.preventDefault()}function grab(t){if(g=t.clientX,v=t.clientY,1===whichMouseButton(t)&&!t.metaKey&&!t.ctrlKey){var n=t.target,r=canStart(n);if(r){S=r;var o=getOffset(r.item);h=getCoord("pageX",t)-o.left,y=getCoord("pageY",t)-o.top,eventualMovements(),"mousedown"===t.type&&(isInput(n)?n.focus():t.preventDefault()),t.stopPropagation(),"touchstart"===t.type&&t.preventDefault()}}}function startBecauseMouseMoved(t){if(S)if(0!==whichMouseButton(t)){if(void 0===t.clientX||t.clientX!==g||void 0===t.clientY||t.clientY!==v){if(w.ignoreInputTextSelection){var n=getCoord("clientX",t),r=getCoord("clientY",t);if(isInput(c.elementFromPoint(n,r)))return}var o=S;for(eventualMovements(!0),movements(),end(),start(o),R=d;R&&"none"===window.getComputedStyle(R).getPropertyValue("transform");)R=R.parentElement;R&&(T=w.transformMatrix.getInverseMatrix(R,{removeTranslation:!0})),a.add(O||d,"gu-transit"),renderMirrorImage(),drag(t)}}else release({})}function canStart(t){if(!(A.dragging&&r||isContainer(t))){for(var n=t;getParent(t)&&!1===isContainer(getParent(t));){if(w.invalid(t,n))return;if(!(t=getParent(t)))return}var o=getParent(t);if(o&&!w.invalid(t,n)&&w.moves(t,o,n,nextEl(t)))return{item:t,source:o}}}function canMove(t){return!!canStart(t)}function manualStart(t){var n=canStart(t);n&&start(n)}function start(t){isCopy(t.item,t.source)&&(O=t.item.cloneNode(!0),A.emit("cloned",O,t.item,"copy")),p=t.source,d=t.item,m=b=nextEl(t.item),A.dragging=!0,A.emit("drag",d,p)}function invalidTarget(){return!1}function end(){if(A.dragging){var t=O||d;drop(t,getParent(t))}}function ungrab(){S=!1,eventualMovements(!0),movements(!0)}function release(t){if(ungrab(),A.dragging){var n=O||d,o=getCoord("clientX",t),i=getCoord("clientY",t),a=findDropTarget(getElementBehindPoint(r,o,i),o,i);a&&(O&&w.copySortSource||!O||a!==p)?drop(n,a):w.removeOnSpill?remove():cancel()}}function drop(t,n){var r=getParent(t);O&&w.copySortSource&&n===p&&r.removeChild(d),isInitialPlacement(n)?A.emit("cancel",t,p,p):A.emit("drop",t,n,p,b),cleanup()}function remove(){if(A.dragging){var t=O||d,n=getParent(t);n&&n.removeChild(t),A.emit(O?"cancel":"remove",t,n,p),cleanup()}}function cancel(t){if(A.dragging){var n=arguments.length>0?t:w.revertOnSpill,r=O||d,o=getParent(d),i=isInitialPlacement(o);!1===i&&n&&(O?O.parentNode&&O.parentNode.removeChild(O):p.insertBefore(r,p.contains(m)?m:null)),i||n?A.emit("cancel",r,p,p):A.emit("drop",r,o,p,b),cleanup()}}function cleanup(){var t=O||d;ungrab(),removeMirrorImage(),t&&a.rm(t,"gu-transit"),E&&clearTimeout(E),A.dragging=!1,P&&A.emit("out",t,P,p),A.emit("dragend",t),p=d=O=m=b=E=P=null,R=null,T=null}function isInitialPlacement(t,n){var o;return o=void 0!==n?n:r?b:nextEl(O||d),t===p&&o===m}function findDropTarget(t,n,r){for(var o=t;o&&!accepted();)o=getParent(o);return o;function accepted(){if(!1===isContainer(o))return!1;var i=getImmediateChild(o,t),a=getReference(o,i,n,r);return!!isInitialPlacement(o,a)||w.accepts(d,o,p,a)}}function drag(t){if(r){t.preventDefault();var n=getCoord("clientX",t),o=getCoord("clientY",t),i=n-h,a=o-y;if(R&&!f){var c=R.getBoundingClientRect();i=i-c.left-c.width/2,a=a-c.top-c.height/2;var l=w.transformMatrix.transformPoint({x:i,y:a},T);i=l.x+R.scrollLeft+R.offsetWidth/2,a=l.y+R.scrollTop+R.offsetHeight/2}requestAnimationFrame((function(){if(r&&(r.style.left=i+"px",r.style.top=a+"px",u&&!R)){var t=r.getBoundingClientRect();(t.top<a-2||t.top>a+2||t.left<i-2||t.left>i+2)&&(i+=i-t.left,a+=a-t.top,r.style.left=i+"px",r.style.top=a+"px")}}));var g=O||d,v=getElementBehindPoint(r,n,o),E=findDropTarget(v,n,o);A.emit("move",g,{clientX:n,clientY:o,pageX:getCoord("pageX",t),pageY:getCoord("pageY",t)},v);var C=null!==E&&E!==P;(C||null===E)&&(function out(){P&&moved("out")}(),P=E,function over(){C&&moved("over")}());var S=getParent(g);if(E!==p||!O||w.copySortSource){var D;if(null!==getImmediateChild(E,v))D=getShadowReference(E,g,C,n,o);else{if(!0!==w.revertOnSpill||O)return void(O&&S&&S.removeChild(g));D=m,E=p}(null===D&&C||D!==g&&D!==nextEl(g))&&(b=D,E.insertBefore(g,D),A.emit("shadow",g,E,p))}else S&&S.removeChild(g)}function moved(t){A.emit(t,g,P,p)}}function spillOver(t){a.rm(t,"gu-hide")}function spillOut(t){A.dragging&&a.add(t,"gu-hide")}function renderMirrorImage(){r||(d.getBoundingClientRect(),(r=d.cloneNode(!0)).style.width=d.offsetWidth+"px",r.style.height=d.offsetHeight+"px",a.rm(r,"gu-transit"),a.add(r,"gu-mirror"),w.mirrorContainer.appendChild(r),touchy(l,"add","mousemove",drag),a.add(w.mirrorContainer,"gu-unselectable"),A.emit("cloned",r,d,"mirror"))}function removeMirrorImage(){r&&(a.rm(w.mirrorContainer,"gu-unselectable"),touchy(l,"remove","mousemove",drag),getParent(r).removeChild(r),r=null)}function getImmediateChild(t,n){for(var r=n;r!==t&&getParent(r)!==t;)r=getParent(r);return r===l?null:r}function getShadowReference(t,n,r,o,i){var a,c,l,u,p,f,d,h,y,g=t.children.length;for(a=0;a<g;a++)if(u=(l=t.children[a]).getBoundingClientRect(),p=l.getClientRects(),y=l,f=n.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_FOLLOWING,inRect(o,i,u)&&(d=p[0],h=void 0,h=n.getBoundingClientRect(),o<d.left+h.width&&i<d.top+h.height))for(c=0;c<p.length;c++)if(inRect(o,i,p[c]))return resolve(l,f);return r?null:nextEl(n);function resolve(t,n){return n?nextEl(t):t}function inRect(t,n,r){return t>r.left&&t<r.right&&n>r.top&&n<r.bottom}}function getReference(t,n,r,o){var i="horizontal"===w.direction;return n!==t?function inside(){var t=n.getBoundingClientRect();return resolve(i?r>t.left+getRectWidth(t)/2:o>t.top+getRectHeight(t)/2)}():function outside(){var n,a,c,l=t.children.length;for(n=0;n<l;n++){if(a=t.children[n],c=a.getBoundingClientRect(),i&&c.left+c.width/2>r)return a;if(!i&&c.top+c.height/2>o)return a}return null}();function resolve(t){return t?nextEl(n):n}}function isCopy(t,n){return"boolean"==typeof w.copy?w.copy:w.copy(t,n)}}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":1,"contra/emitter":4,crossvent:8}],3:[function(t,n,r){"use strict";var o=t("ticky");n.exports=function debounce(t,n,r){t&&o((function run(){t.apply(r||null,n||[])}))}},{ticky:6}],4:[function(t,n,r){"use strict";var o=t("atoa"),i=t("./debounce");n.exports=function emitter(t,n){var r=n||{},a={};return void 0===t&&(t={}),t.on=function(n,r){return a[n]?a[n].push(r):a[n]=[r],t},t.once=function(n,r){return r._once=!0,t.on(n,r),t},t.off=function(n,r){var o=arguments.length;if(1===o)delete a[n];else if(0===o)a={};else{var i=a[n];if(!i)return t;i.splice(i.indexOf(r),1)}return t},t.emit=function(){var n=o(arguments);return t.emitterSnapshot(n.shift()).apply(this,n)},t.emitterSnapshot=function(n){var c=(a[n]||[]).slice(0);return function(){var a=o(arguments),l=this||t;if("error"===n&&!1!==r.throws&&!c.length)throw 1===a.length?a[0]:a;return c.forEach((function emitter(o){r.async?i(o,a,l):o.apply(l,a),o._once&&t.off(n,o)})),t}},t}},{"./debounce":3,atoa:5}],5:[function(t,n,r){n.exports=function atoa(t,n){return Array.prototype.slice.call(t,n)}},{}],6:[function(t,n,r){var o;o="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},n.exports=o},{}],7:[function(t,r,o){(function(t){var n=t.CustomEvent;r.exports=function useNative(){try{var t=new n("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?n:"function"==typeof document.createEvent?function CustomEvent(t,n){var r=document.createEvent("CustomEvent");return n?r.initCustomEvent(t,n.bubbles,n.cancelable,n.detail):r.initCustomEvent(t,!1,!1,void 0),r}:function CustomEvent(t,n){var r=document.createEventObject();return r.type=t,n?(r.bubbles=Boolean(n.bubbles),r.cancelable=Boolean(n.cancelable),r.detail=n.detail):(r.bubbles=!1,r.cancelable=!1,r.detail=void 0),r}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,r,o){(function(n){"use strict";var o=t("custom-event"),i=t("./eventmap"),a=n.document,c=function addEventEasy(t,n,r,o){return t.addEventListener(n,r,o)},l=function removeEventEasy(t,n,r,o){return t.removeEventListener(n,r,o)},u=[];function unwrap(t,n,r){var o=function find(t,n,r){var o,i;for(o=0;o<u.length;o++)if((i=u[o]).element===t&&i.type===n&&i.fn===r)return o}(t,n,r);if(o){var i=u[o].wrapper;return u.splice(o,1),i}}n.addEventListener||(c=function addEventHard(t,r,o){return t.attachEvent("on"+r,function wrap(t,r,o){var i=unwrap(t,r,o)||function wrapperFactory(t,r,o){return function wrapper(r){var i=r||n.event;i.target=i.target||i.srcElement,i.preventDefault=i.preventDefault||function preventDefault(){i.returnValue=!1},i.stopPropagation=i.stopPropagation||function stopPropagation(){i.cancelBubble=!0},i.which=i.which||i.keyCode,o.call(t,i)}}(t,0,o);return u.push({wrapper:i,element:t,type:r,fn:o}),i}(t,r,o))},l=function removeEventHard(t,n,r){var o=unwrap(t,n,r);if(o)return t.detachEvent("on"+n,o)}),r.exports={add:c,remove:l,fabricate:function fabricateEvent(t,n,r){var c=-1===i.indexOf(n)?function makeCustomEvent(){return new o(n,{detail:r})}():function makeClassicEvent(){var t;return a.createEvent?(t=a.createEvent("Event")).initEvent(n,!0,!0):a.createEventObject&&(t=a.createEventObject()),t}();t.dispatchEvent?t.dispatchEvent(c):t.fireEvent("on"+n,c)}}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":9,"custom-event":7}],9:[function(t,r,o){(function(t){"use strict";var n=[],o="",i=/^on/;for(o in t)i.test(o)&&n.push(o.slice(2));r.exports=n}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2])(2)}).call(this,r(37))},206:function(t,n,r){"use strict";r.d(n,"d",(function(){return getSpellCheckValue})),r.d(n,"a",(function(){return getAutoCapitalizeValue})),r.d(n,"b",(function(){return getAutoCompleteValue})),r.d(n,"c",(function(){return getAutoCorrectValue}));var o=r(0),i=r.n(o);function getSpellCheckValue(t){return i.a.isBoolean(t)?t:!!i.a.isString(t)&&"true"===t}function getAutoCapitalizeValue(t){return defaultCheck(t)}function getAutoCompleteValue(t){return defaultCheck(t)}function getAutoCorrectValue(t){return defaultCheck(t)}function defaultCheck(t){return i.a.isString(t)?"true"===t?"on":"off":i.a.isBoolean(t)&&t?"on":"off"}},208:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(5),c=r.n(a),l=r(1),u=r.n(l),p=r(204),f=r.n(p);function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function _unsupportedIterableToArray(t,n){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(t,n)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=t[r];return o}function Behaviour(t){i()(this).extend(t),this.initialize()}i.a.extend(Behaviour.prototype,c.a.Events,{remove:function remove(){this.stopListening()}}),Behaviour.extend=c.a.Model.extend,Behaviour.Collection=function(t,n){var r=this;this._behaviours={},i.a.each(t,(function(t,o){t.prototype.active.call(n)&&(r._behaviours[o]=new t(n))}))},i.a.extend(Behaviour.Collection.prototype,c.a.Events,{aggregate:function aggregate(t){var n={},r=Array.prototype.slice.call(arguments,1);return i.a.each(this._behaviours,(function(o){i.a.isFunction(o[t])&&i.a.extend(n,o[t].apply(o,r))})),n},prioritise:function prioritise(t,n){var r=this,o=Array.prototype.slice.call(arguments,2),a=this._behaviours[i.a.find(n,(function(n){return r._behaviours[n]&&r._behaviours[n][t]}))];return a&&a[t].apply(a,o)},callAll:function callAll(t){var n,r=Array.prototype.slice.call(arguments,1);(n=i()(this._behaviours)).invoke.apply(n,[t].concat(_toConsumableArray(r)))},callIfActive:function callIfActive(t,n){var r=this._behaviours[t],o=Array.prototype.slice.call(arguments,2);if(r&&i.a.isFunction(r[n]))return r[n].apply(r,o)},has:function has(t){return!!this._behaviours[t]}});var d=Behaviour,h=d.extend({active:function active(){var t=this.opts;return i.a.isNumber(t.maxItems)&&t.maxItems>0},initialize:function initialize(){this.handleMaxItems()},handleMaxItems:function handleMaxItems(){var t=this,n=this.pub;this.listenTo(n,n.EVENT.CHANGED,(function(n,r,o){t.shouldRemoveItems(r)&&t.removeOtherItems(n,r,o)}))},draggablesInZone:function draggablesInZone(t){return u()(t).find(this.prv.$draggables).get()},shouldRemoveItems:function shouldRemoveItems(t){var n=this.opts;return this.spacesLeft(t)<0&&(n.enforceMaxItemsInOrigin||!this.isOriginalDragZone(t))},isOriginalDragZone:function isOriginalDragZone(t){return!this.prv.$dropzones.is(t)},spacesLeft:function spacesLeft(t){return this.opts.maxItems-this.draggablesInZone(t).length},removeOtherItems:function removeOtherItems(t,n,r){var o=this,a=this.draggablesInZone(n);i.a.each(a,(function(n,i){n!==t&&a.length>o.opts.maxItems&&(o.moveItemAway(n,r),a.splice(i,1))}))},moveItemAway:function moveItemAway(t,n){var r=this.prv,o=this.prv.behaviours.prioritise("returnItemTo",["duplicateItems","groupingResponses","maxItems"],t,n),i=t.parentElement;o?o.appendChild(t):(this.prv.$draggables=this.prv.$draggables.not(t),i.removeChild(t)),r.trigger(r.EVENT.MOVED_ITEM_AWAY,t,i)},returnItemTo:function returnItemTo(t,n){var r=this.opts;return r.enforceMaxItemsInOrigin?n:r.origin||!1}}),y=d.extend({active:function active(){return this.opts.copy&&this.opts.origin},initialize:function initialize(){this.listenTo(this.prv,this.prv.EVENT.APPENDED_ITEM,this.onAppend)},isInOrigin:function isInOrigin(t){return this.opts.origin.contains(t)},onAppend:function onAppend(t,n){var r=this.prv;n&&(this.removeIfReturnedToOrigin(t,n),r.$draggables=r.$draggables.not(t),n.contains(t)&&(r.$draggables=r.$draggables.add(t)))},removeIfReturnedToOrigin:function removeIfReturnedToOrigin(t,n){this.isInOrigin(n)&&(this.prv.$draggables=this.prv.$draggables.not(t),u()(t).remove())},returnItemTo:function returnItemTo(){return!1}}),g=r(11),v=d.extend({active:function active(){return this.opts.preventMathjaxDuplication},initialize:function initialize(){var t=this.pub;this.listenTo(t,t.EVENT.CLONED,this.onClone)},onClone:function onClone(t){g.a.isInitalised()&&t.querySelector(".MathJax")&&g.a.preventReRender(t)}}),m=r(184);function getDraggableAttributes(t){if(!i.a.exists(t))return{};var n=i.a.chain(t.attributes).pick("aria-disabled","aria-label","aria-pressed","data-index","data-key","data-response-index").mapObject((function(t,n){return i.a.exists(t.value)?t.value:null})).mapObject((function(t,n){return"true"===t||"false"!==t&&t})).mapObject((function(t,n){return"data-index"===n||"data-response-index"===n?parseInt(t):t})).value();return{ariaDisabled:n["aria-disabled"],ariaLabel:n["aria-label"],ariaPressed:n["aria-pressed"],index:n["data-index"],key:n["data-key"],responseIndex:n["data-response-index"]}}function getContainerIndex(t){var n=u()(t).closest(".lrn_dropzone");return n.length?parseInt(n.data("index")):-1}var b=d.extend({EVENT:{MOVE_FOCUS_WITH_ARROW_KEY:"move-focus-with-arrow-key"},NAMESPACES:{INTERACTION:".interaction",ACTIVE:".active"},KEYS:{TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},IGNORE_SELECTORS:".lrn_widget.lrn_feature:not(.lrn_scrollablepassage)",DRAG_ABORT_WINDOW:200,activeItem:null,active:function active(){return this.opts.keyboardAndClickInteraction},initialize:function initialize(){var t=this.prv;this.draggableClass=i.a.uniqueId("lrn-dragdrop-group-"),this.listenToOnce(t,t.EVENT.INITIALIZED,this.onDragdropInitialized)},onDragdropInitialized:function onDragdropInitialized(){var t=this.pub;this.setupDraggables(),this.setupInteraction(),this.activateAfterShortDrag(),this.listenTo(t,t.EVENT.ACTIVATED_ITEM,this.onItemActivation),this.listenTo(t,t.EVENT.DEACTIVATED_ITEM,this.onItemDeactivation),this.listenTo(t,t.EVENT.SET_DISABLED,this.onSetDisabled),this.listenTo(t,t.EVENT.CHANGED,this.onChange),this.listenTo(t,t.EVENT.CLEAR,this.deactivateActiveItem),this.listenTo(t,t.EVENT.CLONED,this.onClone),this.listenTo(t,t.EVENT.AUTO_MOVE,this.autoMove),this.listenTo(t,t.EVENT.CHANGE_DRAGGABLES,this.setupDraggables),this.on(this.EVENT.MOVE_FOCUS_WITH_ARROW_KEY,this.onMoveFocusWithArrowKey)},onChange:function onChange(t){var n=this.prv;this.isKeyboard&&(n.$origin.find(n.$draggables.get()).get(0)||t).focus()},onClone:function onClone(t,n,r){"copy"===r&&u()(n).data("clone",t)},namespace:function namespace(t,n){return t.replace(/\s/g,"."+n+" ")},activateAfterShortDrag:function activateAfterShortDrag(){var t,n=this.pub,r={};function isShortAbortedDrag(t,n,o){return n===o&&r.source===o&&r.start+this.DRAG_ABORT_WINDOW>Date.now()}this.listenTo(n,n.EVENT.DRAG_START,(function(n,o){r.activeItem=this.activeItem,r.start=Date.now(),r.source=o,r.el=n,t=!1})),this.listenTo(n,n.EVENT.DRAG_CANCEL,(function(){isShortAbortedDrag.apply(this,arguments)&&(t=!0)})),this.listenTo(n,n.EVENT.DRAG_END,(function(){t&&(r.activeItem&&r.activeItem!==this.activeItem&&this.activateItem(r.activeItem),this.hitItem(r.el))}))},setupDraggables:function setupDraggables(){this.prv.$draggables.addClass(this.draggableClass).attr("tabindex",0)},autoMove:function autoMove(t,n,r){var o=this.prv,i=t&&t.parentNode;o.canAccept(t,n,i)&&(this.activateItem(t),this.appendActiveToZone(n),r&&this.activateItem(t))},setupInteraction:function setupInteraction(){var t=this.prv,n=this.pub,r=n.uid+this.NAMESPACES.INTERACTION,o=this.namespace("keydown ",r),i=this.namespace("keyup ",r),a=this.namespace("focus ",r);t.$container.on(o,this.onContainerKeyDown.bind(this)).on(i,this.onContainerKeyUp.bind(this)).on(a,".".concat(n.CLASS.ACTIVE),this.onContainerFocus.bind(this)),t.$draggables.addClass(this.draggableClass),m.a.startListening(),this.listenTo(m.a,m.a.EVENTS.CLICK_OR_TAP,this.onActivateElement)},onContainerFocus:function onContainerFocus(){this.keyFocusDirection&&(this.moveFocus(this.keyFocusDirection),this.keyFocusDirection=!1)},onContainerKeyDown:function onContainerKeyDown(t){var n=this.isArrowKeyEvent(t);n&&(this.keyFocusDirection=this.getKeyFocusDirection(t)),(n||this.isSpacebarKeyEvent(t))&&t.preventDefault()},onContainerKeyUp:function onContainerKeyUp(t){this.isToggleKeyEvent(t)?(this.isKeyboard=!0,this.onActivateElement(t.target),this.isKeyboard=!1):this.isArrowKeyEvent(t)?(t.stopPropagation(),this.trigger(this.EVENT.MOVE_FOCUS_WITH_ARROW_KEY,this.getKeyFocusDirection(t))):this.isEscapeKeyEvent(t)&&this.deactivateActiveItem()},onActivateElement:function onActivateElement(t){var n=this.prv,r=u()(t);if(!(n.isDragging()||r.closest(this.IGNORE_SELECTORS).length>0)){var o=r.closest(n.$draggables);o.length>0?this.hitItem(o.get(0)):n.$zones.is(t)&&this.hitZone(t),n.$origin.is(t)&&this.hitOrigin(t)}},onMoveFocusWithArrowKey:function onMoveFocusWithArrowKey(t){var n=this.prv.behaviours,r=this.activeItem;n.has("list")&&document.activeElement===r?(this.keyFocusDirection=!1,n.callIfActive("list","moveActive",r,this.getNextByDir(t,r)[0])):this.moveFocus(t)},remove:function remove(){var t=this.prv;this.deactivateActiveItem(),this.stopListening(),this.off(),t.$container.add(t.$origin).off("."+this.pub.uid).find("."+this.draggableClass).removeClass(this.draggableClass),this.lastHitItem=null},onItemActivation:function onItemActivation(t){this.deactivateActiveItem(),t.focus(),this.applyTabindex(t),this.listenForDomEvents()},onItemDeactivation:function onItemDeactivation(t){var n=this.prv,r=this.pub,o=u()(t);n.$zones.removeAttr("tabindex"),n.$origin.removeAttr("tabindex"),o.data("clone")&&(o=o.add(o.data("clone")).removeData("clone")),o.removeClass(r.CLASS.ACTIVE),u()(document).add(this.opts.zones).add(this.opts.origin).off("."+r.uid+this.NAMESPACES.ACTIVE)},onSetDisabled:function onSetDisabled(t,n){t&&(n?this.deactivateItem(n):this.deactivateActiveItem())},applyTabindex:function applyTabindex(t){var n=this.prv,r=this.opts,o=n.$origin;o.is(r.zones)||n.behaviours.has("groupingResponses")?(n.$dropzones.filter(":empty, .lrn-dragdrop-empty").attr("tabindex",0),o.find(t).length||o.attr("tabindex",0)):n.$zones.filter(":empty, .lrn-dragdrop-empty").attr("tabindex",0)},listenForDomEvents:function listenForDomEvents(){var t=this,n=this.prv,r=this.pub,o=r.uid+this.NAMESPACES.ACTIVE,i=n.$container.find("."+r.CLASS.IGNORE_TAP);function contains(t,n){return t.is(n)||t.find(n).length>0}n.$zones.add(n.$origin).on(this.namespace("mouseenter ",o),(function(t){n.isDragging()||r.trigger(r.EVENT.OVER_DROP_ZONE,t.currentTarget)})).on(this.namespace("mouseleave ",o),(function(t){n.isDragging()||r.trigger(r.EVENT.LEFT_DROP_ZONE,t.currentTarget)})),n.$origin.on("focus."+o,(function(t){t.currentTarget.classList.add(r.CLASS.OVER)})).on("blur."+o,(function(t){t.currentTarget.classList.remove(r.CLASS.OVER)})),m.a.startListening(),this.listenToOnce(m.a,m.a.EVENTS.CLICK_OR_TAP,(function(r){contains(u()(t.lastHitItem),r)||contains(i,r)||contains(n.$zones,r)||t.deactivateActiveItem()}))},hitOrigin:function hitOrigin(){this.prv.trigger(this.prv.EVENT.HIT_ORIGIN,this.activeItem)},hitZone:function hitZone(t){this.appendActiveToZone(t)},appendActiveToZone:function appendActiveToZone(t){var n,r=this.prv,o=this.activeItem,i=o&&o.parentNode;o&&r.canAccept(o,t,i)&&(n=u()(o).data("clone")||o,this.deactivateItem(o,{isBeingAppendedToNewZone:t!==i}),t.contains(o)||(t.appendChild(n),r.triggerAppendEvents(n,t,i)))},hitItem:function hitItem(t){var n=this.prv;this.activeItem?(this.activeItem!==t&&n.behaviours.prioritise("hitSecondItem",["list","keyboardMouseInteraction"],t,this.activeItem),this.deactivateActiveItem()):(this.activateItem(t),this.lastHitItem=t)},hitSecondItem:function hitSecondItem(t){this.appendActiveToZone(t.parentNode)},getKeyFocusDirection:function getKeyFocusDirection(t){var n=this.KEYS;return t.which===n.DOWN||t.which===n.RIGHT?1:t.which===n.UP||t.which===n.LEFT?-1:void 0},moveFocus:function moveFocus(t){this.getNextByDir(t,document.activeElement).focus()},getNextByDir:function getNextByDir(t,n){var r=this.prv.$container.find("[tabindex=0]"),o=r.index(n)+t;return r.eq(o%r.length)},isArrowKeyEvent:function isArrowKeyEvent(t){var n=this.KEYS;return[n.LEFT,n.UP,n.RIGHT,n.DOWN].indexOf(t.which)>=0},isEscapeKeyEvent:function isEscapeKeyEvent(t){return t.which===this.KEYS.ESC},isSpacebarKeyEvent:function isSpacebarKeyEvent(t){return t.which===this.KEYS.SPACE},isToggleKeyEvent:function isToggleKeyEvent(t){return t.which===this.KEYS.ENTER||t.which===this.KEYS.SPACE},isActive:function isActive(t){return t===this.activeItem},activateItem:function activateItem(t){var n=this.pub,r=this.prv;if(this.deactivateActiveItem(),r.drake.canMove(t)){var o=i()(getDraggableAttributes(t)).assign({containerIndex:getContainerIndex(t),isActive:!0});t.classList.add(n.CLASS.ACTIVE),n.trigger(n.EVENT.ACTIVATED_ITEM,t,o),n.trigger(n.EVENT.CLONED,t.cloneNode(!0),t,r.canCopy(t,t.parentNode)?"copy":"invisible"),this.activeItem=t}},deactivateActiveItem:function deactivateActiveItem(){this.activeItem&&this.deactivateItem(this.activeItem)},deactivateItem:function deactivateItem(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isBeingAppendedToNewZone:!1};if(this.activeItem){var r=this.pub,o=i()(getDraggableAttributes(t)).assign({dropzoneIndex:getContainerIndex(t),isActive:!1});o.isBeingAppendedToNewZone=n.isBeingAppendedToNewZone,t.classList.remove(r.CLASS.ACTIVE),r.trigger(r.EVENT.DEACTIVATED_ITEM,t,o),this.activeItem=null}}}),O=d.extend({active:function active(){return this.opts.applyAriaAttributes},initialize:function initialize(){this.listenToOnce(this.prv,this.prv.EVENT.INITIALIZED,this.onDragdropInitialized)},onDragdropInitialized:function onDragdropInitialized(){var t=this.pub;this.prv.$zones;this.setupDraggables(),this.listenTo(t,t.EVENT.ACTIVATED_ITEM,(function(t){t.setAttribute("aria-pressed",!0)})),this.listenTo(t,t.EVENT.DEACTIVATED_ITEM,(function(t){t.setAttribute("aria-pressed",!1)}))},setupDraggables:function setupDraggables(){this.prv.$draggables.attr("aria-pressed",!1)},disabledProps:function disabledProps(t){return{"aria-disabled":t}}}),E=d.extend({active:function active(){return this.opts.applyOverHighlightDropzoneClasses},initialize:function initialize(){var t=this.prv;this.listenToOnce(t,t.EVENT.INITIALIZED,this.onDragdropInitialized),this.opts.origin&&this.listenTo(t,t.EVENT.NOTIFY_CUSTOM_DROP,this.setOriginOver)},onDragdropInitialized:function onDragdropInitialized(){var t=this.pub,n=this.prv,r=n.$dropzones,o=t.CLASS;r.addClass(o.DROPZONE),this.listenTo(t,t.EVENT.ACTIVATED_ITEM,(function(){r.filter((function(t,n){return!n.hasAttribute("disabled")})).addClass(o.HIGHLIGHT)})),this.listenTo(t,t.EVENT.CLONED,(function(t){this.mirror=t})),this.listenTo(t,t.EVENT.DEACTIVATED_ITEM,(function(){n.$zones.removeClass(o.HIGHLIGHT+" "+o.OVER),this.mirror=null})),this.listenTo(t,t.EVENT.OVER_DROP_ZONE,(function(t){t.classList.add(o.OVER)})),this.listenTo(t,t.EVENT.LEFT_DROP_ZONE,(function(t){t.classList.remove(o.OVER)}))},setOriginOver:function setOriginOver(t){this.opts.origin.classList[t?"add":"remove"](this.pub.CLASS.OVER)}}),C=r(145),S={maxItems:h,duplicateItems:y,preventMathjaxDuplication:v,keyboardMouseInteraction:b,ariaAttribute:O,styleHandler:E,scrollable:d.extend({REPEATER_ID:"dragDropScroll",CONSTS:{BUFFER:50,PERIOD:10,DELTA:10},POSSIBLE_OVERFLOWS:["overflow","overflowY"],active:function active(){return this.opts.scrollable},initialize:function initialize(){this.listenToOnce(this.prv,this.prv.EVENT.INITIALIZED,this.onDragdropInitialized)},onDragdropInitialized:function onDragdropInitialized(){var t=this.pub;this.listenTo(t,t.EVENT.ACTIVATED_ITEM,this.onActivatedItem),this.listenTo(t,t.EVENT.MOVED,this.onMoved),this.listenTo(t,t.EVENT.DEACTIVATED_ITEM,this.clearScroll)},isScrollableOverflow:function isScrollableOverflow(t){var n=u()(t),r=!1;return i.a.some(this.POSSIBLE_OVERFLOWS,(function(t){var o=n.css(t);if("scroll"===o||"auto"===o)return r=!0,!0})),r},onActivatedItem:function onActivatedItem(t){var n=this,r=window,o=document.documentElement,i=u()(t).parents().filter((function(t,r){return n.isScrollableOverflow(r)})),a=document.scrollingElement||o;this.scrollableContainers=u.a.merge(i,u()(a)).map((function(t,n){var i=u()(n),c=i.offset(),l={el:n,top:c.top,left:c.left,scrollWidth:n.scrollWidth,scrollHeight:n.scrollHeight};return n===a?(l.isDocumentScrollingElement=!0,l.width=Math.max(o.clientWidth,r.innerWidth||0),l.height=Math.max(o.clientHeight,r.innerHeight||0)):(l.width=i.outerWidth(),l.height=i.outerHeight()),l})).toArray()},onMoved:function onMoved(t,n){var r,o,a=this,c={top:n.pageY,left:n.pageX};i.a.some(this.scrollableContainers,(function(t){if(r=a.getScrollingDirection(t,c,t.isDocumentScrollingElement),!i.a.isNull(r))return o=t.el,!0})),r&&o?this.scroll(o,r):C.a.clear(this.REPEATER_ID)},getScrollingDirection:function getScrollingDirection(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.CONSTS.BUFFER,i=t.height,a=t.scrollHeight,c=t.el,l=c.scrollTop,u=r?l:t.top;return n.top<=u+o&&l>0?"top":n.top>=u+i-o&&l<a-i&&i<a?"bottom":null},scroll:function scroll(t,n){var r=this.CONSTS,o=r.DELTA,i=r.PERIOD;C.a.start(this.REPEATER_ID,(function(){"top"===n?t.scrollTop-=o:"bottom"===n&&(t.scrollTop+=o)}),i)},clearScroll:function clearScroll(){this.scrollableContainers=null,C.a.clear(this.REPEATER_ID)},remove:function remove(){this.stopListening(),this.clearScroll()}}),groupingResponses:d.extend({ATTR:{RESPONSE_GROUP:"data-lrn-response-group"},active:function active(){return this.opts.groupingResponses},initialize:function initialize(){this.listenToOnce(this.prv,this.prv.EVENT.INITIALIZED,this.onDragdropInitialized)},onDragdropInitialized:function onDragdropInitialized(){this.setupDragOverOrigin(),this.listenTo(this.prv,this.prv.EVENT.HIT_ORIGIN,this.hitOrigin)},setupDragOverOrigin:function setupDragOverOrigin(){var t=this.prv,n=this.pub,r=this.opts.origin,o=!1,i=null;this.listenTo(n,n.EVENT.ACTIVATED_ITEM,(function(t){o=r.contains(t),i=t.parentElement})),this.listenTo(n,n.EVENT.MOVED,(function(n,i,a){var c=r.contains(a);c!==o&&(o=c,t.trigger(t.EVENT.NOTIFY_CUSTOM_DROP,o))})),this.listenTo(n,n.EVENT.DEACTIVATED_ITEM,(function(n){o&&this.moveToCorrespondingGroup(n,i),o=!1,i=null,t.trigger(t.EVENT.NOTIFY_CUSTOM_DROP,!1)}))},moveToCorrespondingGroup:function moveToCorrespondingGroup(t,n){var r=this.prv,o=r.$origin,i=this.getResponseGroup(o,t),a=r.behaviours;i&&!i.contains(t)&&(i.appendChild(t),r.triggerAppendEvents(t,i,n),a.prioritise("deactivateItem",["keyboardMouseInteraction","groupingResponses"],t))},deactivateItem:function deactivateItem(t){this.pub.trigger(this.pub.EVENT.DEACTIVATED_ITEM,t)},getResponseGroup:function getResponseGroup(t,n){var r=n.getAttribute(this.ATTR.RESPONSE_GROUP);if(!i.a.isUndefined(r))return t.find("["+this.ATTR.RESPONSE_GROUP+'="'+r+'"]')[0]},returnItemTo:function returnItemTo(t){return this.getResponseGroup(this.prv.$origin,t)},isDroppable:function isDroppable(t,n,r){var o=this.prv.$dropzones,i=this.ATTR.RESPONSE_GROUP;return{allowed:n===r||(!!o.is(n)||u()(t).attr(i)===u()(n).attr(i))}},hitOrigin:function hitOrigin(t){t&&this.moveToCorrespondingGroup(t,t.parentElement)}}),list:d.extend({active:function active(){return this.opts.list},initialize:function initialize(){var t=this.pub;this.listenTo(t,t.EVENT.CLONED,this.onClone)},onClone:function onClone(t,n,r){var o,i=this;"mirror"===r&&(t.classList.remove(this.pub.CLASS.ACTIVE),(o=this.horizontalOffset(n,t))&&requestAnimationFrame((function(){i.replicateOffset(t,o)})))},horizontalOffset:function horizontalOffset(t,n){return u()(t.firstChild).innerHeight()>u()(n.firstChild).innerHeight()&&this.getHorizontalOffset(t)},hitSecondItem:function hitSecondItem(t,n){this.moveActive(n,t)},getHorizontalOffset:function getHorizontalOffset(t){var n=t.offsetParent.getBoundingClientRect();return t.getClientRects()[0].left-n.left},replicateOffset:function replicateOffset(t,n){var r=u()(t),o=r.clone().removeClass("gu-mirror"),i=u()("<span>").css({display:"inline-block",width:n});t.className="gu-mirror",r.empty().removeAttr("data-original-index aria-label aria-pressed tabindex").append(i).append(o)},moveActive:function moveActive(t,n){var r=t.parentNode;this.moveItemBeyondTarget(t,n,r)&&(t.focus(),this.prv.triggerAppendEvents(t,r,r))},moveItemBeyondTarget:function moveItemBeyondTarget(t,n,r){var o=this.getDomOrder(t,n);if(0!==o)return r.insertBefore(t,1===o?n.nextSibling:n),!0},getDomOrder:function getDomOrder(t,n){var r=t.compareDocumentPosition(n),o=0;return r&Node.DOCUMENT_POSITION_FOLLOWING&&(o=1),r&Node.DOCUMENT_POSITION_PRECEDING&&(o=-1),o}}),swapInlineAndBlock:d.extend({active:function active(){return this.opts.swapInlineAndBlock},initialize:function initialize(){var t=this.prv;this.$container=u()(this.opts.container),this.onChanged=i.a.debounce(this.onChanged.bind(this),10),this.listenToOnce(t,t.EVENT.INITIALIZED,this.onDragdropInitialized)},onDragdropInitialized:function onDragdropInitialized(){var t=this.pub;this.listenTo(t,t.EVENT.CHANGED,this.onChanged)},onChanged:function onChanged(t,n){var r,o=this.pub,i=this.opts,a=u()(t);if(n===i.origin&&a.is("span")?r="div":a.is("div")&&(r="span"),r){this.changeElementType(t,r);var c=this.$container.find(".".concat(o.CLASS.ZONE," .").concat(o.CLASS.DRAGGABLE)).get();this.pub.changeDraggables(c)}},changeElementType:function changeElementType(t,n){var r={},o=u()(t);u.a.each(t.attributes,(function(t,n){r[n.nodeName]=n.nodeValue})),o.replaceWith((function(){return u()("<".concat(n,"/>"),r).append(o.contents())}))}})},P=r(228),R=r.n(P),T=r(250),w=r.n(T),A=r(251),D=r.n(A),I=r(156),x=r.n(I),N=R.a.create();function getTransformMatrixString(t){return window.getComputedStyle(t).getPropertyValue("transform")}function strToMatrixArray(t){for(var n=t.replace(/(matrix\()|(\))/,"").split(","),r=0;r<n.length;r++)n[r]=parseFloat(n[r]);return[[n[0],n[2],n[4]],[n[1],n[3],n[5]],[0,0,1]]}N.import(w.a),N.import(D.a),N.import(x.a);var z={getInverseMatrix:function getInverseMatrix(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=getTransformMatrixString(t),o=strToMatrixArray(r);return n.removeTranslation&&(o[0][2]=o[1][2]=0),N.inv(N.matrix(o))},transformPoint:function transformPoint(t,n){var r=function pointToVector(t){var n=t.x,r=t.y;return N.matrix([[n],[r],[1]])}(t),o=N.multiply(n,r);return{x:o.get([0,0]),y:o.get([1,0])}}};function DragDropPrivate(t,n){this.pub=t,this.opts=n}i.a.extend(DragDropPrivate.prototype,c.a.Events,{EVENT:{APPENDED_ITEM:"appended-item",NOTIFY_CUSTOM_DROP:"notify-custom-drop",HIT_ORIGIN:"hit-origin",INITIALIZED:"initialized",MOVED_ITEM_AWAY:"moved-item-away"},MOVE_THROTTLE_TIME:100,initialize:function initialize(){i.a.defaults(this.opts,this.pub.defaults),this.applyBehaviours(),this.jqueryize(),this.applyClasses(),this.dragulize(),this.listenToDragula(),this.listenToInterface(),this.on(this.EVENT.MOVED_ITEM_AWAY,this.onMovedAway),this.trigger(this.EVENT.INITIALIZED)},applyBehaviours:function applyBehaviours(){this.behaviours=new d.Collection(S,{prv:this,pub:this.pub,opts:this.opts})},applyClasses:function applyClasses(){var t=this.pub,n=this.opts;this.$zones.addClass(t.CLASS.ZONE),n.list||n.container.classList.add(this.pub.CLASS.NON_LIST)},jqueryize:function jqueryize(){var t=this.pub;this.$origin=u()(this.opts.origin),this.$zones=u()(this.opts.zones),this.$draggables=u()(this.opts.draggables),this.$dropzones=this.$zones.not(this.$origin).not(this.$origin.find(this.opts.zones)),this.$container=t.$container=u()(this.opts.container)},dragulize:function dragulize(){var t=this,n=this.opts;this.drake=f()(n.zones,{mirrorContainer:n.container,copy:this.canCopy.bind(this),accepts:this.canAccept.bind(this),transformMatrix:z,invalid:function invalid(n){return!t.$draggables.is(n)&&!t.$draggables.find(n).length||n.hasAttribute("disabled")}})},canAccept:function canAccept(t,n,r){return(!n||!n.hasAttribute("disabled"))&&i.a.every(this.behaviours.aggregate("isDroppable",t,n,r))},canCopy:function canCopy(t,n){return!!this.behaviours.callIfActive("duplicateItems","isInOrigin",n)},listenToDragula:function listenToDragula(){var t=this,n=this.pub,r=this.drake,o=!1;r.on("drag",(function(t,r){var o=i()(getDraggableAttributes(t)).assign({isActive:!0,isPointerDragAction:!0,isBeingAppendedToNewZone:!1});n.trigger(n.EVENT.DRAG_START,t,r),n.trigger(n.EVENT.ACTIVATED_ITEM,t,o)})).on("move",i.a.throttle((function handleMove(r,o,i){t.isDragging()&&n.trigger(n.EVENT.MOVED,r,o,i)}),this.MOVE_THROTTLE_TIME)).on("dragend",(function(t){var r=i()(getDraggableAttributes(t)).assign({isActive:!1,isPointerDragAction:!0,isBeingAppendedToNewZone:!1});t&&(t.classList.remove(n.CLASS.DRAG_SHADOW,n.CLASS.DRAG_MIRROR),n.trigger(n.EVENT.DEACTIVATED_ITEM,t,r)),n.trigger(n.EVENT.DRAG_END,t),o=!1})).on("over",(function(t,r){n.trigger(n.EVENT.OVER_DROP_ZONE,r)})).on("out",(function(t,r){n.trigger(n.EVENT.LEFT_DROP_ZONE,r)})).on("drop",(function(n,i,a){o?r.cancel(!0):t.triggerAppendEvents(n,i,a)})).on("cloned",(function(t,r,o){t.classList.add(n.CLASS.DRAG_MIRROR),n.trigger(n.EVENT.CLONED,t,r,o)})).on("cancel",(function(t,r,i){o||n.trigger(n.EVENT.DRAG_CANCEL,t,r,i)})).on("shadow",(function(t,r){t.classList.add(n.CLASS.DRAG_SHADOW),n.trigger(n.EVENT.SHADOW,t,r)})),this.on(this.EVENT.NOTIFY_CUSTOM_DROP,(function(t){o=t}))},listenToInterface:function listenToInterface(){var t=this,n=this.drake,r=this.pub;r.on(r.EVENT.SET_DISABLED,this.setDisabled,this),r.on(r.EVENT.REMOVE,this.remove,this),r.on(r.EVENT.CLEAR,(function(){n.cancel()})),r.on(r.EVENT.CHANGE_DRAGGABLES,(function(n){t.$draggables=u()(n)}))},isDragging:function isDragging(){return this.drake&&this.drake.dragging},triggerAppendEvents:function triggerAppendEvents(t,n,r){var o=this,a=this.pub;this.opts;if(n){this.trigger(this.EVENT.APPENDED_ITEM,t,n);var c=i()(n.childNodes).filter((function(t){return o.$draggables.is(t)})),l={containerIndex:this.$dropzones.index(n),sourceIndex:this.$dropzones.index(r),keys:i()(c).map((function(t){return t.dataset.key}))};a.trigger(a.EVENT.CHANGED,t,n,r,l)}},onMovedAway:function onMovedAway(t,n){var r=this.pub,o=this.$dropzones.index(n);r.trigger(r.EVENT.MOVED_AWAY,t,n,o)},setDisabled:function setDisabled(t,n){var r=!!t||null,o=this.behaviours.aggregate("disabledProps",r),i=n?u()(n):this.$zones.add(this.$draggables);o.disabled=r,i.attr(o)},remove:function remove(){this.behaviours.callAll("remove"),this.drake.destroy(),this.off(),this.pub.off(),this.$container=this.$origin=this.$zones=this.$draggables=this.pub=this.opts=null}});var M=DragDropPrivate;function DragDrop(t){var n=new M(this,t);this.uid=i.a.uniqueId("lrn-dragdrop-"),n.initialize()}i.a.extend(DragDrop.prototype,c.a.Events,{EVENT:{ACTIVATED_ITEM:"activated-item",AUTO_MOVE:"auto-move",CHANGED:"changed",CHANGE_DRAGGABLES:"change-draggables",CLEAR:"clear",CLONING:"cloning",CLONED:"cloned",DEACTIVATED_ITEM:"deactivated-item",DRAG_START:"drag-start",DRAG_CANCEL:"drag-cancel",DRAG_END:"drag-end",OVER_DROP_ZONE:"over-drop-zone",LEFT_DROP_ZONE:"left-drop-zone",MOVED:"moved",MOVED_AWAY:"moved-away",SET_DISABLED:"set-disabled",SHADOW:"shadow",REMOVE:"remove"},CLASS:{ACTIVE:"lrn_active",DRAGGABLE:"lrn_draggable",DRAG_SHADOW:"lrn_drag_shadow",DRAG_MIRROR:"lrn_drag_mirror",DROPPABLE:"lrn_droppable",DROPZONE:"lrn_dropzone",HIGHLIGHT:"lrn_highlight",IGNORE_TAP:"lrn_dragdrop_ignore_tap",NON_LIST:"lrn_non_list",OVER:"lrn_over",ZONE:"lrn_dragdrop"},defaults:{preventMathjaxDuplication:!0,copy:!1,keyboardAndClickInteraction:!0,applyAriaAttributes:!0,applyOverHighlightDropzoneClasses:!0,maxItems:null,enforceMaxItemsInOrigin:!1,scrollable:!0,groupingResponses:!1,list:!1,swapInlineAndBlock:!1},changeDraggables:function changeDraggables(t){this.trigger(this.EVENT.CHANGE_DRAGGABLES,t)},clear:function clear(){this.trigger(this.EVENT.CLEAR)},disable:function disable(t){this.trigger(this.EVENT.SET_DISABLED,!0,t)},enable:function enable(t){this.trigger(this.EVENT.SET_DISABLED,!1,t)},move:function move(t,n,r){this.trigger(this.EVENT.AUTO_MOVE,t,n,r)},remove:function remove(){this.trigger(this.EVENT.REMOVE)}});n.a=DragDrop},210:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(125),c=r.n(a),l=r(129),u=r(127),p=r(21);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?_assertThisInitialized(t):n}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var f=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(MaskableElement,t);var n=_createSuper(MaskableElement);function MaskableElement(){var t;_classCallCheck(this,MaskableElement);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(o))),"maskId",i.a.uniqueId()),_defineProperty(_assertThisInitialized(t),"state",{renderComplete:!1}),_defineProperty(_assertThisInitialized(t),"buttonRef",(function(n){var r=t.props.buttonRef;t.button=n,r&&r(n)})),_defineProperty(_assertThisInitialized(t),"onToggleMasking",(function(){var n=t.props,r=n.baseActions,o=n.onChange,i=t.hasMask();o&&o(!i),r.toggleComponentMask(t.maskId)})),t}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(MaskableElement,[{key:"componentDidMount",value:function componentDidMount(){this.setState({renderComplete:!0})}},{key:"hasMask",value:function hasMask(){var t=this.props.base.maskIds;return i.a.contains(t,this.maskId)}},{key:"generateAriaLabel",value:function generateAriaLabel(){var t=this.props,n=t.base,r=t.ariaLabel,o=n.inMaskingState,i=n.i18n.labels.masking;return r&&o?(this.hasMask()?i.ariaLabelUnmask:i.ariaLabelMask)+" - "+r:null}},{key:"render",value:function render(){var t=this,n=this.props,r=n.hidden,o=n.base,i=n.draggable,a=o.inMaskingState,l=o.disabled,u=this.state.renderComplete,p=this.hasMask(),f=!r&&(p||a),d=i&&a,h=l?void 0:this.onToggleMasking;if(!f)return null;var y=function(){if(p&&u){var n=t.button,r=n.clientWidth,o=n.clientHeight;return t.generateMask(r,o)}return null}(),g=!a||void 0;return c.a.createElement("button",{type:"button",className:"lrn-mask",onClick:h,onTouchEnd:d?h:null,disabled:!a,ref:this.buttonRef,"aria-label":this.generateAriaLabel(),"aria-hidden":g},y)}},{key:"generateMask",value:function generateMask(t,n){for(var r=t+n,o=[],i=15;i<r;i+=15)o.push(c.a.createElement("line",{key:i,className:"lrn-line1",x1:"0",y1:i,x2:i,y2:"0"}));return(c.a.createElement("svg",{className:"lrn-mask",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"transparent"}),o))}}]),MaskableElement}(c.a.Component);f=u.b((function(t){return{base:t.base}}),(function(t){return{baseActions:l.b(p.a,t)}}))(f),n.a=f},215:function(t,n,r){"use strict";r(5);var o=r(0),i=r.n(o),a=r(17),c=r.n(a),l=r(51),u=r(244),p=r.n(u),f=r(137);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(ClozeAssociationScorer,t);var n=_createSuper(ClozeAssociationScorer);function ClozeAssociationScorer(){return _classCallCheck(this,ClozeAssociationScorer),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(ClozeAssociationScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!1}}}]),ClozeAssociationScorer}(f.a);function clozeinlinetext_scoring_typeof(t){return(clozeinlinetext_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function clozeinlinetext_scoring_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function clozeinlinetext_scoring_defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function clozeinlinetext_scoring_setPrototypeOf(t,n){return(clozeinlinetext_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function clozeinlinetext_scoring_createSuper(t){var n=function clozeinlinetext_scoring_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=clozeinlinetext_scoring_getPrototypeOf(t);if(n){var i=clozeinlinetext_scoring_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return clozeinlinetext_scoring_possibleConstructorReturn(this,r)}}function clozeinlinetext_scoring_possibleConstructorReturn(t,n){return!n||"object"!==clozeinlinetext_scoring_typeof(n)&&"function"!=typeof n?function clozeinlinetext_scoring_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function clozeinlinetext_scoring_getPrototypeOf(t){return(clozeinlinetext_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function clozeinlinetext_scoring_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&clozeinlinetext_scoring_setPrototypeOf(t,n)}(ClozeInlinetextScorer,t);var n=clozeinlinetext_scoring_createSuper(ClozeInlinetextScorer);function ClozeInlinetextScorer(){return clozeinlinetext_scoring_classCallCheck(this,ClozeInlinetextScorer),n.apply(this,arguments)}return function clozeinlinetext_scoring_createClass(t,n,r){return n&&clozeinlinetext_scoring_defineProperties(t.prototype,n),r&&clozeinlinetext_scoring_defineProperties(t,r),t}(ClozeInlinetextScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!0}}}]),ClozeInlinetextScorer}(f.a);function clozedropdown_scoring_typeof(t){return(clozedropdown_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function clozedropdown_scoring_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function clozedropdown_scoring_defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function clozedropdown_scoring_setPrototypeOf(t,n){return(clozedropdown_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function clozedropdown_scoring_createSuper(t){var n=function clozedropdown_scoring_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=clozedropdown_scoring_getPrototypeOf(t);if(n){var i=clozedropdown_scoring_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return clozedropdown_scoring_possibleConstructorReturn(this,r)}}function clozedropdown_scoring_possibleConstructorReturn(t,n){return!n||"object"!==clozedropdown_scoring_typeof(n)&&"function"!=typeof n?function clozedropdown_scoring_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function clozedropdown_scoring_getPrototypeOf(t){return(clozedropdown_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function clozedropdown_scoring_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&clozedropdown_scoring_setPrototypeOf(t,n)}(ClozeDropdownScorer,t);var n=clozedropdown_scoring_createSuper(ClozeDropdownScorer);function ClozeDropdownScorer(){return clozedropdown_scoring_classCallCheck(this,ClozeDropdownScorer),n.apply(this,arguments)}return function clozedropdown_scoring_createClass(t,n,r){return n&&clozedropdown_scoring_defineProperties(t.prototype,n),r&&clozedropdown_scoring_defineProperties(t,r),t}(ClozeDropdownScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!1,strictEquality:!0,trimWhiteSpace:!0}}}]),ClozeDropdownScorer}(f.a);function clozetext_scoring_typeof(t){return(clozetext_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function clozetext_scoring_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function clozetext_scoring_defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function clozetext_scoring_setPrototypeOf(t,n){return(clozetext_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function clozetext_scoring_createSuper(t){var n=function clozetext_scoring_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=clozetext_scoring_getPrototypeOf(t);if(n){var i=clozetext_scoring_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return clozetext_scoring_possibleConstructorReturn(this,r)}}function clozetext_scoring_possibleConstructorReturn(t,n){return!n||"object"!==clozetext_scoring_typeof(n)&&"function"!=typeof n?function clozetext_scoring_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function clozetext_scoring_getPrototypeOf(t){return(clozetext_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function clozetext_scoring_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&clozetext_scoring_setPrototypeOf(t,n)}(ClozeTextScorer,t);var n=clozetext_scoring_createSuper(ClozeTextScorer);function ClozeTextScorer(){return clozetext_scoring_classCallCheck(this,ClozeTextScorer),n.apply(this,arguments)}return function clozetext_scoring_createClass(t,n,r){return n&&clozetext_scoring_defineProperties(t.prototype,n),r&&clozetext_scoring_defineProperties(t,r),t}(ClozeTextScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!0}}}]),ClozeTextScorer}(f.a);function imageclozeassociation_scoring_typeof(t){return(imageclozeassociation_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function imageclozeassociation_scoring_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function imageclozeassociation_scoring_defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function imageclozeassociation_scoring_setPrototypeOf(t,n){return(imageclozeassociation_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function imageclozeassociation_scoring_createSuper(t){var n=function imageclozeassociation_scoring_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=imageclozeassociation_scoring_getPrototypeOf(t);if(n){var i=imageclozeassociation_scoring_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return imageclozeassociation_scoring_possibleConstructorReturn(this,r)}}function imageclozeassociation_scoring_possibleConstructorReturn(t,n){return!n||"object"!==imageclozeassociation_scoring_typeof(n)&&"function"!=typeof n?function imageclozeassociation_scoring_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function imageclozeassociation_scoring_getPrototypeOf(t){return(imageclozeassociation_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){!function imageclozeassociation_scoring_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&imageclozeassociation_scoring_setPrototypeOf(t,n)}(ImageClozeAssociationScorer,t);var n=imageclozeassociation_scoring_createSuper(ImageClozeAssociationScorer);function ImageClozeAssociationScorer(){return imageclozeassociation_scoring_classCallCheck(this,ImageClozeAssociationScorer),n.apply(this,arguments)}return function imageclozeassociation_scoring_createClass(t,n,r){return n&&imageclozeassociation_scoring_defineProperties(t.prototype,n),r&&imageclozeassociation_scoring_defineProperties(t,r),t}(ImageClozeAssociationScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!1}}}]),ImageClozeAssociationScorer}(f.a);function imageclozedropdown_scoring_typeof(t){return(imageclozedropdown_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function imageclozedropdown_scoring_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function imageclozedropdown_scoring_defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function imageclozedropdown_scoring_setPrototypeOf(t,n){return(imageclozedropdown_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function imageclozedropdown_scoring_createSuper(t){var n=function imageclozedropdown_scoring_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=imageclozedropdown_scoring_getPrototypeOf(t);if(n){var i=imageclozedropdown_scoring_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return imageclozedropdown_scoring_possibleConstructorReturn(this,r)}}function imageclozedropdown_scoring_possibleConstructorReturn(t,n){return!n||"object"!==imageclozedropdown_scoring_typeof(n)&&"function"!=typeof n?function imageclozedropdown_scoring_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function imageclozedropdown_scoring_getPrototypeOf(t){return(imageclozedropdown_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){!function imageclozedropdown_scoring_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&imageclozedropdown_scoring_setPrototypeOf(t,n)}(ImageClozeDropdownScorer,t);var n=imageclozedropdown_scoring_createSuper(ImageClozeDropdownScorer);function ImageClozeDropdownScorer(){return imageclozedropdown_scoring_classCallCheck(this,ImageClozeDropdownScorer),n.apply(this,arguments)}return function imageclozedropdown_scoring_createClass(t,n,r){return n&&imageclozedropdown_scoring_defineProperties(t.prototype,n),r&&imageclozedropdown_scoring_defineProperties(t,r),t}(ImageClozeDropdownScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!1}}}]),ImageClozeDropdownScorer}(f.a);function imageclozetext_scoring_typeof(t){return(imageclozetext_scoring_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function imageclozetext_scoring_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function imageclozetext_scoring_defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function imageclozetext_scoring_setPrototypeOf(t,n){return(imageclozetext_scoring_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function imageclozetext_scoring_createSuper(t){var n=function imageclozetext_scoring_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=imageclozetext_scoring_getPrototypeOf(t);if(n){var i=imageclozetext_scoring_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return imageclozetext_scoring_possibleConstructorReturn(this,r)}}function imageclozetext_scoring_possibleConstructorReturn(t,n){return!n||"object"!==imageclozetext_scoring_typeof(n)&&"function"!=typeof n?function imageclozetext_scoring_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function imageclozetext_scoring_getPrototypeOf(t){return(imageclozetext_scoring_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){!function imageclozetext_scoring_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&imageclozetext_scoring_setPrototypeOf(t,n)}(ImageClozeTextScorer,t);var n=imageclozetext_scoring_createSuper(ImageClozeTextScorer);function ImageClozeTextScorer(){return imageclozetext_scoring_classCallCheck(this,ImageClozeTextScorer),n.apply(this,arguments)}return function imageclozetext_scoring_createClass(t,n,r){return n&&imageclozetext_scoring_defineProperties(t.prototype,n),r&&imageclozetext_scoring_defineProperties(t,r),t}(ImageClozeTextScorer,[{key:"flags",get:function get(){return{stripWhiteSpaceForMath:!1}}}]),ImageClozeTextScorer}(f.a),O=r(4),E=r(158);n.a=l.a.extend({imageTemplate:p.a,RESPONSE_MARKER_REGEXP:"{{response}}",initialize:function initialize(){l.a.prototype.initialize.apply(this,arguments),this.updateValidationObject()},validateStartup:function validateStartup(){l.a.prototype.validateStartup.call(this),this.get("question").template&&(this.get("question").template=c.a.sanitizeHTML(this.get("question").template))},processResponseValue:function processResponseValue(t){this.hasResponse()||this.set({response:{value:[],type:this.RESPONSE_TYPE.ARRAY}},{silent:!0}),this.get("response").value=t},isDefaultValidResponseValue:function isDefaultValidResponseValue(t){return 0===i.a.filter(t,(function(t){return t||0===t})).length},getScorerClass:function getScorerClass(){var t,n=this.TYPE;switch(this.get("type")){case n.CLOZETEXT:t=g;break;case n.CLOZEASSOCIATION:t=d;break;case n.CLOZEDROPDOWN:t=y;break;case n.CLOZEINLINETEXT:t=h;break;case n.IMAGECLOZEASSOCIATION:t=v;break;case n.IMAGECLOZEDROPDOWN:t=m;break;case n.IMAGECLOZETEXT:t=b}return t},validateResponse:function validateResponse(){var t=this.getScorer(),n=t.error();if(!n)return t.validateIndividualResponses();if("MathQuestionException"!==n.name)throw n;"user"!==n.location&&O.a.exception({code:10019,detail:n.message,i18n:this.activity.get("i18n")})},isImageCloze:function isImageCloze(){var t=this.TYPE;return i.a.include([t.IMAGECLOZETEXT,t.IMAGECLOZEASSOCIATION,t.IMAGECLOZEDROPDOWN,t.IMAGECLOZEFORMULA,t.IMAGECLOZECHEMISTRY],this.get("type"))},getDynamicShuffleSeed:function getDynamicShuffleSeed(){return new E.a(this).getDynamicSeed()},getContentTemplate:function getContentTemplate(){if(this.isImageCloze()){var t=p.a,n=this.get("question"),r={img_alt:!!n.img_alt&&n.img_alt,img_title:!!n.img_title&&n.img_title,img_src:n.img_src,response_positions:n.response_positions,response_container:n.response_container,padding:!!n.padding&&n.padding,question_type:this.get("type")};return n.image&&(n.image.src&&(r.img_src=n.image.src),n.image.alt&&(r.img_alt=n.image.alt),n.image.title&&(r.img_title=n.image.title)),t({displayLogic:r})}return this.get("question").template},getImageClozeAriaLabels:function getImageClozeAriaLabels(){if(this.isImageCloze())return i.a.isUndefined(this._ariaLabels)&&(this._ariaLabels=i.a.map(this.get("question").aria_labels,(function(t){return i.a.escape(t)}))),this._ariaLabels},updateValidationObject:function updateValidationObject(){var t=this.get("question");if(t.hasOwnProperty("valid_responses")){var n,r,o,a=[],c=[],l=!0;i.a.each(t.valid_responses,(function(t,u){a[u]=[],c[u]=[],i.a.each(t,(function(t,p){r=i.a.isUndefined(t.value)?null:t.value,null!==(o=i.a.isUndefined(t.score)?null:t.score)&&(o=parseInt(o,10)),a[u].push(r),c[u].push(o),i.a.isUndefined(n)?n=o:l&=n===o}))})),delete t.valid_responses,t.validation={valid_responses:a},n=l?n:c,i.a.isNull(n)||(t.validation.valid_score=n),this.set({question:t},{silent:!0}),this.trackEvent("Updated pre v1.24.0 question object.")}},getCorrectByIndex:function getCorrectByIndex(t){if(this.canValidateResponse())return this.getValidResponse().value[t]},isVerticalTopContainer:function isVerticalTopContainer(){return i.a.isUndefined(this._verticalTop)&&(this._verticalTop=!!this.isImageCloze()&&!!i.a.getNested(this.get("question"),"response_container.vertical_top")),this._verticalTop},getIgnoreLeadingAndTrailingSpaces:function getIgnoreLeadingAndTrailingSpaces(){var t=this.get("question").ignore_leading_and_trailing_spaces;return!i.a.isBoolean(t)||t}})},224:function(t,n,r){"use strict";r.d(n,"a",(function(){return trapFocus}));var o=r(0),i=r.n(o),a=r(1),c=r.n(a),l=r(7),u=["a[href]",'input:not([disabled]):not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])',"[contenteditable]","area[href]","iframe","object","embed"].join();function trapFocus(t,n){var r=document.activeElement,o=c()(t).find(u).filter(":visible"),a=i.a.first(o),p=i.a.last(o);if(o.length){var f=function handler(t){9===t.keyCode&&(t.shiftKey?document.activeElement===a&&(t.preventDefault(),p.focus()):document.activeElement===p&&(t.preventDefault(),a.focus()))};return(n&&i.a.isFunction(n.focus)?n:a).focus(),t.addEventListener("keydown",f),t.setAttribute("role","dialog"),l.a.isSafari||t.setAttribute("aria-modal","true"),function restore(n){t.removeEventListener("keydown",f),t.removeAttribute("role"),t.removeAttribute("aria-modal"),(n&&i.a.isFunction(n.focus)?n:r).focus()}}}},227:function(t,n,r){"use strict";var o=r(125),i=r.n(o);n.a={Label:function Label(t){return t.children?i.a.createElement("span",{className:"lrn-accessibility-label"},t.children):null}}},238:function(t,n,r){"use strict";r.d(n,"a",(function(){return withNonUpdatable}));var o=r(125),i=r.n(o);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function withNonUpdatable(t){var n=!1;return(function(r){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(_class,r);var o=_createSuper(_class);function _class(){return _classCallCheck(this,_class),o.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(_class,[{key:"componentDidMount",value:function componentDidMount(){n=!0}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(){return!n}},{key:"render",value:function render(){return i.a.createElement(t,this.props)}}]),_class}(i.a.Component))}},244:function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="lrn_imagecloze_container"'+(null==(__t=displayLogic.padding?' style="padding: '+displayLogic.padding+'px"':"")?"":__t)+' ><img draggable="false"',displayLogic.img_alt&&(__p+='alt="'+(null==(__t=displayLogic.img_alt)?"":_.escape(__t))+'"'),__p+="",displayLogic.img_title&&(__p+='title="'+(null==(__t=displayLogic.img_title)?"":_.escape(__t))+'"'),__p+='class="lrn_imagecloze_image"src="'+(null==(__t=displayLogic.img_src)?"":_.escape(__t))+'">',_.each(displayLogic.response_positions,(function(t){__p+='<div class="lrn_imagecloze_response" style="left:'+(null==(__t=t.x)?"":__t)+"%;top:"+(null==(__t=t.y)?"":__t)+"%;",displayLogic.response_container&&"imageclozeassociation"===displayLogic.question_type&&(__p+="",displayLogic.response_container.hasOwnProperty("height")&&(__p+="height:"+(null==(__t=displayLogic.response_container.height)?"":__t)+";"),__p+=""),__p+='">{{response}}</div>'})),__p+="</div>";return __p}},249:function(t,n,r){"use strict";var o=r(125),i=r.n(o),a=r(210),c=r(197),l=r(264);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(MaskableDraggableResponse,t);var n=_createSuper(MaskableDraggableResponse);function MaskableDraggableResponse(t){var r;return function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,MaskableDraggableResponse),(r=n.call(this,t)).state={},r}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(MaskableDraggableResponse,[{key:"componentDidUpdate",value:function componentDidUpdate(t){if(this.props.inMaskingState!==t.inMaskingState){var n=this.button;n&&n.querySelectorAll("svg.lrn-mask").length?this.setState({disabled:!0}):(delete this.state.disabled,this.setState(this.state))}}},{key:"render",value:function render(){var t=this,n=this.props,r=n.children,o=n.isInPossibilityList;return i.a.createElement(c.a,_extends({},this.props,this.state),r,i.a.createElement(a.a,{hidden:!o,buttonRef:function buttonRef(n){return t.button=n}}))}}]),MaskableDraggableResponse}(i.a.Component);n.a=Object(l.a)(u)},264:function(t,n,r){"use strict";r.d(n,"a",(function(){return withMathCachingResponse}));var o=r(125),i=r.n(o),a=r(17),c=r.n(a);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?_assertThisInitialized(t):n}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function withMathCachingResponse(t){return function(n){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(ResponseWithMathCaching,n);var r=_createSuper(ResponseWithMathCaching);function ResponseWithMathCaching(){var t;_classCallCheck(this,ResponseWithMathCaching);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return _defineProperty(_assertThisInitialized(t=r.call.apply(r,[this].concat(o))),"MATH_SELECTOR",".lrn_math_renderer_processed, .MathJax[id^=MathJax-Element-]"),t}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(ResponseWithMathCaching,[{key:"componentDidMount",value:function componentDidMount(){if(!this.item)throw new Error("withMathCachingResponse HoC expects the wrapped component to implement mathItemRef")}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(t){var n=t.cacheRenderedMath;n&&n!==this.props.cacheRenderedMath&&n(this.getMathForCache())}},{key:"hasMath",value:function hasMath(){return!!this.item.querySelectorAll(this.MATH_SELECTOR).length}},{key:"getSanitisedHtml",value:function getSanitisedHtml(){var t=this.item.innerHTML.replace(/<script(.+?)\/script>/g,"");return c.a.sanitizeHTML(t)}},{key:"getMathForCache",value:function getMathForCache(){var t=this.props.response,n=t.index,r=t.plainText;if(this.hasMath())return{html:this.getSanitisedHtml(),latex:r,index:n}}},{key:"render",value:function render(){var n=this;return(i.a.createElement(t,_extends({mathItemRef:function mathItemRef(t){return n.item=t}},this.props)))}}]),ResponseWithMathCaching}(i.a.Component)}},265:function(t,n,r){"use strict";r.d(n,"a",(function(){return withDragDropWrapper}));var o=r(0),i=r.n(o),a=r(1),c=r.n(a),l=r(125),u=r.n(l),p=r(208);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?_assertThisInitialized(t):n}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var f=function(t){_inherits(DragDropWrapper,t);var n=_createSuper(DragDropWrapper);function DragDropWrapper(){var t;_classCallCheck(this,DragDropWrapper);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(o))),"classes",i.a.extend({DRAGGABLE:"lrn_draggable",ORIGIN:"lrn_possibilityList"},p.a.prototype.CLASS)),t}return _createClass(DragDropWrapper,[{key:"componentDidMount",value:function componentDidMount(){var t=this;i.a.isFunction(this.props.onDragDropMount)?this.props.onDragDropMount((function(){return t.initDragDrop()})):this.initDragDrop()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.dragDrop&&(this.dragDrop.off().remove(),delete this.dragDrop)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.dragDrop&&this.updateDraggables()}},{key:"initDragDrop",value:function initDragDrop(){if(!this.props.disabled){var t=this.props,n=this.classes,r=this.refs,o=c()(r.container);this.dragDrop=new p.a({container:o[0],draggables:o.find(".".concat(n.DRAGGABLE)).get(),zones:o.find(".".concat(n.ZONE)).get(),origin:o.find(".".concat(n.ORIGIN))[0],copy:t.copy,maxItems:t.maxItems,groupingResponses:t.groupingResponses,list:t.list,applyOverHighlightDropzoneClasses:t.applyOverHighlightDropzoneClasses}),this.listenForChanges(),this.listenForInteraction(),this.listenForClones()}}},{key:"listenForChanges",value:function listenForChanges(){var t=this.props,n=this.classes,r=t.handlers,o=this.refs.container.querySelector(".".concat(n.ORIGIN)),i=null;this.dragDrop.on(p.a.prototype.EVENT.CHANGED,(function(n,a,c,l){var u=o&&o.contains(c),p=o&&o.contains(a),f=n.dataset.key,d={responseIndex:parseInt(n.dataset.responseIndex),elIndex:l.keys.indexOf(f),containerIndex:l.containerIndex,sourceIndex:l.sourceIndex,keys:l.keys,removedItemKey:i,key:f};t.copy&&u&&!p?n.parentNode&&n.parentNode.removeChild(n):a!==c&&c.appendChild(n),r.onChange(d),i=null})),this.dragDrop.on(p.a.prototype.EVENT.MOVED_AWAY,(function(t,n,r){i=t.dataset.key,n.appendChild(t)})),r.onToggle&&(this.dragDrop.on(p.a.prototype.EVENT.ACTIVATED_ITEM,r.onToggle),this.dragDrop.on(p.a.prototype.EVENT.DEACTIVATED_ITEM,r.onToggle))}},{key:"listenForClones",value:function listenForClones(){this.dragDrop.on(p.a.prototype.EVENT.CLONED,(function(t,n,r){"copy"===r&&delete t.dataset.key}))}},{key:"listenForInteraction",value:function listenForInteraction(){var t=this.props.handlers;this.dragDrop.on(p.a.prototype.EVENT.ACTIVATED_ITEM,(function(){t.onInteraction()}))}},{key:"updateDraggables",value:function updateDraggables(){var t=this.classes,n=this.refs,r=c()(n.container).find(".".concat(t.ZONE," .").concat(t.DRAGGABLE)).get();this.dragDrop.changeDraggables(r)}},{key:"render",value:function render(){return u.a.createElement("div",{className:"lrn-dragdrop-container",ref:"container"},this.props.children)}}]),DragDropWrapper}(u.a.Component);function withDragDropWrapper(t){return function(n){_inherits(ComponentWrappedWithDragDrop,n);var r=_createSuper(ComponentWrappedWithDragDrop);function ComponentWrappedWithDragDrop(){return _classCallCheck(this,ComponentWrappedWithDragDrop),r.apply(this,arguments)}return _createClass(ComponentWrappedWithDragDrop,[{key:"render",value:function render(){var n=this.props,r=this.wrapperProps;return(u.a.createElement(f,r,u.a.createElement(t,n)))}},{key:"wrapperProps",get:function get(){var t=this.props;return{copy:t.canDuplicateResponses,disabled:t.disabled,maxItems:t.maxResponsePerCell,groupingResponses:t.usingPossibleGroupingResponses,handlers:t.dragDropHandlers,list:!!t.list,applyOverHighlightDropzoneClasses:!t.list,onDragDropMount:t.onDragDropMount}}}]),ComponentWrappedWithDragDrop}(u.a.Component)}},273:function(t,n,r){"use strict";r.d(n,"a",(function(){return PossibilityListWrapper})),r.d(n,"c",(function(){return isHorizontalList})),r.d(n,"b",(function(){return g}));var o=r(0),i=r.n(o),a=r(125),c=r.n(a),l=r(126),u=r.n(l),p=r(247),f=r(197),d=r(238);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?_assertThisInitialized(t):n}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var h=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(PossibilityList,t);var n=_createSuper(PossibilityList);function PossibilityList(){var t;_classCallCheck(this,PossibilityList);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return _defineProperty(_assertThisInitialized(t=n.call.apply(n,[this].concat(o))),"buildPossibleResponsesGroup",(function(n){var r=n.title,o=n.index,a=n.responses;return(c.a.createElement("div",{key:o,className:"lrn_possible_responses_group"},c.a.createElement("div",{className:"lrn_group_label"},r),c.a.createElement("div",{className:"lrn_dragdrop","data-lrn-response-group":o},i.a.map(a,t.buildPossibleResponse))))})),_defineProperty(_assertThisInitialized(t),"buildPossibleResponse",(function(n){var r=_assertThisInitialized(t).Possibility;return(c.a.createElement(r,_extends({isInPossibilityList:!0,key:n.key,response:n},t.props)))})),t}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(PossibilityList,[{key:"render",value:function render(){var t=this.props,n=t.usingPossibleGroupingResponses,r=t.extraClasses,o=t.i18nLabels,a=n?this.buildPossibleResponsesGroup:this.buildPossibleResponse,l=u()({lrn_dragdrop:!n},r),p=this.props.hasActiveResponse?"button":"region";return c.a.createElement("div",_extends({className:"lrn_possibilityList ".concat(l),"aria-label":o.ariaLabel.dragDrop.possibleResponses,"aria-roledescription":o.ariaLabel.dragDrop.responseZone,role:p},{}),i.a.map(this.getPossibleResponsesToBuild(),a))}},{key:"getPossibleResponsesToBuild",value:function getPossibleResponsesToBuild(){var t=this.props,n=t.usingPossibleGroupingResponses,r=t.canDuplicateResponses,o=t.possibleResponseCollection,a=t.selectedResponses;if(r)return o;var c=i.a.pluck(i.a.flatten(a),"index"),l=function filterSelectedResponses(t){return i.a.filter(t,(function(t){var n=t.index;return!i.a.contains(c,n)}))};return n?i.a.map(o,(function(t){return i.a.extend({},t,{responses:l(t.responses)})})):l(o)}},{key:"Possibility",get:function get(){return this.props.Possibility||f.a}}]),PossibilityList}(a.Component),y=Object(d.a)(h);function getPossibilityList(t){return t.nonUpdatablePossibilityList?c.a.createElement(y,t):c.a.createElement(h,t)}function PossibilityListContainer(t){var n=t.possibilityListPosition,r=t.getPossibilityListContainerRef;return(c.a.createElement("div",{ref:r,className:"lrn_possibilityListContainer lrn_list_".concat(n)},getPossibilityList(t)))}function PossibilityListWrapper(t){var n=t.possibilityListPosition,r=t.children,o=function getPossibilityWrapperContent(t){var n=t.possibilityListPosition;return t.useContainer?c.a.createElement(PossibilityListContainer,t):getPossibilityList(i.a.assign({extraClasses:"lrn_list_".concat(n)},t))}(i()(t).omit("children")),a="left"===n||"top"===n,l=u()({lrn_horizontal_list:isHorizontalList(t)},"lrn_response_innerbody");return c.a.createElement("div",{className:l},a&&o,r,!a&&o)}function isHorizontalList(t){var n=t.possibilityListPosition;return"left"===n||"right"===n}var g=Object(p.c)({nonUpdatablePossibilityList:!0})(PossibilityListWrapper)},295:function(t,n,r){"use strict";var o=r(0),i=r.n(o);n.a=function ariaLabelable(t){return i()(t).assign({generateAriaLabel:function generateAriaLabel(){var t=this.props,n=t.ariaLabel,r=t.validation,o=t.i18nLabels;return r.isAriaLabelVisible?i.a.exists(n)?"".concat(n," - ").concat(o.responseArea," ").concat(r.ariaLabel):"".concat(o.responseArea," ").concat(r.ariaLabel):i.a.exists(n)?n:o.responseArea}})}},301:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(21),c=r(23),l=r(7),u={CLOZE_SET_ARIA_LIVE_TEXT:"cloze:setAriaLiveText",CLOZE_SET_DRAG_DROP_RESPONSE:"cloze:setDragDropResponse",CLOZE_SET_HAS_ACTIVE_RESPONSE:"cloze:setHasActiveResponse",CLOZE_SET_RESPONSE:"cloze:setResponse",CLOZE_SET_RESPONSE_CONTAINER_WIDTH:"cloze:setResponseContainerWidth",CLOZE_SET_RESPONSE_CHARACTER:"cloze:setResponseCharacter",CLOZE_SET_RESPONSE_CONTAINER_FOCUS:"cloze:setResponseContainerFocus",CLOZE_SET_RESPONSE_CONTAINER_SELECTION:"cloze:setResponseContainerSelection"};n.a={actionTypes:u,setAriaLiveText:function setAriaLiveText(t){return function(n){n({type:u.CLOZE_SET_ARIA_LIVE_TEXT,payload:{ariaLiveText:t}})}},setDragDropResponse:function setDragDropResponse(t){return function(n,r,o){n(c.a.clearValidationUI()),n({type:u.CLOZE_SET_DRAG_DROP_RESPONSE,payload:t});var i=r().cloze.value;n(a.a.updateResponseValue(i)),"ie"===l.a.browser&&o.simplefeatureService.render()}},setHasActiveResponse:function setHasActiveResponse(t){return function(n){n({type:u.CLOZE_SET_HAS_ACTIVE_RESPONSE,payload:{hasActiveResponse:t}})}},setResponse:function setResponse(t,n){return function(r,o){r(c.a.clearValidationUI()),r({type:u.CLOZE_SET_RESPONSE,payload:{index:t,value:n}});var l=o().cloze.ignoreLeadingAndTrailingSpaces,p=o().cloze.value.map((function(t){if(i.a.isString(t))return l?i.a.trim(t):t}));r(a.a.updateResponseValue(p))}},setResponseContainerWidth:function setResponseContainerWidth(t,n){return function(r){return r({type:u.CLOZE_SET_RESPONSE_CONTAINER_WIDTH,payload:{indexes:t,width:n}})}},setResponseCharacter:function setResponseCharacter(t,n,r){return function(o,l){o(c.a.clearValidationUI()),o({type:u.CLOZE_SET_RESPONSE_CHARACTER,payload:{index:t,character:n,options:r}});var p=l().cloze.value.map((function(t){return i.a.isString(t)?t.trim():t}));o(a.a.updateResponseValue(p))}},setResponseContainerFocus:function setResponseContainerFocus(t,n){return function(r){r(c.a.clearValidationUI()),r({type:u.CLOZE_SET_RESPONSE_CONTAINER_FOCUS,payload:{index:t,isFocused:n}})}},setResponseContainerSelection:function setResponseContainerSelection(t,n){return function(r){return r({type:u.CLOZE_SET_RESPONSE_CONTAINER_SELECTION,payload:{index:t,selection:n}})}}}},326:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(203),c=(r(134),!1),l="bottom",u=!0;function isDisabled(t){return i.a.chain(t.base).pick("disabled","inMaskingState","isPreviewState","isReviewState").any().value()}function generatePossibilityListPosition(t){var n=getQuestionKey(t),r="".concat(n,".question.ui_style.possibility_list_position"),o=i.a.getNested(t,r);return i.a.isString(o)?o:l}function generateResponseKey(t,n){var r=getQuestionKey(t);return"".concat(r,"_dragdrop_").concat(t.base.responseId,"_").concat(n)}function getResponseHtml(t,n){var r=(i()(t).findWhere({index:n})||{}).html;return void 0===r?null:r}function getSpokenMath(t,n){var r=(i()(t).findWhere({index:n})||{}).spokenMath;return void 0===r?null:r}function getQuestionKey(t){return i()(t).findKey((function(t){return i.a.isObject(t.question)}))}function shouldShowDragHandler(t){var n=getQuestionKey(t),r="".concat(n,".question.ui_style.show_drag_handle"),o=i.a.getNested(t,r);return i.a.isBoolean(o)?o:u}n.a=function generateDragDropProps(t){var n,r=t[getQuestionKey(t)],o=r.question,l=r.value,u=t.base.cacheRenderedMath,p=function generatePossibleResponseCollection(t){var n=getQuestionKey(t),r=t[n],o=r.cachedMath,c=r.question,l=r.dynamicShuffleSeed,u={cacheRenderedMath:t.base.cacheRenderedMath,disabled:isDisabled(t),inMaskingState:!!t.base.inMaskingState,isMath:t.base.isMath,showDragHandler:shouldShowDragHandler(t)};return c.group_possible_responses?i.a.chain(c.possible_response_groups).map((function(t,n){var r=t.responses,o=void 0===r?[]:r;return Object(a.a)(o,c,l).map((function(t){return i()({groupIndex:n,defaultValue:t,plainText:t}).assign(u)}))})).flatten().map((function(n,r){var a=getResponseHtml(o,r)||n.plainText;return i()({}).assign(n,{value:a,index:r,spokenMath:getSpokenMath(o,r),key:generateResponseKey(t,r)})})).value():Object(a.a)(c.possible_responses,c,l).map((function(n,r){return i()({index:r,defaultValue:n,key:generateResponseKey(t,r),plainText:n,spokenMath:getSpokenMath(o,r),value:getResponseHtml(o,r)||n}).assign(u)}))}(t),f=i.a.isBoolean(o.duplicate_responses)?o.duplicate_responses:c,d=(n=i.a.deepClone(l)||[],p.filter((function(t){var r=n.indexOf(t.plainText);if(r>=0)return f||n.splice(r,1),!0})).map(i.a.clone)),h={cacheRenderedMath:u,possibleResponseCollection:p,canDuplicateResponses:f,selectedResponses:d,disabled:isDisabled(t),possibilityListPosition:generatePossibilityListPosition(t)};return o.group_possible_responses&&(h.possibleResponseGroups=i()(o.possible_response_groups).pluck("title")),h}},338:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(125),c=r.n(a),l=r(128),u=r.n(l);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=/{{response}}/g,f=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(Template,t);var n=_createSuper(Template);function Template(){return _classCallCheck(this,Template),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(Template,[{key:"componentDidMount",value:function componentDidMount(){this.forceUpdate()}},{key:"render",value:function render(){var t,n,r=this,o=this.props,l=o.className,f=o.html,d=o.Input,h=o.inputs,y=this.el&&this.el.querySelectorAll("[".concat("data-lrn-template-response","]"));return c.a.createElement(a.Fragment,null,c.a.createElement("div",{className:l,dangerouslySetInnerHTML:(t=f,n="<span ".concat("data-lrn-template-response","></span>"),{__html:t.replace(p,n)}),ref:function ref(t){return r.el=t}}),i.a.map(y,(function(t,n){return u.a.createPortal(c.a.createElement(d,h[n]),t)})))}}],[{key:"countHooks",value:function countHooks(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(t.match(p)||"").length}}]),Template}(c.a.Component);n.a=f},366:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(125),c=r.n(a),l=r(338);function ownKeys(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,o)}return r}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function generateResponseInputMountedHandler(t){if(i.a.isFunction(t.onInputsMounted)){var n=t.responseContainers.length,r=0;return function(){++r===n&&t.onInputsMounted()}}return i.a.noop}n.a=function ResponseArea(t){var n,r,o,a,u=i.a.conditionallyBuildString({lrn_display_correct_answer_enabled:t.isShowingCorrectAnswers||t.hasResponseDistractorRationale}," ");return(c.a.createElement(l.a,{className:u,html:t.template,Input:t.Input,inputs:(n=t,r=generateResponseInputMountedHandler(n),o=n.actions,a=n.i18nLabels,n.responseContainers.map((function(t,n){return function _objectSpread(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(r),!0).forEach((function(n){_defineProperty(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}({actions:o,i18nLabels:a,index:n,onMounted:r},t)})))}))}},367:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(125),c=r.n(a),l=r(183),u=r(227),p=r(134);function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var f=l.a.SuggestedAnswersList,d=(l.a.CheckAnswerButton,l.a.ValidatableQuestionWithOptionalResponseInput);n.a=function Layout(t){var n=t.validatable,r=n.validationState,o=n.canShowGlobalValidationUI,a=t.base.i18n.labels.ariaLiveText,l=i.a.conditionallyBuildString(_defineProperty({lrn_response_innerbody:!0,"lrn-response-validate-wrapper":!0,lrn_correct:o&&r&&"correct"===r,lrn_incorrect:o&&r&&"incorrect"===r},t.innerBodyClassName,!i.a.isEmpty(t.innerBodyClassName))," "),h=i.a.conditionallyBuildString(_defineProperty({lrn_response_math:t.base.isMath},t.wrapperClassName,!i.a.isEmpty(t.wrapperClassName))," ");return c.a.createElement(d,{validatable:t.validatable},c.a.createElement("div",{className:"lrn_cloze_response_container"},c.a.createElement("div",{className:l},c.a.createElement("div",{className:h},t.children))),c.a.createElement(u.a.Label,null,function generateAccessibilityLabel(t,n){var r=t.validationState,o=p.a.getGlobalAccessibility(r,n);return o.visible?o.label:""}(t.validatable,a)),c.a.createElement(f,null))}},368:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(134),c=r(142),l=r(326),u=r(203),p=r(206),f=r(17),d=r.n(f),h={clozeAssociation:{dragDrop:{},responseContainers:{height:null,isAutoSized:!0,isReadOnly:!1,role:null,validation:{ariaLabel:null,isAriaLabelVisible:!1,isCorrect:null,isNumerationVisible:!1,isVisible:!1,numeration:null},value:null,width:null,wordWrap:!1}},clozeDropdown:{responseContainers:{height:null,isReadOnly:!1,placeholder:null,possibilities:[],validation:{ariaLabel:null,isAriaLabelVisible:!1,isCorrect:null,isNumerationVisible:!1,isVisible:!1,numeration:null},value:null,width:null}},clozeText:{responseContainers:{cols:null,customCharacterMapCharacters:null,hasCharacterMap:!1,height:null,isMultipleLine:!1,isReadOnly:null,maxLength:15,maxWidth:null,placeholder:null,type:"text",validation:{ariaLabel:null,isAriaLabelVisible:!1,isCorrect:null,isNumerationVisible:!1,isVisible:!1,numeration:null},value:null,width:null}}},y={clozeassociation:"clozeAssociation",clozedropdown:"clozeDropdown",clozetext:"clozeText"},g={clozeAssociation:function clozeAssociation(t){var n,r=t.question,o=t.defaults,a=r.template,c=void 0===a?"":a,l=normalizePropNames(r.response_container||{});return n=r.group_possible_responses?i.a.chain(r.possible_response_groups).pluck("responses").flatten().value():r.possible_responses||[],l.totalPossibilities=n.length,l.totalResponseAreas=(c.match(/{{response}}/g)||[]).length,i()({}).assign(o,l)},clozeDropdown:function clozeDropdown(t){var n=t.question,r=t.defaults,o=normalizePropNames(n.response_container||{});return i()({}).assign(r,o)},clozeText:function clozeText(t){var n=t.question,r=t.defaults,o=normalizePropNames(n.response_container||{}),a=n.character_map,c=i()(a).map((function(t){return d.a.stripHTML(d.a.createImageDescriptions(t),!0)}));return i()({}).assign(r,removeNonExistantProps({customCharacterMapCharacters:i.a.isArray(a)?c:null,hasCharacterMap:!!a,isMultipleLine:n.multiple_line,maxLength:n.max_length,spellCheck:Object(p.d)(n.spellcheck),autoCapitalize:Object(p.a)(n.spellcheck),autoComplete:Object(p.b)(n.spellcheck),autoCorrect:Object(p.c)(n.spellcheck)}),o)}},v={clozeAssociation:function clozeAssociation(t){var n=t.hasActiveResponse,r=h.clozeAssociation.responseContainers;return i()({}).assign(r,{role:n?"button":"region"})},clozeDropdown:function clozeDropdown(){return i()(h.clozeDropdown.responseContainers).clone()},clozeText:function clozeText(t){var n=3,r=1.7,o=.6,a=t.question,c=h.clozeText.responseContainers,l=a.max_length||c.maxLength,u=l<50?l:50,p=u*o+r+"em",f=u+n;return i()({}).assign(c,{cols:f,width:p,maxWidth:p})}},m={clozeAssociation:function clozeAssociation(t){return normalizeResponseContainers(t.question.response_containers)},clozeDropdown:function clozeDropdown(t){var n=t.question,r=t.dynamicShuffleSeed,o=n.response_containers,a=n.possible_responses||[],c=normalizeResponseContainers(o);return a.map((function(t,o){var a=c[o]||{},l=Object(u.a)(t,n,r);return i()({}).assign(a,{possibilities:l})}))},clozeText:function clozeText(t){return normalizeResponseContainers(t.question.response_containers)}};function addRelatedResponseContainerProp(t,n,r){var o=i.a.clone(t);return"width"===r&&(o.maxWidth=n),o[r]=n,o}function generateResponseContainerProps(t,n){var r=n.validatable,o=void 0===r?[]:r,l=!!o.responseLevelDistractorRationale&&"always"===o.showDistractorRationale.perResponse,u=function generateResponseContainerPropsBuilder(t){return function(n,r){var o=t.validatedResponses[r],l=t.responseContainers[r],u=Object(c.a)(t.numerationType,r),p=a.a.getResponseAccessibility({isCorrect:o,response:n,isMath:t.isMath,state:a.a.getResponseState(n,o),validationState:t.validationState,value:u,ariaLiveLabels:t.i18n.labels.ariaLiveText}),f=i()({}).assign(t.defaultValidation,removeNonExistantProps({isCorrect:o,numeration:u,ariaLabel:p.label,isAriaLabelVisible:t.isNumerationVisible&&p.visible,isNumerationVisible:t.isNumerationVisible,isVisible:t.isValidationVisible})),d=i()(t.containersConfig[r]||{}).assign(removeNonExistantProps(l),{validation:f,isReadOnly:t.isReadOnly,value:n});return i.a.chain({}).assign(t.common,removeNonExistantProps(d)).reduce(normalizePropValue,{}).reduce(addRelatedResponseContainerProp,{}).value()}}({common:g[t]({defaults:v[t](n),question:n.question}),containersConfig:m[t](n),defaultValidation:h[t].responseContainers.validation,isReadOnly:n.base.readOnly||n.base.disabled,isMath:n.base.isMath,i18n:n.base.i18n,isNumerationVisible:o.isShowingCorrectAnswers||l,isValidationVisible:i.a.isArray(n.validatedResponses),numerationType:o.validationStemNumeration,responseContainers:n.responseContainers,validatedResponses:normalizeValidatedResponses(n.validatedResponses,n.responses),validationState:o.validationState});return n.responses.map(u)}function normalizeMeasurement(t){return i.a.exists(t)?function getValueFromMeasurement(t){var n=Number(t.toString().replace(/[^\d.-]/g,""));return!i.a.isNaN(n)&&n>=0?n:0}(t)+function getUnitFromMeasurement(t){var n=t.toString().substr(-2);return"em"===n||"px"===n?n:"px"}(t):null}function normalizePropNames(t){return i()(t).reduce((function(t,n,r){switch(r){case"aria_label":t.ariaLabel=n;break;case"input_type":t.type=n;break;case"wordwrap":t.wordWrap=n;break;default:t[r]=n}return t}),{})}function normalizePropValue(t,n,r){var o=i.a.clone(t);return o[r]="height"===r||"width"===r?normalizeMeasurement(n):n,o}function normalizeResponseContainers(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return normalizePropNames(t)}))}function normalizeValidatedResponses(t,n){return i.a.isArray(t)?t.map((function(t,r){return!t&&i.a.isNull(n[r])?n[r]:t})):n.map((function(){return null}))}function removeNonExistantProps(t){return i()(t).reduce((function(t,n,r){return i.a.exists(n)&&(t[r]=n),t}),{})}n.a=function generateProperties(t){var n=function getSubtype(t){return y[t.cloze.question.type]}(t);if(!i.a.exists(n)){var r=i()(y).keys().join(", ");throw new Error("Unsupported cloze type - can only be: ".concat(r))}var o=t.validatable,a=o.responseLevelDistractorRationale,c=o.showDistractorRationale,u=o.isShowingCorrectAnswers,p=o.validatedResponses,f={hasResponseDistractorRationale:!!a&&"always"===c.perResponse,i18nLabels:i.a.deepClone(t.base.i18n.labels),inMaskingState:!!t.base.inMaskingState,isShowingCorrectAnswers:u,responseContainers:generateResponseContainerProps(n,{base:t.base,dynamicShuffleSeed:t.cloze.dynamicShuffleSeed,hasActiveResponse:t.cloze.hasActiveResponse,question:t.cloze.question,responseContainers:t.cloze.responseContainers,responses:t.cloze.value,validatable:t.validatable,validatedResponses:p}),template:t.cloze.question.template};return function isDragDrop(t){return i.a.isObject(h[t].dragDrop)}(n)&&(f.dragDrop=Object(l.a)(t),f.responseContainers=function addDragDropResponsesToContainers(t){return t.responseContainers.map((function(n){var r=t.dragDrop.selectedResponses,o=n.value,a=i()(n).deepClone();if(i.a.isNull(o))return a;var c=i()(r).find((function(t){return t.plainText===o}));return i()(a).assign({value:c})}))}(f)),function hasAutoSizeableContainers(t){return i()(h[t].responseContainers).has("isAutoSized")}(n)&&(f.responseContainers=function addAutoSizeablePropToContainers(t){return t.responseContainers.map((function(t){var n=!i.a.exists(t.width);return i.a.chain(t).deepClone().assign({isAutoSized:n}).value()}))}(f)),f}},369:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(55),c=r(338);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _get(t,n,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,n,r){var o=function _superPropBase(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=_getPrototypeOf(t)););return t}(t,n);if(o){var i=Object.getOwnPropertyDescriptor(o,n);return i.get?i.get.call(r):i.value}})(t,n,r||t)}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(ClozeDataService,t);var n=_createSuper(ClozeDataService);function ClozeDataService(){return _classCallCheck(this,ClozeDataService),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(ClozeDataService,[{key:"getValidatedResponses",value:function getValidatedResponses(){return this.model.validateResponse()}},{key:"getSuggestedResponses",value:function getSuggestedResponses(){var t=this.getValidatedResponses(),n=_get(_getPrototypeOf(ClozeDataService.prototype),"getSuggestedResponses",this).call(this).value,r={value:i.a.chain(n).map((function(t,n){return{index:n,label:i.a.isEmpty(t)?"&nbsp;":t}})).reject((function(n){return t[n.index]})).value()};return i.a.isEmpty(r.value)?null:r}},{key:"dynamicShuffleSeed",get:function get(){return this.model.getDynamicShuffleSeed()}},{key:"ignoreLeadingAndTrailingSpaces",get:function get(){return this.model.getIgnoreLeadingAndTrailingSpaces()}},{key:"normalizedResponses",get:function get(){var t=this.getResponse(),n=t&&t.value,r=[];return i()(this.numberOfPossibleResponses).times((function(t){var o=i.a.isArray(n)&&n[t];r.push(o||null)})),r}},{key:"numberOfPossibleResponses",get:function get(){return c.a.countHooks(this.question.template)}},{key:"type",get:function get(){return"cloze"}},{key:"validation",get:function get(){var t=this.question.validation||{},n=t.valid_responses,r=i.a.getNested(t,"valid_response.value");return i.a.isArray(n)?n:i.a.isArray(r)?r:[]}}]),ClozeDataService}(a.a);n.a=l},370:function(t,n,r){"use strict";var o,i=r(0),a=r.n(i),c=r(301),l=r(21),u=r(25),p=r(203),f=r(134);function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var d=c.a.actionTypes,h=(_defineProperty(o={},d.CLOZE_SET_ARIA_LIVE_TEXT,(function(t,n){return setStateProperty(t,"ariaLiveText",n.ariaLiveText)})),_defineProperty(o,d.CLOZE_SET_DRAG_DROP_RESPONSE,(function(t,n){var r=n.containerIndex,o=n.responseIndex,i=n.sourceIndex,c=function getDragDropValueFromIndex(t,n){var r=t.question,o=t.dynamicShuffleSeed;if(a.a.isArray(r.possible_response_groups)){return a.a.chain(r.possible_response_groups).pluck("responses").map((function(t){return Object(p.a)(t,r,o)})).flatten().value()[n]}var i=r.possible_responses;return Object(p.a)(i,r,o)[n]}(t,o),l=t.value.map((function(t,n){return n===r?c:n===i?null:t}));return setStateProperty(t,"value",l)})),_defineProperty(o,d.CLOZE_SET_HAS_ACTIVE_RESPONSE,(function(t,n){return setStateProperty(t,"hasActiveResponse",n.hasActiveResponse)})),_defineProperty(o,d.CLOZE_SET_RESPONSE,(function(t,n){var r=n.index,o=n.value,i=t.value.map((function(t,n){return n===r?o:t}));return setStateProperty(t,"value",i)})),_defineProperty(o,d.CLOZE_SET_RESPONSE_CONTAINER_WIDTH,(function(t,n){var r=n.indexes,o=n.width,i=t.responseContainers.map((function(t,n){return a()(r).contains(n)?a()({}).assign(t,{width:o}):a()(t).clone()}));return setStateProperty(t,"responseContainers",i)})),_defineProperty(o,d.CLOZE_SET_RESPONSE_CHARACTER,(function(t,n){var r=n.index,o=n.character,i=n.options,c=void 0===i?{}:i,l=t.responseContainers[r].selection,u=l.start,p=l.end,f=t.value.map((function(t,n){return n===r?a()(t||"").insertCharacters(o,u,p):t})),d=t.responseContainers.map((function(t,r){if(n.index===r){var o=!!c.shouldKeepFocus,i={end:t.selection.start+1,start:t.selection.start+1};return a()({}).assign(t,{isFocused:o,selection:i})}return t})),h=setStateProperty(t,"responseContainers",d);return setStateProperty(h,"value",f)})),_defineProperty(o,d.CLOZE_SET_RESPONSE_CONTAINER_FOCUS,(function(t,n){var r=t.responseContainers.map((function(t,r){var o=n.index===r&&n.isFocused;return a()({}).assign(t,{isFocused:o})}));return setStateProperty(t,"responseContainers",r)})),_defineProperty(o,d.CLOZE_SET_RESPONSE_CONTAINER_SELECTION,(function(t,n){var r=t.responseContainers.map((function(t,r){var o=n.index===r?n.selection:t.selection;return a()({}).assign(t,{selection:o})}));return setStateProperty(t,"responseContainers",r)})),_defineProperty(o,l.a.actionTypes.QUESTION_CACHE_RENDERED_MATH,(function(t,n){var r=n.mathInResponse,o=r.latex,i=a()(t.cachedMath).clone(),c=a()({}).assign(r,{spokenMath:f.a.getText(o,!0)});return i.push(c),setStateProperty(t,"cachedMath",i)})),o);function setStateProperty(t,n,r){return a.a.extend({},t,_defineProperty({},n,r))}n.a=Object(u.a)(h,{})},433:function(t,n,r){"use strict";var o=r(0),i=r.n(o),a=r(224),c=r(128),l=r.n(c);n.a=function trapFocusable(t){return i()(t).assign({trapFocus:function trapFocus(t,n){this.restoreFocus=Object(a.a)(t,n)},removeTrapFocus:function removeTrapFocus(t,n){var r=function getDroppedElement(t,n,r){if(n<0){var o=t.getElementsByClassName("lrn_possibilityList")[0];return o&&o.querySelector('.lrn_btn_drag[data-index="'.concat(r,'"]'))}var i=t.getElementsByClassName("lrn_dropzone")[n];return i&&i.querySelector(".lrn_btn_drag")}(l.a.findDOMNode(this),t,n);this.restoreFocus&&(this.restoreFocus(r),delete this.restoreFocus)}})}},96:function(t,n,r){"use strict";r.r(n);var o=r(215),i=r(0),a=r.n(i),c=r(179),l=r(125),u=r.n(l),p=r(129),f=r(127),d=r(366),h=r(249),y=r(265),g=r(273);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(n){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,n){return!n||"object"!==_typeof(n)&&"function"!=typeof n?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){!function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}(ClozeAssociationResponseArea,t);var n=_createSuper(ClozeAssociationResponseArea);function ClozeAssociationResponseArea(){return _classCallCheck(this,ClozeAssociationResponseArea),n.apply(this,arguments)}return function _createClass(t,n,r){return n&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),t}(ClozeAssociationResponseArea,[{key:"render",value:function render(){var t=this.props,n=t.dragDrop,r=t.i18nLabels,o=n.possibleResponseGroups,i=t.usingPossibleGroupingResponses?function mapResponseGroups(t,n){return t.map((function(t,r){return{index:r,title:t,responses:a.a.chain(n).where({groupIndex:r}).map(a.a.clone).value()}}))}(o,n.possibleResponseCollection):n.possibleResponseCollection;return u.a.createElement(g.a,{hasActiveResponse:t.hasActiveResponse,canDuplicateResponses:t.canDuplicateResponses,cacheRenderedMath:n.cacheRenderedMath,disabled:n.disabled,Possibility:h.a,possibilityListPosition:n.possibilityListPosition,possibleResponseCollection:i,selectedResponses:n.selectedResponses,inMaskingState:t.inMaskingState,usingPossibleGroupingResponses:t.usingPossibleGroupingResponses,i18nLabels:r},u.a.createElement("div",{className:"lrn_response_input"},u.a.createElement(d.a,_extends({onInputsMounted:this.props.onInputsMounted},t))))}}]),ClozeAssociationResponseArea}(u.a.Component);var m=Object(y.a)(v),b=r(367),O=(r(194),r(128),r(227)),E=r(131),C=r(295);function input_typeof(t){return(input_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function input_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function input_defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function input_setPrototypeOf(t,n){return(input_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function input_createSuper(t){var n=function input_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=input_getPrototypeOf(t);if(n){var i=input_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return input_possibleConstructorReturn(this,r)}}function input_possibleConstructorReturn(t,n){return!n||"object"!==input_typeof(n)&&"function"!=typeof n?function input_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function input_getPrototypeOf(t){return(input_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var S=function(t){!function input_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&input_setPrototypeOf(t,n)}(ClozeAssociationInput,t);var n=input_createSuper(ClozeAssociationInput);function ClozeAssociationInput(){return input_classCallCheck(this,ClozeAssociationInput),n.apply(this,arguments)}return function input_createClass(t,n,r){return n&&input_defineProperties(t.prototype,n),r&&input_defineProperties(t,r),t}(ClozeAssociationInput,[{key:"render",value:function render(){var t=this.props,n=t.value,r=t.index,o=t.validation,i=t.role,c=this.isAttempted?this.isCorrect:null,l=a()({}).assign(n,{validated:c});return u.a.createElement("span",{"aria-label":this.generateAriaLabel(),"aria-roledescription":this.ariaRoleDescription,className:this.className,style:this.style,"data-inputid":r,"data-index":r,role:i},o.isVisible&&o.isNumerationVisible&&u.a.createElement("span",{className:"lrn_responseIndex","aria-hidden":"true"},o.numeration),a.a.isObject(n)&&u.a.createElement(h.a,{cacheRenderedMath:this.props.value.cacheRenderedMath,disabled:this.props.value.disabled,response:l}),!o.isVisible&&!a.a.isObject(n)&&u.a.createElement("span",{className:"sr-only"},this.generateAriaLabel()),o.isVisible&&o.isNumerationVisible&&u.a.createElement(O.a.Label,null,o.ariaLabel))}},{key:"componentDidMount",value:function componentDidMount(){this.props.onMounted()}},{key:"ariaRoleDescription",get:function get(){var t,n=this.props,r=n.i18nLabels,o=n.index,i=n.isReadOnly,c=n.totalPossibilities,l=n.totalResponseAreas,u=n.value,p={dropzoneNumber:o+1,totalDropzones:l,response:u&&(u.spokenMath||u.plainText),responseNumber:u&&u.index+1,totalResponses:c},f=r.ariaRoleDescription.clozeAssociation;return t=a.a.exists(u)?i?f.dropzoneReadOnlyWithResponse:f.dropzoneWithResponse:i?f.dropzoneReadOnly:f.dropzone,Object(E.a)(t,p)}},{key:"className",get:function get(){var t=this.props,n=a()(t).getNested("value.plainText");return a.a.conditionallyBuildString({lrn_cloze_response:!0,lrn_correct_marker:this.isCorrect&&a.a.exists(n),lrn_disabled:t.isReadOnly,lrn_dragdrop:!0,lrn_dropzone:!0,lrn_incorrect_marker:this.isIncorrect,lrn_not_attempted_marker:!this.isAttempted||!a.a.exists(n)&&this.isCorrect,lrn_response_container:!0,lrn_wordwrap:t.wordWrap,"lrn-dragdrop-empty":a.a.isEmpty(n)}," ")}},{key:"isAttempted",get:function get(){var t=this.props.validation;return!a.a.isNull(t.isCorrect)}},{key:"isCorrect",get:function get(){var t=this.props.validation;return this.isAttempted&&t.isCorrect}},{key:"isIncorrect",get:function get(){var t=this.props.validation;return this.isAttempted&&!t.isCorrect}},{key:"style",get:function get(){return a()(this.props).pick("height","maxWidth","width")}}]),ClozeAssociationInput}(u.a.Component);Object(C.a)(S.prototype);var P=S,R=r(368),T=r(301),w=r(23),A=r(24),D=r(433);function clozeAssociation_typeof(t){return(clozeAssociation_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function clozeAssociation_extends(){return(clozeAssociation_extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function clozeAssociation_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function clozeAssociation_defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function clozeAssociation_setPrototypeOf(t,n){return(clozeAssociation_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function clozeAssociation_createSuper(t){var n=function clozeAssociation_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=clozeAssociation_getPrototypeOf(t);if(n){var i=clozeAssociation_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return clozeAssociation_possibleConstructorReturn(this,r)}}function clozeAssociation_possibleConstructorReturn(t,n){return!n||"object"!==clozeAssociation_typeof(n)&&"function"!=typeof n?clozeAssociation_assertThisInitialized(t):n}function clozeAssociation_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function clozeAssociation_getPrototypeOf(t){return(clozeAssociation_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}var I=function(t){!function clozeAssociation_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&clozeAssociation_setPrototypeOf(t,n)}(ClozeAssociation,t);var n=clozeAssociation_createSuper(ClozeAssociation);function ClozeAssociation(){var t;clozeAssociation_classCallCheck(this,ClozeAssociation);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return _defineProperty(clozeAssociation_assertThisInitialized(t=n.call.apply(n,[this].concat(o))),"handleDragDropChange",(function(n){var r,o=clozeAssociation_assertThisInitialized(t),i=o.props,a=o.possibilitiesText,c=n.responseIndex,l=n.containerIndex,u=i.cloze.responseContainers.length,p=l<0,f={response:a[c],responseNumber:c+1,totalResponses:a.length,dropzoneNumber:l+1,totalDropzones:u};r=p?"droppedResponseBackInList":"droppedResponseInDropzone";var d=t.generateAriaLiveText(r,f);i.setResponse(n),i.setHasActiveResponse(!1),t.setAriaLiveText(d),t.removeTrapFocus(l,c)})),_defineProperty(clozeAssociation_assertThisInitialized(t),"handleDragDropInteraction",(function(){clozeAssociation_assertThisInitialized(t).props.clearValidationUI()})),_defineProperty(clozeAssociation_assertThisInitialized(t),"handleDragDropToggle",(function(n,r){var o=r.containerIndex,i=r.isActive,a=r.responseIndex,c=r.isBeingAppendedToNewZone,l=r.isPointerDragAction;if(!c&&!l){var u,p=clozeAssociation_assertThisInitialized(t),f=p.props,d=p.possibilitiesText,h=f.cloze,y=o>=0,g={response:d[a],responseNumber:a+1,totalResponses:d.length,dropzoneNumber:o+1,totalDropzones:h.responseContainers.length};i?(t.trapFocus(t.wrapperElement),u=y?"activatedResponseInDropzone":"activatedResponse"):(t.removeTrapFocus(o,a),u=y?"deactivatedResponseInDropzone":"deactivatedResponse");var v=t.generateAriaLiveText(u,g);f.setHasActiveResponse(i),t.setAriaLiveText(v)}})),_defineProperty(clozeAssociation_assertThisInitialized(t),"onInputsMounted",(function(){t.initDragDrop(),t.updateNonMathResponseContainerDimension()})),_defineProperty(clozeAssociation_assertThisInitialized(t),"updateNonMathResponseContainerDimension",a.a.debounce((function(){t._unmounted||t.props.base.isMath||t.setResponseContainerDimensions()}),10)),t}return function clozeAssociation_createClass(t,n,r){return n&&clozeAssociation_defineProperties(t.prototype,n),r&&clozeAssociation_defineProperties(t,r),t}(ClozeAssociation,[{key:"componentWillUnmount",value:function componentWillUnmount(){this._unmounted=!0,this.removeTrapFocus()}},{key:"componentDidUpdate",value:function componentDidUpdate(t){!t.base.cacheRenderedMath&&this.props.base.cacheRenderedMath&&this.setResponseContainerDimensions()}},{key:"generateAriaLiveText",value:function generateAriaLiveText(t,n){var r=this.props.base.i18n.labels.ariaLiveText.clozeAssociation[t];return Object(E.a)(r,n)}},{key:"render",value:function render(){var t=this,n=this.props,r=n.cloze,o=r.ariaLiveText,i=r.hasActiveResponse,c=Object(R.a)(n),l=c.dragDrop,p=c.isShowingCorrectAnswers,f=c.hasResponseDistractorRationale,d={onChange:this.handleDragDropChange,onInteraction:this.handleDragDropInteraction,onToggle:this.handleDragDropToggle},h=l.canDuplicateResponses,y=p||f?"lrn_display_correct_answer_enabled":"",g=l.possibleResponseCollection;return this.possibilitiesText=a()(g).map((function(t){var n=t.spokenMath,r=t.plainText;return n||r})),u.a.createElement(b.a,clozeAssociation_extends({innerBodyClassName:"lrn_response_input_wrapper lrn-response-validate-wrapper"},n),u.a.createElement("div",{className:y,ref:function ref(n){return t.wrapperElement=n}},u.a.createElement(m,clozeAssociation_extends({hasActiveResponse:i,canDuplicateResponses:h,dragDropHandlers:d,disabled:l.isReadOnly,Input:P,onInputsMounted:this.onInputsMounted,onDragDropMount:function onDragDropMount(n){return t.initDragDrop=n},ref:function ref(n){return t.container=n},usingPossibleGroupingResponses:a.a.isArray(l.possibleResponseGroups)},c))),!a.a.isEmpty(o)&&u.a.createElement("div",{"aria-live":"assertive",className:"sr-only"},o))}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.clearAriaLiveId)}},{key:"setAriaLiveText",value:function setAriaLiveText(t){this.props.setAriaLiveText(t),this.clearAriaLiveAfterInterval()}},{key:"clearAriaLiveAfterInterval",value:function clearAriaLiveAfterInterval(){var t=this,n=this.props,r=(this.wrapperElement,n.cloze.hasActiveResponse);clearTimeout(this.clearAriaLiveId),this.clearAriaLiveId=setTimeout((function(){r?t.clearAriaLiveAfterInterval():n.setAriaLiveText("")}),1e3)}},{key:"setResponseContainerDimensions",value:function setResponseContainerDimensions(){var t=Object(R.a)(this.props);if(this.shouldSetResponseContainerDimensions(t)){var n=this.getResponseContainerWidth(this.wrapperElement),r=t.responseContainers.map((function(t,n){return t.isAutoSized?n:null})).filter(a.a.exists);this.props.setResponseContainerWidth(r,n),this.hasSetResponseContainerDimensions=!0,this.dragDropValue=t.dragDrop}}},{key:"shouldSetResponseContainerDimensions",value:function shouldSetResponseContainerDimensions(t){var n=t.responseContainers;return!this.hasSetResponseContainerDimensions&&a.a.any(n,(function(t){return t.isAutoSized}))}},{key:"reset",value:function reset(){this.hasSetResponseContainerDimensions=!1}},{key:"getResponseContainerWidth",value:function getResponseContainerWidth(t){var n="";return Object(A.a)(t,(function(){var r,o=t.querySelectorAll(".lrn_draggable"),i=0;if(a.a.each(o,(function(t){t.clientWidth>i&&(i=t.clientWidth,r=t)})),r){var c=parseFloat(window.getComputedStyle(r)["font-size"]);n=.8+i/c+"em"}})),n}}]),ClozeAssociation}(u.a.Component);Object(D.a)(I.prototype);var x=f.b((function(t){return t}),(function(t){return p.b({clearValidationUI:w.a.clearValidationUI,setAriaLiveText:T.a.setAriaLiveText,setHasActiveResponse:T.a.setHasActiveResponse,setResponse:T.a.setDragDropResponse,setResponseContainerWidth:T.a.setResponseContainerWidth},t)}),null,{forwardRef:!0})(I),N=r(369);function dataService_typeof(t){return(dataService_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dataService_classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function dataService_defineProperties(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _get(t,n,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,n,r){var o=function _superPropBase(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=dataService_getPrototypeOf(t)););return t}(t,n);if(o){var i=Object.getOwnPropertyDescriptor(o,n);return i.get?i.get.call(r):i.value}})(t,n,r||t)}function dataService_setPrototypeOf(t,n){return(dataService_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,n){return t.__proto__=n,t})(t,n)}function dataService_createSuper(t){var n=function dataService_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=dataService_getPrototypeOf(t);if(n){var i=dataService_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return dataService_possibleConstructorReturn(this,r)}}function dataService_possibleConstructorReturn(t,n){return!n||"object"!==dataService_typeof(n)&&"function"!=typeof n?function dataService_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function dataService_getPrototypeOf(t){return(dataService_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var z={ariaLiveText:null,cachedMath:[],hasActiveResponse:!1,responseContainers:{width:null}};function generateResponseContainerProps(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(){return a()({}).assign(z.responseContainers)}))}var M=function(t){!function dataService_inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&dataService_setPrototypeOf(t,n)}(ClozeAssociationDataService,t);var n=dataService_createSuper(ClozeAssociationDataService);function ClozeAssociationDataService(){return dataService_classCallCheck(this,ClozeAssociationDataService),n.apply(this,arguments)}return function dataService_createClass(t,n,r){return n&&dataService_defineProperties(t.prototype,n),r&&dataService_defineProperties(t,r),t}(ClozeAssociationDataService,[{key:"getInitialState",value:function getInitialState(){var t=this.dynamicShuffleSeed,n=_get(dataService_getPrototypeOf(ClozeAssociationDataService.prototype),"getInitialState",this).call(this);return a.a.extend(n,function dataService_defineProperty(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}({},this.type,function generateInitialState(t){return{ariaLiveText:z.ariaLiveText,cachedMath:a()(z.cachedMath).clone(),dynamicShuffleSeed:t.dynamicShuffleSeed,hasActiveResponse:z.hasActiveResponse,question:a()(t.question).deepClone(),responseContainers:generateResponseContainerProps(t.value),value:a()(t.value).clone()}}({dynamicShuffleSeed:t,question:this.question,value:this.normalizedResponses})))}}]),ClozeAssociationDataService}(N.a),k=r(370),L=c.a.extend({maskable:!0,ViewComponent:x,DataService:M,forwardRef:!0,initialize:function initialize(){return this.__legacyAttributes={extraClassNames:{lrn_response:"lrn_cloze lrn_cloze_vertical_top_none lrn_non_list"},willRenderOwnResponseInput:!0},c.a.prototype.initialize.call(this)},getReducers:function getReducers(){var t=c.a.prototype.getReducers.apply(this,arguments);return a.a.assign(t,{cloze:k.a})}});n.default={View:L,Model:o.a}}}]);